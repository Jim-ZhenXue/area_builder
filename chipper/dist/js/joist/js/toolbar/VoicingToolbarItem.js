// Copyright 2021-2024, University of Colorado Boulder
/**
 * An item for the Toolbar that includes components related to the voicing feature. Includes a switch to
 * enable/disable all speech, and buttons to hear overview information about the active sim Screen.
 *
 * @author Jesse Greenberg (PhET Interactive Simulations)
 */ import BooleanProperty from '../../../axon/js/BooleanProperty.js';
import optionize, { combineOptions } from '../../../phet-core/js/optionize.js';
import PlayStopButton from '../../../scenery-phet/js/buttons/PlayStopButton.js';
import PhetFont from '../../../scenery-phet/js/PhetFont.js';
import { AlignGroup, Display, HBox, Node, ReadingBlockHighlight, Text, voicingManager, VoicingText, voicingUtteranceQueue } from '../../../scenery/js/imports.js';
import ToggleSwitch from '../../../sun/js/ToggleSwitch.js';
import Tandem from '../../../tandem/js/Tandem.js';
import Utterance from '../../../utterance-queue/js/Utterance.js';
import joist from '../joist.js';
import JoistStrings from '../JoistStrings.js';
import PreferencesControl from '../preferences/PreferencesControl.js';
import PreferencesDialogConstants from '../preferences/PreferencesDialogConstants.js';
// constants
const CONTENT_VERTICAL_SPACING = 10;
const QUICK_INFO = 20;
// strings - Many of these strings are displayed visually but only when the sim is running in the english locale.
// Voicing is only available in English so these contents are hidden because translators will not be able to test
// them in a translated context. These strings are nested under the a11y key so that they are not available for
// translation.
const titleStringProperty = JoistStrings.a11y.toolbar.voicing.titleStringProperty;
const quickInfoStringProperty = JoistStrings.a11y.toolbar.voicing.quickInfoStringProperty;
const simVoicingOnStringProperty = JoistStrings.a11y.toolbar.voicing.simVoicingOnAlertStringProperty;
const simVoicingOffStringProperty = JoistStrings.a11y.toolbar.voicing.simVoicingOffAlertStringProperty;
const toolbarStringProperty = JoistStrings.a11y.toolbar.titleStringProperty;
const playOverviewStringProperty = JoistStrings.a11y.toolbar.voicing.playOverviewLabelStringProperty;
const playDetailsStringProperty = JoistStrings.a11y.toolbar.voicing.playDetailsLabelStringProperty;
const playHintStringProperty = JoistStrings.a11y.toolbar.voicing.playHintLabelStringProperty;
const overviewStringProperty = JoistStrings.a11y.toolbar.voicing.overviewLabelStringProperty;
const detailsStringProperty = JoistStrings.a11y.toolbar.voicing.detailsLabelStringProperty;
const hintStringProperty = JoistStrings.a11y.toolbar.voicing.hintLabelStringProperty;
let VoicingToolbarItem = class VoicingToolbarItem extends Node {
    constructor(alertManager, lookAndFeel, providedOptions){
        var _options_tandem, _options_tandem1;
        const options = optionize()({
            // This is intended to exist forever. It is not disposable.
            isDisposable: false,
            // pdom
            tagName: 'section',
            labelTagName: 'h2',
            labelContent: toolbarStringProperty,
            // phet-io
            visiblePropertyOptions: {
                phetioReadOnly: true
            }
        }, providedOptions);
        super(options);
        const titleTextOptions = {
            font: new PhetFont(14),
            fill: lookAndFeel.navigationBarTextFillProperty,
            maxWidth: 90 // i18n, by inspection
        };
        const titleText = new Text(titleStringProperty, titleTextOptions);
        const quickInfoText = new VoicingText(quickInfoStringProperty, titleTextOptions);
        quickInfoText.focusHighlight = new ReadingBlockHighlight(quickInfoText, {
            // the inner stroke is white since the toolbar is on a black background
            innerStroke: 'white'
        });
        const muteSpeechSwitch = new ToggleSwitch(voicingManager.mainWindowVoicingEnabledProperty, false, true, combineOptions({
            accessibleName: titleStringProperty,
            rightValueContextResponse: simVoicingOnStringProperty,
            leftValueContextResponse: simVoicingOffStringProperty,
            tandem: (_options_tandem = options.tandem) == null ? void 0 : _options_tandem.createTandem('muteSpeechSwitch')
        }, PreferencesDialogConstants.TOGGLE_SWITCH_OPTIONS));
        const muteSpeechControl = new PreferencesControl({
            labelNode: titleText,
            controlNode: muteSpeechSwitch,
            tandem: (_options_tandem1 = options.tandem) == null ? void 0 : _options_tandem1.createTandem('muteSpeechControl')
        });
        // layout
        const labelAlignGroup = new AlignGroup();
        const inputAlignGroup = new AlignGroup();
        const overviewRow = new LabelButtonRow(overviewStringProperty, playOverviewStringProperty, labelAlignGroup, inputAlignGroup, lookAndFeel, alertManager.createOverviewContent.bind(alertManager));
        const detailsRow = new LabelButtonRow(detailsStringProperty, playDetailsStringProperty, labelAlignGroup, inputAlignGroup, lookAndFeel, alertManager.createDetailsContent.bind(alertManager));
        const hintRow = new LabelButtonRow(hintStringProperty, playHintStringProperty, labelAlignGroup, inputAlignGroup, lookAndFeel, alertManager.createHintContent.bind(alertManager));
        this.children = [
            muteSpeechControl,
            quickInfoText,
            overviewRow.content,
            detailsRow.content,
            hintRow.content
        ];
        // layout
        quickInfoText.leftTop = muteSpeechControl.leftBottom.plusXY(0, CONTENT_VERTICAL_SPACING);
        overviewRow.content.leftTop = quickInfoText.leftBottom.plusXY(QUICK_INFO, CONTENT_VERTICAL_SPACING);
        detailsRow.content.leftTop = overviewRow.content.leftBottom.plusXY(0, CONTENT_VERTICAL_SPACING);
        hintRow.content.leftTop = detailsRow.content.leftBottom.plusXY(0, CONTENT_VERTICAL_SPACING);
        const rows = [
            overviewRow,
            detailsRow,
            hintRow
        ];
        const playingProperties = [
            overviewRow.playingProperty,
            detailsRow.playingProperty,
            hintRow.playingProperty
        ];
        rows.forEach((row)=>{
            row.playingProperty.link((playing)=>{
                row.playContent(playingProperties);
            });
        });
    }
};
/**
 * An inner class that manages a labelled PlayStopButton in the VoicingToolbarItem. Creates the label, button,
 * and adds listeners that generate the alert to be Voiced and toggle the button's playing state when
 * the voicingManager stops speaking.
 */ let LabelButtonRow = class LabelButtonRow {
    /**
   * Play the Voicing content for this Row.
   */ playContent(playingProperties) {
        if (this.playingProperty.value) {
            // when one button is pressed, immediately stop any other buttons, only one should be playing at a time
            const otherProperties = _.without(playingProperties, this.playingProperty);
            otherProperties.forEach((property)=>{
                property.value = false;
            });
            // This utterance is top priority so that it does not get interrupted during responses that happen as
            // the simulation changes. It stays top priority until there is some interaction with the display.
            this.objectResponseUtterance.priorityProperty.value = Utterance.TOP_PRIORITY;
            this.playStopButton.voicingSpeakResponse({
                objectResponse: this.createAlert(),
                // A sepparate Utterance from the default voicingUtterance so that if default responses are cancelled we
                // don't also cancel this content in the listeners related to priorityProperty above.
                utterance: this.objectResponseUtterance
            });
        } else {
            voicingUtteranceQueue.cancelUtterance(this.objectResponseUtterance);
        }
    }
    /**
   * @param labelStringProperty - the visually rendered Text label for the button
   * @param a11yNameStringProperty - the string read in the PDOM and with the Voicing feature that labels this Button
   * @param labelAlignGroup - To align all labels in the VoicingToolbarItem
   * @param inputAlignGroup - To align all inputs in the VoicingToolbarItem
   * @param lookAndFeel
   * @param createAlert - function that creates the alert when the button is pressed
   */ constructor(labelStringProperty, a11yNameStringProperty, labelAlignGroup, inputAlignGroup, lookAndFeel, createAlert){
        this.lookAndFeel = lookAndFeel;
        this.objectResponseUtterance = new Utterance();
        this.createAlert = createAlert;
        this.playingProperty = new BooleanProperty(false, {
            // Speech is requested from a listener on the isPlayingProperty. But if the browser cannot speak it may
            // immediately cancel speech and set this Property to false again causing reentrancy.
            reentrant: true
        });
        this.playStopButton = new PlayStopButton(this.playingProperty, {
            startPlayingLabel: a11yNameStringProperty,
            // voicing
            voicingNameResponse: a11yNameStringProperty,
            voicingIgnoreVoicingManagerProperties: true,
            radius: 12,
            // phet-io
            tandem: Tandem.OPT_OUT
        });
        const textLabel = new Text(labelStringProperty, {
            font: new PhetFont(12),
            fill: this.lookAndFeel.navigationBarTextFillProperty,
            maxWidth: 100 // i18n, by inspection
        });
        const labelBox = labelAlignGroup.createBox(textLabel, {
            xAlign: 'left'
        });
        const inputBox = inputAlignGroup.createBox(this.playStopButton, {
            xAlign: 'right'
        });
        this.content = new HBox({
            children: [
                labelBox,
                inputBox
            ],
            spacing: CONTENT_VERTICAL_SPACING
        });
        voicingManager.endSpeakingEmitter.addListener((text, endedUtterance)=>{
            if (endedUtterance === this.objectResponseUtterance) {
                this.playingProperty.set(false);
                // Remove if listener wasn't interrupted by Display input.
                if (Display.inputListeners.includes(displayListener)) {
                    Display.removeInputListener(displayListener);
                }
            }
        });
        // Reduces the priority of this.utterance as soon as there is an interaction with the screen so that it may
        // be interrupted by simulation responses. See https://github.com/phetsims/joist/issues/752.
        const reducePriorityListener = (event)=>{
            // After a down event it will be possible for this.utterance to be interrupted. That will turn the "Stop" button
            // into a "Play" button. If the mouse is still down in this case the next up event on the "Play" button will
            // immediately play its content which is unexpected. We get around this by not reducing priority if the event
            // is going to this button.
            if (!event.trail.nodes.includes(this.playStopButton)) {
                Display.removeInputListener(displayListener);
                // Wait until the listener is removed before reducing this, this may immediately end the Utterance and remove
                // the listener again in the endSpeakingListener above.
                this.objectResponseUtterance.priorityProperty.value = Utterance.LOW_PRIORITY;
            }
        };
        const displayListener = {
            // The events that indicate some kind of input so we should allow this.utterance to be interrupted.
            down: reducePriorityListener,
            focus: reducePriorityListener
        };
        voicingManager.startSpeakingEmitter.addListener((response, utterance)=>{
            if (utterance === this.objectResponseUtterance) {
                Display.addInputListener(displayListener);
            }
        });
    }
};
joist.register('VoicingToolbarItem', VoicingToolbarItem);
export default VoicingToolbarItem;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2pvaXN0L2pzL3Rvb2xiYXIvVm9pY2luZ1Rvb2xiYXJJdGVtLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLTIwMjQsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEFuIGl0ZW0gZm9yIHRoZSBUb29sYmFyIHRoYXQgaW5jbHVkZXMgY29tcG9uZW50cyByZWxhdGVkIHRvIHRoZSB2b2ljaW5nIGZlYXR1cmUuIEluY2x1ZGVzIGEgc3dpdGNoIHRvXG4gKiBlbmFibGUvZGlzYWJsZSBhbGwgc3BlZWNoLCBhbmQgYnV0dG9ucyB0byBoZWFyIG92ZXJ2aWV3IGluZm9ybWF0aW9uIGFib3V0IHRoZSBhY3RpdmUgc2ltIFNjcmVlbi5cbiAqXG4gKiBAYXV0aG9yIEplc3NlIEdyZWVuYmVyZyAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgQm9vbGVhblByb3BlcnR5IGZyb20gJy4uLy4uLy4uL2F4b24vanMvQm9vbGVhblByb3BlcnR5LmpzJztcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi9heG9uL2pzL1RSZWFkT25seVByb3BlcnR5LmpzJztcbmltcG9ydCBvcHRpb25pemUsIHsgY29tYmluZU9wdGlvbnMsIEVtcHR5U2VsZk9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcbmltcG9ydCBQaWNrUmVxdWlyZWQgZnJvbSAnLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1BpY2tSZXF1aXJlZC5qcyc7XG5pbXBvcnQgU3RyaWN0T21pdCBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvU3RyaWN0T21pdC5qcyc7XG5pbXBvcnQgUGxheVN0b3BCdXR0b24gZnJvbSAnLi4vLi4vLi4vc2NlbmVyeS1waGV0L2pzL2J1dHRvbnMvUGxheVN0b3BCdXR0b24uanMnO1xuaW1wb3J0IFBoZXRGb250IGZyb20gJy4uLy4uLy4uL3NjZW5lcnktcGhldC9qcy9QaGV0Rm9udC5qcyc7XG5pbXBvcnQgeyBBbGlnbkdyb3VwLCBEaXNwbGF5LCBIQm94LCBOb2RlLCBOb2RlT3B0aW9ucywgUmVhZGluZ0Jsb2NrSGlnaGxpZ2h0LCBTY2VuZXJ5RXZlbnQsIFRleHQsIHZvaWNpbmdNYW5hZ2VyLCBWb2ljaW5nVGV4dCwgdm9pY2luZ1V0dGVyYW5jZVF1ZXVlIH0gZnJvbSAnLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcbmltcG9ydCBUb2dnbGVTd2l0Y2gsIHsgVG9nZ2xlU3dpdGNoT3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uL3N1bi9qcy9Ub2dnbGVTd2l0Y2guanMnO1xuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcbmltcG9ydCB7IFNwZWFrYWJsZVJlc29sdmVkUmVzcG9uc2UgfSBmcm9tICcuLi8uLi8uLi91dHRlcmFuY2UtcXVldWUvanMvUmVzcG9uc2VQYWNrZXQuanMnO1xuaW1wb3J0IFV0dGVyYW5jZSBmcm9tICcuLi8uLi8uLi91dHRlcmFuY2UtcXVldWUvanMvVXR0ZXJhbmNlLmpzJztcbmltcG9ydCBqb2lzdCBmcm9tICcuLi9qb2lzdC5qcyc7XG5pbXBvcnQgSm9pc3RTdHJpbmdzIGZyb20gJy4uL0pvaXN0U3RyaW5ncy5qcyc7XG5pbXBvcnQgTG9va0FuZEZlZWwgZnJvbSAnLi4vTG9va0FuZEZlZWwuanMnO1xuaW1wb3J0IFByZWZlcmVuY2VzQ29udHJvbCBmcm9tICcuLi9wcmVmZXJlbmNlcy9QcmVmZXJlbmNlc0NvbnRyb2wuanMnO1xuaW1wb3J0IFByZWZlcmVuY2VzRGlhbG9nQ29uc3RhbnRzIGZyb20gJy4uL3ByZWZlcmVuY2VzL1ByZWZlcmVuY2VzRGlhbG9nQ29uc3RhbnRzLmpzJztcbmltcG9ydCBWb2ljaW5nVG9vbGJhckFsZXJ0TWFuYWdlciBmcm9tICcuL1ZvaWNpbmdUb29sYmFyQWxlcnRNYW5hZ2VyLmpzJztcblxuLy8gY29uc3RhbnRzXG5jb25zdCBDT05URU5UX1ZFUlRJQ0FMX1NQQUNJTkcgPSAxMDtcbmNvbnN0IFFVSUNLX0lORk8gPSAyMDtcblxuLy8gc3RyaW5ncyAtIE1hbnkgb2YgdGhlc2Ugc3RyaW5ncyBhcmUgZGlzcGxheWVkIHZpc3VhbGx5IGJ1dCBvbmx5IHdoZW4gdGhlIHNpbSBpcyBydW5uaW5nIGluIHRoZSBlbmdsaXNoIGxvY2FsZS5cbi8vIFZvaWNpbmcgaXMgb25seSBhdmFpbGFibGUgaW4gRW5nbGlzaCBzbyB0aGVzZSBjb250ZW50cyBhcmUgaGlkZGVuIGJlY2F1c2UgdHJhbnNsYXRvcnMgd2lsbCBub3QgYmUgYWJsZSB0byB0ZXN0XG4vLyB0aGVtIGluIGEgdHJhbnNsYXRlZCBjb250ZXh0LiBUaGVzZSBzdHJpbmdzIGFyZSBuZXN0ZWQgdW5kZXIgdGhlIGExMXkga2V5IHNvIHRoYXQgdGhleSBhcmUgbm90IGF2YWlsYWJsZSBmb3Jcbi8vIHRyYW5zbGF0aW9uLlxuY29uc3QgdGl0bGVTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnRvb2xiYXIudm9pY2luZy50aXRsZVN0cmluZ1Byb3BlcnR5O1xuY29uc3QgcXVpY2tJbmZvU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS50b29sYmFyLnZvaWNpbmcucXVpY2tJbmZvU3RyaW5nUHJvcGVydHk7XG5jb25zdCBzaW1Wb2ljaW5nT25TdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnRvb2xiYXIudm9pY2luZy5zaW1Wb2ljaW5nT25BbGVydFN0cmluZ1Byb3BlcnR5O1xuY29uc3Qgc2ltVm9pY2luZ09mZlN0cmluZ1Byb3BlcnR5ID0gSm9pc3RTdHJpbmdzLmExMXkudG9vbGJhci52b2ljaW5nLnNpbVZvaWNpbmdPZmZBbGVydFN0cmluZ1Byb3BlcnR5O1xuY29uc3QgdG9vbGJhclN0cmluZ1Byb3BlcnR5ID0gSm9pc3RTdHJpbmdzLmExMXkudG9vbGJhci50aXRsZVN0cmluZ1Byb3BlcnR5O1xuY29uc3QgcGxheU92ZXJ2aWV3U3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS50b29sYmFyLnZvaWNpbmcucGxheU92ZXJ2aWV3TGFiZWxTdHJpbmdQcm9wZXJ0eTtcbmNvbnN0IHBsYXlEZXRhaWxzU3RyaW5nUHJvcGVydHkgPSBKb2lzdFN0cmluZ3MuYTExeS50b29sYmFyLnZvaWNpbmcucGxheURldGFpbHNMYWJlbFN0cmluZ1Byb3BlcnR5O1xuY29uc3QgcGxheUhpbnRTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnRvb2xiYXIudm9pY2luZy5wbGF5SGludExhYmVsU3RyaW5nUHJvcGVydHk7XG5jb25zdCBvdmVydmlld1N0cmluZ1Byb3BlcnR5ID0gSm9pc3RTdHJpbmdzLmExMXkudG9vbGJhci52b2ljaW5nLm92ZXJ2aWV3TGFiZWxTdHJpbmdQcm9wZXJ0eTtcbmNvbnN0IGRldGFpbHNTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnRvb2xiYXIudm9pY2luZy5kZXRhaWxzTGFiZWxTdHJpbmdQcm9wZXJ0eTtcbmNvbnN0IGhpbnRTdHJpbmdQcm9wZXJ0eSA9IEpvaXN0U3RyaW5ncy5hMTF5LnRvb2xiYXIudm9pY2luZy5oaW50TGFiZWxTdHJpbmdQcm9wZXJ0eTtcblxudHlwZSBTZWxmT3B0aW9ucyA9IEVtcHR5U2VsZk9wdGlvbnM7XG5leHBvcnQgdHlwZSBWb2ljaW5nVG9vbGJhckl0ZW1PcHRpb25zID0gU2VsZk9wdGlvbnMgJiBTdHJpY3RPbWl0PE5vZGVPcHRpb25zLCAnaXNEaXNwb3NhYmxlJz4gJiBQaWNrUmVxdWlyZWQ8Tm9kZU9wdGlvbnMsICd0YW5kZW0nPjtcblxuY2xhc3MgVm9pY2luZ1Rvb2xiYXJJdGVtIGV4dGVuZHMgTm9kZSB7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBhbGVydE1hbmFnZXI6IFZvaWNpbmdUb29sYmFyQWxlcnRNYW5hZ2VyLCBsb29rQW5kRmVlbDogTG9va0FuZEZlZWwsIHByb3ZpZGVkT3B0aW9ucz86IFZvaWNpbmdUb29sYmFySXRlbU9wdGlvbnMgKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxWb2ljaW5nVG9vbGJhckl0ZW1PcHRpb25zLCBTZWxmT3B0aW9ucywgTm9kZU9wdGlvbnM+KCkoIHtcblxuICAgICAgLy8gVGhpcyBpcyBpbnRlbmRlZCB0byBleGlzdCBmb3JldmVyLiBJdCBpcyBub3QgZGlzcG9zYWJsZS5cbiAgICAgIGlzRGlzcG9zYWJsZTogZmFsc2UsXG5cbiAgICAgIC8vIHBkb21cbiAgICAgIHRhZ05hbWU6ICdzZWN0aW9uJyxcbiAgICAgIGxhYmVsVGFnTmFtZTogJ2gyJyxcbiAgICAgIGxhYmVsQ29udGVudDogdG9vbGJhclN0cmluZ1Byb3BlcnR5LFxuXG4gICAgICAvLyBwaGV0LWlvXG4gICAgICB2aXNpYmxlUHJvcGVydHlPcHRpb25zOiB7XG4gICAgICAgIHBoZXRpb1JlYWRPbmx5OiB0cnVlXG4gICAgICB9XG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XG5cbiAgICBzdXBlciggb3B0aW9ucyApO1xuXG4gICAgY29uc3QgdGl0bGVUZXh0T3B0aW9ucyA9IHtcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMTQgKSxcbiAgICAgIGZpbGw6IGxvb2tBbmRGZWVsLm5hdmlnYXRpb25CYXJUZXh0RmlsbFByb3BlcnR5LFxuICAgICAgbWF4V2lkdGg6IDkwIC8vIGkxOG4sIGJ5IGluc3BlY3Rpb25cbiAgICB9O1xuXG4gICAgY29uc3QgdGl0bGVUZXh0ID0gbmV3IFRleHQoIHRpdGxlU3RyaW5nUHJvcGVydHksIHRpdGxlVGV4dE9wdGlvbnMgKTtcbiAgICBjb25zdCBxdWlja0luZm9UZXh0ID0gbmV3IFZvaWNpbmdUZXh0KCBxdWlja0luZm9TdHJpbmdQcm9wZXJ0eSwgdGl0bGVUZXh0T3B0aW9ucyApO1xuICAgIHF1aWNrSW5mb1RleHQuZm9jdXNIaWdobGlnaHQgPSBuZXcgUmVhZGluZ0Jsb2NrSGlnaGxpZ2h0KCBxdWlja0luZm9UZXh0LCB7XG5cbiAgICAgIC8vIHRoZSBpbm5lciBzdHJva2UgaXMgd2hpdGUgc2luY2UgdGhlIHRvb2xiYXIgaXMgb24gYSBibGFjayBiYWNrZ3JvdW5kXG4gICAgICBpbm5lclN0cm9rZTogJ3doaXRlJ1xuICAgIH0gKTtcblxuICAgIGNvbnN0IG11dGVTcGVlY2hTd2l0Y2ggPSBuZXcgVG9nZ2xlU3dpdGNoKCB2b2ljaW5nTWFuYWdlci5tYWluV2luZG93Vm9pY2luZ0VuYWJsZWRQcm9wZXJ0eSwgZmFsc2UsIHRydWUsIGNvbWJpbmVPcHRpb25zPFRvZ2dsZVN3aXRjaE9wdGlvbnM+KCB7XG4gICAgICBhY2Nlc3NpYmxlTmFtZTogdGl0bGVTdHJpbmdQcm9wZXJ0eSxcbiAgICAgIHJpZ2h0VmFsdWVDb250ZXh0UmVzcG9uc2U6IHNpbVZvaWNpbmdPblN0cmluZ1Byb3BlcnR5LFxuICAgICAgbGVmdFZhbHVlQ29udGV4dFJlc3BvbnNlOiBzaW1Wb2ljaW5nT2ZmU3RyaW5nUHJvcGVydHksXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtPy5jcmVhdGVUYW5kZW0oICdtdXRlU3BlZWNoU3dpdGNoJyApXG4gICAgfSwgUHJlZmVyZW5jZXNEaWFsb2dDb25zdGFudHMuVE9HR0xFX1NXSVRDSF9PUFRJT05TICkgKTtcbiAgICBjb25zdCBtdXRlU3BlZWNoQ29udHJvbCA9IG5ldyBQcmVmZXJlbmNlc0NvbnRyb2woIHtcbiAgICAgIGxhYmVsTm9kZTogdGl0bGVUZXh0LFxuICAgICAgY29udHJvbE5vZGU6IG11dGVTcGVlY2hTd2l0Y2gsXG4gICAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtPy5jcmVhdGVUYW5kZW0oICdtdXRlU3BlZWNoQ29udHJvbCcgKVxuICAgIH0gKTtcblxuICAgIC8vIGxheW91dFxuICAgIGNvbnN0IGxhYmVsQWxpZ25Hcm91cCA9IG5ldyBBbGlnbkdyb3VwKCk7XG4gICAgY29uc3QgaW5wdXRBbGlnbkdyb3VwID0gbmV3IEFsaWduR3JvdXAoKTtcblxuICAgIGNvbnN0IG92ZXJ2aWV3Um93ID0gbmV3IExhYmVsQnV0dG9uUm93KCBvdmVydmlld1N0cmluZ1Byb3BlcnR5LCBwbGF5T3ZlcnZpZXdTdHJpbmdQcm9wZXJ0eSwgbGFiZWxBbGlnbkdyb3VwLCBpbnB1dEFsaWduR3JvdXAsXG4gICAgICBsb29rQW5kRmVlbCwgYWxlcnRNYW5hZ2VyLmNyZWF0ZU92ZXJ2aWV3Q29udGVudC5iaW5kKCBhbGVydE1hbmFnZXIgKSApO1xuICAgIGNvbnN0IGRldGFpbHNSb3cgPSBuZXcgTGFiZWxCdXR0b25Sb3coIGRldGFpbHNTdHJpbmdQcm9wZXJ0eSwgcGxheURldGFpbHNTdHJpbmdQcm9wZXJ0eSwgbGFiZWxBbGlnbkdyb3VwLCBpbnB1dEFsaWduR3JvdXAsXG4gICAgICBsb29rQW5kRmVlbCwgYWxlcnRNYW5hZ2VyLmNyZWF0ZURldGFpbHNDb250ZW50LmJpbmQoIGFsZXJ0TWFuYWdlciApICk7XG4gICAgY29uc3QgaGludFJvdyA9IG5ldyBMYWJlbEJ1dHRvblJvdyggaGludFN0cmluZ1Byb3BlcnR5LCBwbGF5SGludFN0cmluZ1Byb3BlcnR5LCBsYWJlbEFsaWduR3JvdXAsIGlucHV0QWxpZ25Hcm91cCxcbiAgICAgIGxvb2tBbmRGZWVsLCBhbGVydE1hbmFnZXIuY3JlYXRlSGludENvbnRlbnQuYmluZCggYWxlcnRNYW5hZ2VyICkgKTtcblxuICAgIHRoaXMuY2hpbGRyZW4gPSBbIG11dGVTcGVlY2hDb250cm9sLCBxdWlja0luZm9UZXh0LCBvdmVydmlld1Jvdy5jb250ZW50LCBkZXRhaWxzUm93LmNvbnRlbnQsIGhpbnRSb3cuY29udGVudCBdO1xuXG4gICAgLy8gbGF5b3V0XG4gICAgcXVpY2tJbmZvVGV4dC5sZWZ0VG9wID0gbXV0ZVNwZWVjaENvbnRyb2wubGVmdEJvdHRvbS5wbHVzWFkoIDAsIENPTlRFTlRfVkVSVElDQUxfU1BBQ0lORyApO1xuICAgIG92ZXJ2aWV3Um93LmNvbnRlbnQubGVmdFRvcCA9IHF1aWNrSW5mb1RleHQubGVmdEJvdHRvbS5wbHVzWFkoIFFVSUNLX0lORk8sIENPTlRFTlRfVkVSVElDQUxfU1BBQ0lORyApO1xuICAgIGRldGFpbHNSb3cuY29udGVudC5sZWZ0VG9wID0gb3ZlcnZpZXdSb3cuY29udGVudC5sZWZ0Qm90dG9tLnBsdXNYWSggMCwgQ09OVEVOVF9WRVJUSUNBTF9TUEFDSU5HICk7XG4gICAgaGludFJvdy5jb250ZW50LmxlZnRUb3AgPSBkZXRhaWxzUm93LmNvbnRlbnQubGVmdEJvdHRvbS5wbHVzWFkoIDAsIENPTlRFTlRfVkVSVElDQUxfU1BBQ0lORyApO1xuXG4gICAgY29uc3Qgcm93cyA9IFsgb3ZlcnZpZXdSb3csIGRldGFpbHNSb3csIGhpbnRSb3cgXTtcbiAgICBjb25zdCBwbGF5aW5nUHJvcGVydGllcyA9IFsgb3ZlcnZpZXdSb3cucGxheWluZ1Byb3BlcnR5LCBkZXRhaWxzUm93LnBsYXlpbmdQcm9wZXJ0eSwgaGludFJvdy5wbGF5aW5nUHJvcGVydHkgXTtcblxuICAgIHJvd3MuZm9yRWFjaCggcm93ID0+IHtcbiAgICAgIHJvdy5wbGF5aW5nUHJvcGVydHkubGluayggcGxheWluZyA9PiB7XG4gICAgICAgIHJvdy5wbGF5Q29udGVudCggcGxheWluZ1Byb3BlcnRpZXMgKTtcbiAgICAgIH0gKTtcbiAgICB9ICk7XG4gIH1cbn1cblxuLyoqXG4gKiBBbiBpbm5lciBjbGFzcyB0aGF0IG1hbmFnZXMgYSBsYWJlbGxlZCBQbGF5U3RvcEJ1dHRvbiBpbiB0aGUgVm9pY2luZ1Rvb2xiYXJJdGVtLiBDcmVhdGVzIHRoZSBsYWJlbCwgYnV0dG9uLFxuICogYW5kIGFkZHMgbGlzdGVuZXJzIHRoYXQgZ2VuZXJhdGUgdGhlIGFsZXJ0IHRvIGJlIFZvaWNlZCBhbmQgdG9nZ2xlIHRoZSBidXR0b24ncyBwbGF5aW5nIHN0YXRlIHdoZW5cbiAqIHRoZSB2b2ljaW5nTWFuYWdlciBzdG9wcyBzcGVha2luZy5cbiAqL1xuY2xhc3MgTGFiZWxCdXR0b25Sb3cge1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgbG9va0FuZEZlZWw6IExvb2tBbmRGZWVsO1xuXG4gIC8vIEEgdW5pcXVlIFV0dGVyYW5jZSBmb3IgdGhlIG9iamVjdCByZXNwb25zZSBzbyB0aGF0IGl0IGNhbiBiZSBpbmRlcGVuZGVudGx5IGNhbmNlbGxlZCBhbmQgaGF2ZSBhIGR5bmFtaWMgUHJpb3JpdHlcbiAgLy8gZGVwZW5kaW5nIG9uIGludGVyYWN0aW9uIHdpdGggdGhlIHNjcmVlbi5cbiAgcHJpdmF0ZSByZWFkb25seSBvYmplY3RSZXNwb25zZVV0dGVyYW5jZTogVXR0ZXJhbmNlO1xuICBwcml2YXRlIHJlYWRvbmx5IGNyZWF0ZUFsZXJ0OiAoKSA9PiBTcGVha2FibGVSZXNvbHZlZFJlc3BvbnNlO1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYXlTdG9wQnV0dG9uOiBQbGF5U3RvcEJ1dHRvbjtcblxuICAvLyBXaGV0aGVyIHRoZSBQbGF5U3RvcEJ1dHRvbiBoYXMgYmVlbiBwcmVzc2VkIGFuZCB0aGUgdm9pY2luZ01hbmFnZXIgaXMgYWN0aXZlbHkgc3BlYWtpbmcgdGhpcyBjb250ZW50XG4gIHB1YmxpYyByZWFkb25seSBwbGF5aW5nUHJvcGVydHk6IEJvb2xlYW5Qcm9wZXJ0eTtcblxuICAvLyBUaGUgTm9kZSBvZiBjb250ZW50IHRvIGJlIGRpc3BsYXllZCBpbiB0aGUgdmlldywgbWFuYWdpbmcgbGF5b3V0IG9mIHRoZSBsYWJlbCBhbmQgYnV0dG9uXG4gIHB1YmxpYyByZWFkb25seSBjb250ZW50OiBOb2RlO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gbGFiZWxTdHJpbmdQcm9wZXJ0eSAtIHRoZSB2aXN1YWxseSByZW5kZXJlZCBUZXh0IGxhYmVsIGZvciB0aGUgYnV0dG9uXG4gICAqIEBwYXJhbSBhMTF5TmFtZVN0cmluZ1Byb3BlcnR5IC0gdGhlIHN0cmluZyByZWFkIGluIHRoZSBQRE9NIGFuZCB3aXRoIHRoZSBWb2ljaW5nIGZlYXR1cmUgdGhhdCBsYWJlbHMgdGhpcyBCdXR0b25cbiAgICogQHBhcmFtIGxhYmVsQWxpZ25Hcm91cCAtIFRvIGFsaWduIGFsbCBsYWJlbHMgaW4gdGhlIFZvaWNpbmdUb29sYmFySXRlbVxuICAgKiBAcGFyYW0gaW5wdXRBbGlnbkdyb3VwIC0gVG8gYWxpZ24gYWxsIGlucHV0cyBpbiB0aGUgVm9pY2luZ1Rvb2xiYXJJdGVtXG4gICAqIEBwYXJhbSBsb29rQW5kRmVlbFxuICAgKiBAcGFyYW0gY3JlYXRlQWxlcnQgLSBmdW5jdGlvbiB0aGF0IGNyZWF0ZXMgdGhlIGFsZXJ0IHdoZW4gdGhlIGJ1dHRvbiBpcyBwcmVzc2VkXG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoXG4gICAgbGFiZWxTdHJpbmdQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPixcbiAgICBhMTF5TmFtZVN0cmluZ1Byb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+LFxuICAgIGxhYmVsQWxpZ25Hcm91cDogQWxpZ25Hcm91cCxcbiAgICBpbnB1dEFsaWduR3JvdXA6IEFsaWduR3JvdXAsXG4gICAgbG9va0FuZEZlZWw6IExvb2tBbmRGZWVsLFxuICAgIGNyZWF0ZUFsZXJ0OiAoKSA9PiBTcGVha2FibGVSZXNvbHZlZFJlc3BvbnNlXG4gICkge1xuXG4gICAgdGhpcy5sb29rQW5kRmVlbCA9IGxvb2tBbmRGZWVsO1xuICAgIHRoaXMub2JqZWN0UmVzcG9uc2VVdHRlcmFuY2UgPSBuZXcgVXR0ZXJhbmNlKCk7XG4gICAgdGhpcy5jcmVhdGVBbGVydCA9IGNyZWF0ZUFsZXJ0O1xuXG4gICAgdGhpcy5wbGF5aW5nUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSwge1xuXG4gICAgICAvLyBTcGVlY2ggaXMgcmVxdWVzdGVkIGZyb20gYSBsaXN0ZW5lciBvbiB0aGUgaXNQbGF5aW5nUHJvcGVydHkuIEJ1dCBpZiB0aGUgYnJvd3NlciBjYW5ub3Qgc3BlYWsgaXQgbWF5XG4gICAgICAvLyBpbW1lZGlhdGVseSBjYW5jZWwgc3BlZWNoIGFuZCBzZXQgdGhpcyBQcm9wZXJ0eSB0byBmYWxzZSBhZ2FpbiBjYXVzaW5nIHJlZW50cmFuY3kuXG4gICAgICByZWVudHJhbnQ6IHRydWVcbiAgICB9ICk7XG5cbiAgICB0aGlzLnBsYXlTdG9wQnV0dG9uID0gbmV3IFBsYXlTdG9wQnV0dG9uKCB0aGlzLnBsYXlpbmdQcm9wZXJ0eSwge1xuICAgICAgc3RhcnRQbGF5aW5nTGFiZWw6IGExMXlOYW1lU3RyaW5nUHJvcGVydHksXG5cbiAgICAgIC8vIHZvaWNpbmdcbiAgICAgIHZvaWNpbmdOYW1lUmVzcG9uc2U6IGExMXlOYW1lU3RyaW5nUHJvcGVydHksXG4gICAgICB2b2ljaW5nSWdub3JlVm9pY2luZ01hbmFnZXJQcm9wZXJ0aWVzOiB0cnVlLFxuXG4gICAgICByYWRpdXM6IDEyLFxuXG4gICAgICAvLyBwaGV0LWlvXG4gICAgICB0YW5kZW06IFRhbmRlbS5PUFRfT1VUXG4gICAgfSApO1xuXG4gICAgY29uc3QgdGV4dExhYmVsID0gbmV3IFRleHQoIGxhYmVsU3RyaW5nUHJvcGVydHksIHtcbiAgICAgIGZvbnQ6IG5ldyBQaGV0Rm9udCggMTIgKSxcbiAgICAgIGZpbGw6IHRoaXMubG9va0FuZEZlZWwubmF2aWdhdGlvbkJhclRleHRGaWxsUHJvcGVydHksXG4gICAgICBtYXhXaWR0aDogMTAwIC8vIGkxOG4sIGJ5IGluc3BlY3Rpb25cbiAgICB9ICk7XG5cbiAgICBjb25zdCBsYWJlbEJveCA9IGxhYmVsQWxpZ25Hcm91cC5jcmVhdGVCb3goIHRleHRMYWJlbCwgeyB4QWxpZ246ICdsZWZ0JyB9ICk7XG4gICAgY29uc3QgaW5wdXRCb3ggPSBpbnB1dEFsaWduR3JvdXAuY3JlYXRlQm94KCB0aGlzLnBsYXlTdG9wQnV0dG9uLCB7IHhBbGlnbjogJ3JpZ2h0JyB9ICk7XG5cbiAgICB0aGlzLmNvbnRlbnQgPSBuZXcgSEJveCggeyBjaGlsZHJlbjogWyBsYWJlbEJveCwgaW5wdXRCb3ggXSwgc3BhY2luZzogQ09OVEVOVF9WRVJUSUNBTF9TUEFDSU5HIH0gKTtcblxuICAgIHZvaWNpbmdNYW5hZ2VyLmVuZFNwZWFraW5nRW1pdHRlci5hZGRMaXN0ZW5lciggKCB0ZXh0LCBlbmRlZFV0dGVyYW5jZSApID0+IHtcbiAgICAgIGlmICggZW5kZWRVdHRlcmFuY2UgPT09IHRoaXMub2JqZWN0UmVzcG9uc2VVdHRlcmFuY2UgKSB7XG4gICAgICAgIHRoaXMucGxheWluZ1Byb3BlcnR5LnNldCggZmFsc2UgKTtcblxuICAgICAgICAvLyBSZW1vdmUgaWYgbGlzdGVuZXIgd2Fzbid0IGludGVycnVwdGVkIGJ5IERpc3BsYXkgaW5wdXQuXG4gICAgICAgIGlmICggRGlzcGxheS5pbnB1dExpc3RlbmVycy5pbmNsdWRlcyggZGlzcGxheUxpc3RlbmVyICkgKSB7XG4gICAgICAgICAgRGlzcGxheS5yZW1vdmVJbnB1dExpc3RlbmVyKCBkaXNwbGF5TGlzdGVuZXIgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gKTtcblxuICAgIC8vIFJlZHVjZXMgdGhlIHByaW9yaXR5IG9mIHRoaXMudXR0ZXJhbmNlIGFzIHNvb24gYXMgdGhlcmUgaXMgYW4gaW50ZXJhY3Rpb24gd2l0aCB0aGUgc2NyZWVuIHNvIHRoYXQgaXQgbWF5XG4gICAgLy8gYmUgaW50ZXJydXB0ZWQgYnkgc2ltdWxhdGlvbiByZXNwb25zZXMuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvam9pc3QvaXNzdWVzLzc1Mi5cbiAgICBjb25zdCByZWR1Y2VQcmlvcml0eUxpc3RlbmVyID0gKCBldmVudDogU2NlbmVyeUV2ZW50ICkgPT4ge1xuXG4gICAgICAvLyBBZnRlciBhIGRvd24gZXZlbnQgaXQgd2lsbCBiZSBwb3NzaWJsZSBmb3IgdGhpcy51dHRlcmFuY2UgdG8gYmUgaW50ZXJydXB0ZWQuIFRoYXQgd2lsbCB0dXJuIHRoZSBcIlN0b3BcIiBidXR0b25cbiAgICAgIC8vIGludG8gYSBcIlBsYXlcIiBidXR0b24uIElmIHRoZSBtb3VzZSBpcyBzdGlsbCBkb3duIGluIHRoaXMgY2FzZSB0aGUgbmV4dCB1cCBldmVudCBvbiB0aGUgXCJQbGF5XCIgYnV0dG9uIHdpbGxcbiAgICAgIC8vIGltbWVkaWF0ZWx5IHBsYXkgaXRzIGNvbnRlbnQgd2hpY2ggaXMgdW5leHBlY3RlZC4gV2UgZ2V0IGFyb3VuZCB0aGlzIGJ5IG5vdCByZWR1Y2luZyBwcmlvcml0eSBpZiB0aGUgZXZlbnRcbiAgICAgIC8vIGlzIGdvaW5nIHRvIHRoaXMgYnV0dG9uLlxuICAgICAgaWYgKCAhZXZlbnQudHJhaWwubm9kZXMuaW5jbHVkZXMoIHRoaXMucGxheVN0b3BCdXR0b24gKSApIHtcbiAgICAgICAgRGlzcGxheS5yZW1vdmVJbnB1dExpc3RlbmVyKCBkaXNwbGF5TGlzdGVuZXIgKTtcblxuICAgICAgICAvLyBXYWl0IHVudGlsIHRoZSBsaXN0ZW5lciBpcyByZW1vdmVkIGJlZm9yZSByZWR1Y2luZyB0aGlzLCB0aGlzIG1heSBpbW1lZGlhdGVseSBlbmQgdGhlIFV0dGVyYW5jZSBhbmQgcmVtb3ZlXG4gICAgICAgIC8vIHRoZSBsaXN0ZW5lciBhZ2FpbiBpbiB0aGUgZW5kU3BlYWtpbmdMaXN0ZW5lciBhYm92ZS5cbiAgICAgICAgdGhpcy5vYmplY3RSZXNwb25zZVV0dGVyYW5jZS5wcmlvcml0eVByb3BlcnR5LnZhbHVlID0gVXR0ZXJhbmNlLkxPV19QUklPUklUWTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgZGlzcGxheUxpc3RlbmVyID0ge1xuXG4gICAgICAvLyBUaGUgZXZlbnRzIHRoYXQgaW5kaWNhdGUgc29tZSBraW5kIG9mIGlucHV0IHNvIHdlIHNob3VsZCBhbGxvdyB0aGlzLnV0dGVyYW5jZSB0byBiZSBpbnRlcnJ1cHRlZC5cbiAgICAgIGRvd246IHJlZHVjZVByaW9yaXR5TGlzdGVuZXIsXG4gICAgICBmb2N1czogcmVkdWNlUHJpb3JpdHlMaXN0ZW5lclxuICAgIH07XG5cbiAgICB2b2ljaW5nTWFuYWdlci5zdGFydFNwZWFraW5nRW1pdHRlci5hZGRMaXN0ZW5lciggKCByZXNwb25zZSwgdXR0ZXJhbmNlICkgPT4ge1xuICAgICAgaWYgKCB1dHRlcmFuY2UgPT09IHRoaXMub2JqZWN0UmVzcG9uc2VVdHRlcmFuY2UgKSB7XG4gICAgICAgIERpc3BsYXkuYWRkSW5wdXRMaXN0ZW5lciggZGlzcGxheUxpc3RlbmVyICk7XG4gICAgICB9XG4gICAgfSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFBsYXkgdGhlIFZvaWNpbmcgY29udGVudCBmb3IgdGhpcyBSb3cuXG4gICAqL1xuICBwdWJsaWMgcGxheUNvbnRlbnQoIHBsYXlpbmdQcm9wZXJ0aWVzOiBCb29sZWFuUHJvcGVydHlbXSApOiB2b2lkIHtcblxuICAgIGlmICggdGhpcy5wbGF5aW5nUHJvcGVydHkudmFsdWUgKSB7XG5cbiAgICAgIC8vIHdoZW4gb25lIGJ1dHRvbiBpcyBwcmVzc2VkLCBpbW1lZGlhdGVseSBzdG9wIGFueSBvdGhlciBidXR0b25zLCBvbmx5IG9uZSBzaG91bGQgYmUgcGxheWluZyBhdCBhIHRpbWVcbiAgICAgIGNvbnN0IG90aGVyUHJvcGVydGllcyA9IF8ud2l0aG91dCggcGxheWluZ1Byb3BlcnRpZXMsIHRoaXMucGxheWluZ1Byb3BlcnR5ICk7XG4gICAgICBvdGhlclByb3BlcnRpZXMuZm9yRWFjaCggcHJvcGVydHkgPT4ge1xuICAgICAgICBwcm9wZXJ0eS52YWx1ZSA9IGZhbHNlO1xuICAgICAgfSApO1xuXG4gICAgICAvLyBUaGlzIHV0dGVyYW5jZSBpcyB0b3AgcHJpb3JpdHkgc28gdGhhdCBpdCBkb2VzIG5vdCBnZXQgaW50ZXJydXB0ZWQgZHVyaW5nIHJlc3BvbnNlcyB0aGF0IGhhcHBlbiBhc1xuICAgICAgLy8gdGhlIHNpbXVsYXRpb24gY2hhbmdlcy4gSXQgc3RheXMgdG9wIHByaW9yaXR5IHVudGlsIHRoZXJlIGlzIHNvbWUgaW50ZXJhY3Rpb24gd2l0aCB0aGUgZGlzcGxheS5cbiAgICAgIHRoaXMub2JqZWN0UmVzcG9uc2VVdHRlcmFuY2UucHJpb3JpdHlQcm9wZXJ0eS52YWx1ZSA9IFV0dGVyYW5jZS5UT1BfUFJJT1JJVFk7XG4gICAgICB0aGlzLnBsYXlTdG9wQnV0dG9uLnZvaWNpbmdTcGVha1Jlc3BvbnNlKCB7XG4gICAgICAgIG9iamVjdFJlc3BvbnNlOiB0aGlzLmNyZWF0ZUFsZXJ0KCksXG5cbiAgICAgICAgLy8gQSBzZXBwYXJhdGUgVXR0ZXJhbmNlIGZyb20gdGhlIGRlZmF1bHQgdm9pY2luZ1V0dGVyYW5jZSBzbyB0aGF0IGlmIGRlZmF1bHQgcmVzcG9uc2VzIGFyZSBjYW5jZWxsZWQgd2VcbiAgICAgICAgLy8gZG9uJ3QgYWxzbyBjYW5jZWwgdGhpcyBjb250ZW50IGluIHRoZSBsaXN0ZW5lcnMgcmVsYXRlZCB0byBwcmlvcml0eVByb3BlcnR5IGFib3ZlLlxuICAgICAgICB1dHRlcmFuY2U6IHRoaXMub2JqZWN0UmVzcG9uc2VVdHRlcmFuY2VcbiAgICAgIH0gKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB2b2ljaW5nVXR0ZXJhbmNlUXVldWUuY2FuY2VsVXR0ZXJhbmNlKCB0aGlzLm9iamVjdFJlc3BvbnNlVXR0ZXJhbmNlICk7XG4gICAgfVxuICB9XG59XG5cbmpvaXN0LnJlZ2lzdGVyKCAnVm9pY2luZ1Rvb2xiYXJJdGVtJywgVm9pY2luZ1Rvb2xiYXJJdGVtICk7XG5leHBvcnQgZGVmYXVsdCBWb2ljaW5nVG9vbGJhckl0ZW07Il0sIm5hbWVzIjpbIkJvb2xlYW5Qcm9wZXJ0eSIsIm9wdGlvbml6ZSIsImNvbWJpbmVPcHRpb25zIiwiUGxheVN0b3BCdXR0b24iLCJQaGV0Rm9udCIsIkFsaWduR3JvdXAiLCJEaXNwbGF5IiwiSEJveCIsIk5vZGUiLCJSZWFkaW5nQmxvY2tIaWdobGlnaHQiLCJUZXh0Iiwidm9pY2luZ01hbmFnZXIiLCJWb2ljaW5nVGV4dCIsInZvaWNpbmdVdHRlcmFuY2VRdWV1ZSIsIlRvZ2dsZVN3aXRjaCIsIlRhbmRlbSIsIlV0dGVyYW5jZSIsImpvaXN0IiwiSm9pc3RTdHJpbmdzIiwiUHJlZmVyZW5jZXNDb250cm9sIiwiUHJlZmVyZW5jZXNEaWFsb2dDb25zdGFudHMiLCJDT05URU5UX1ZFUlRJQ0FMX1NQQUNJTkciLCJRVUlDS19JTkZPIiwidGl0bGVTdHJpbmdQcm9wZXJ0eSIsImExMXkiLCJ0b29sYmFyIiwidm9pY2luZyIsInF1aWNrSW5mb1N0cmluZ1Byb3BlcnR5Iiwic2ltVm9pY2luZ09uU3RyaW5nUHJvcGVydHkiLCJzaW1Wb2ljaW5nT25BbGVydFN0cmluZ1Byb3BlcnR5Iiwic2ltVm9pY2luZ09mZlN0cmluZ1Byb3BlcnR5Iiwic2ltVm9pY2luZ09mZkFsZXJ0U3RyaW5nUHJvcGVydHkiLCJ0b29sYmFyU3RyaW5nUHJvcGVydHkiLCJwbGF5T3ZlcnZpZXdTdHJpbmdQcm9wZXJ0eSIsInBsYXlPdmVydmlld0xhYmVsU3RyaW5nUHJvcGVydHkiLCJwbGF5RGV0YWlsc1N0cmluZ1Byb3BlcnR5IiwicGxheURldGFpbHNMYWJlbFN0cmluZ1Byb3BlcnR5IiwicGxheUhpbnRTdHJpbmdQcm9wZXJ0eSIsInBsYXlIaW50TGFiZWxTdHJpbmdQcm9wZXJ0eSIsIm92ZXJ2aWV3U3RyaW5nUHJvcGVydHkiLCJvdmVydmlld0xhYmVsU3RyaW5nUHJvcGVydHkiLCJkZXRhaWxzU3RyaW5nUHJvcGVydHkiLCJkZXRhaWxzTGFiZWxTdHJpbmdQcm9wZXJ0eSIsImhpbnRTdHJpbmdQcm9wZXJ0eSIsImhpbnRMYWJlbFN0cmluZ1Byb3BlcnR5IiwiVm9pY2luZ1Rvb2xiYXJJdGVtIiwiYWxlcnRNYW5hZ2VyIiwibG9va0FuZEZlZWwiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwiaXNEaXNwb3NhYmxlIiwidGFnTmFtZSIsImxhYmVsVGFnTmFtZSIsImxhYmVsQ29udGVudCIsInZpc2libGVQcm9wZXJ0eU9wdGlvbnMiLCJwaGV0aW9SZWFkT25seSIsInRpdGxlVGV4dE9wdGlvbnMiLCJmb250IiwiZmlsbCIsIm5hdmlnYXRpb25CYXJUZXh0RmlsbFByb3BlcnR5IiwibWF4V2lkdGgiLCJ0aXRsZVRleHQiLCJxdWlja0luZm9UZXh0IiwiZm9jdXNIaWdobGlnaHQiLCJpbm5lclN0cm9rZSIsIm11dGVTcGVlY2hTd2l0Y2giLCJtYWluV2luZG93Vm9pY2luZ0VuYWJsZWRQcm9wZXJ0eSIsImFjY2Vzc2libGVOYW1lIiwicmlnaHRWYWx1ZUNvbnRleHRSZXNwb25zZSIsImxlZnRWYWx1ZUNvbnRleHRSZXNwb25zZSIsInRhbmRlbSIsImNyZWF0ZVRhbmRlbSIsIlRPR0dMRV9TV0lUQ0hfT1BUSU9OUyIsIm11dGVTcGVlY2hDb250cm9sIiwibGFiZWxOb2RlIiwiY29udHJvbE5vZGUiLCJsYWJlbEFsaWduR3JvdXAiLCJpbnB1dEFsaWduR3JvdXAiLCJvdmVydmlld1JvdyIsIkxhYmVsQnV0dG9uUm93IiwiY3JlYXRlT3ZlcnZpZXdDb250ZW50IiwiYmluZCIsImRldGFpbHNSb3ciLCJjcmVhdGVEZXRhaWxzQ29udGVudCIsImhpbnRSb3ciLCJjcmVhdGVIaW50Q29udGVudCIsImNoaWxkcmVuIiwiY29udGVudCIsImxlZnRUb3AiLCJsZWZ0Qm90dG9tIiwicGx1c1hZIiwicm93cyIsInBsYXlpbmdQcm9wZXJ0aWVzIiwicGxheWluZ1Byb3BlcnR5IiwiZm9yRWFjaCIsInJvdyIsImxpbmsiLCJwbGF5aW5nIiwicGxheUNvbnRlbnQiLCJ2YWx1ZSIsIm90aGVyUHJvcGVydGllcyIsIl8iLCJ3aXRob3V0IiwicHJvcGVydHkiLCJvYmplY3RSZXNwb25zZVV0dGVyYW5jZSIsInByaW9yaXR5UHJvcGVydHkiLCJUT1BfUFJJT1JJVFkiLCJwbGF5U3RvcEJ1dHRvbiIsInZvaWNpbmdTcGVha1Jlc3BvbnNlIiwib2JqZWN0UmVzcG9uc2UiLCJjcmVhdGVBbGVydCIsInV0dGVyYW5jZSIsImNhbmNlbFV0dGVyYW5jZSIsImxhYmVsU3RyaW5nUHJvcGVydHkiLCJhMTF5TmFtZVN0cmluZ1Byb3BlcnR5IiwicmVlbnRyYW50Iiwic3RhcnRQbGF5aW5nTGFiZWwiLCJ2b2ljaW5nTmFtZVJlc3BvbnNlIiwidm9pY2luZ0lnbm9yZVZvaWNpbmdNYW5hZ2VyUHJvcGVydGllcyIsInJhZGl1cyIsIk9QVF9PVVQiLCJ0ZXh0TGFiZWwiLCJsYWJlbEJveCIsImNyZWF0ZUJveCIsInhBbGlnbiIsImlucHV0Qm94Iiwic3BhY2luZyIsImVuZFNwZWFraW5nRW1pdHRlciIsImFkZExpc3RlbmVyIiwidGV4dCIsImVuZGVkVXR0ZXJhbmNlIiwic2V0IiwiaW5wdXRMaXN0ZW5lcnMiLCJpbmNsdWRlcyIsImRpc3BsYXlMaXN0ZW5lciIsInJlbW92ZUlucHV0TGlzdGVuZXIiLCJyZWR1Y2VQcmlvcml0eUxpc3RlbmVyIiwiZXZlbnQiLCJ0cmFpbCIsIm5vZGVzIiwiTE9XX1BSSU9SSVRZIiwiZG93biIsImZvY3VzIiwic3RhcnRTcGVha2luZ0VtaXR0ZXIiLCJyZXNwb25zZSIsImFkZElucHV0TGlzdGVuZXIiLCJyZWdpc3RlciJdLCJtYXBwaW5ncyI6IkFBQUEsc0RBQXNEO0FBRXREOzs7OztDQUtDLEdBRUQsT0FBT0EscUJBQXFCLHNDQUFzQztBQUVsRSxPQUFPQyxhQUFhQyxjQUFjLFFBQTBCLHFDQUFxQztBQUdqRyxPQUFPQyxvQkFBb0IscURBQXFEO0FBQ2hGLE9BQU9DLGNBQWMsdUNBQXVDO0FBQzVELFNBQVNDLFVBQVUsRUFBRUMsT0FBTyxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBZUMscUJBQXFCLEVBQWdCQyxJQUFJLEVBQUVDLGNBQWMsRUFBRUMsV0FBVyxFQUFFQyxxQkFBcUIsUUFBUSxpQ0FBaUM7QUFDN0wsT0FBT0Msa0JBQTJDLGtDQUFrQztBQUNwRixPQUFPQyxZQUFZLCtCQUErQjtBQUVsRCxPQUFPQyxlQUFlLDJDQUEyQztBQUNqRSxPQUFPQyxXQUFXLGNBQWM7QUFDaEMsT0FBT0Msa0JBQWtCLHFCQUFxQjtBQUU5QyxPQUFPQyx3QkFBd0IsdUNBQXVDO0FBQ3RFLE9BQU9DLGdDQUFnQywrQ0FBK0M7QUFHdEYsWUFBWTtBQUNaLE1BQU1DLDJCQUEyQjtBQUNqQyxNQUFNQyxhQUFhO0FBRW5CLGlIQUFpSDtBQUNqSCxpSEFBaUg7QUFDakgsK0dBQStHO0FBQy9HLGVBQWU7QUFDZixNQUFNQyxzQkFBc0JM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