// Copyright 2020-2024, University of Colorado Boulder
/**
 * SoundClipChord plays a chord built from the given sound.
 *
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */ import DerivedProperty from '../../../axon/js/DerivedProperty.js';
import merge from '../../../phet-core/js/merge.js';
import optionize from '../../../phet-core/js/optionize.js';
import SoundClip from '../../../tambo/js/sound-generators/SoundClip.js';
import SoundGenerator from '../../../tambo/js/sound-generators/SoundGenerator.js';
import tambo from '../tambo.js';
let SoundClipChord = class SoundClipChord extends SoundGenerator {
    /**
   * Play the chord.
   */ play() {
        this.playbackSoundClips.forEach((soundClip, index)=>{
            const delay = this.arpeggiate ? index * this.arpeggiateTime / this.playbackSoundClips.length : 0;
            soundClip.play(delay);
        });
    }
    /**
   * Stop the chord if it's playing.  This is mostly here to complete the TSoundPlayer interface.
   */ stop() {
        this.playbackSoundClips.forEach((soundClip)=>{
            soundClip.stop();
        });
    }
    /**
   * Release any memory references in order to avoid memory leaks.
   */ dispose() {
        this.playbackSoundClips.forEach((soundClip)=>soundClip.dispose());
        this.playbackSoundClips.length = 0;
        super.dispose();
    }
    constructor(sound, providedOptions){
        const options = optionize()({
            initialOutputLevel: 0.7,
            soundClipOptions: null,
            arpeggiate: false,
            arpeggiateTime: 0.10,
            chordPlaybackRates: [
                Math.pow(2, 1 / 12),
                Math.pow(2, 4 / 12),
                Math.pow(2, 7 / 12)
            ] // default to major chord
        }, providedOptions);
        if (options.soundClipOptions) {
            assert && assert(options.soundClipOptions.initialPlaybackRate === undefined, 'SoundClipChord sets the initialPlaybackRate for its SoundClips');
        }
        super(options);
        this.arpeggiate = options.arpeggiate;
        this.arpeggiateTime = options.arpeggiateTime;
        this.playbackSoundClips = options.chordPlaybackRates.map((playbackRate)=>{
            const soundClip = new SoundClip(sound, merge({
                initialPlaybackRate: playbackRate
            }, options.soundClipOptions));
            soundClip.connect(this.soundSourceDestination);
            return soundClip;
        });
        this.isPlayingProperty = DerivedProperty.or(this.playbackSoundClips.map((soundClip)=>soundClip.isPlayingProperty));
    }
};
tambo.register('SoundClipChord', SoundClipChord);
export default SoundClipChord;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RhbWJvL2pzL3NvdW5kLWdlbmVyYXRvcnMvU291bmRDbGlwQ2hvcmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAtMjAyNCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogU291bmRDbGlwQ2hvcmQgcGxheXMgYSBjaG9yZCBidWlsdCBmcm9tIHRoZSBnaXZlbiBzb3VuZC5cbiAqXG4gKiBAYXV0aG9yIE1pY2hhZWwgS2F1em1hbm4gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IERlcml2ZWRQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi9heG9uL2pzL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgbWVyZ2UgZnJvbSAnLi4vLi4vLi4vcGhldC1jb3JlL2pzL21lcmdlLmpzJztcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XG5pbXBvcnQgU291bmRDbGlwLCB7IFNvdW5kQ2xpcE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi90YW1iby9qcy9zb3VuZC1nZW5lcmF0b3JzL1NvdW5kQ2xpcC5qcyc7XG5pbXBvcnQgU291bmRHZW5lcmF0b3IsIHsgU291bmRHZW5lcmF0b3JPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vdGFtYm8vanMvc291bmQtZ2VuZXJhdG9ycy9Tb3VuZEdlbmVyYXRvci5qcyc7XG5pbXBvcnQgdGFtYm8gZnJvbSAnLi4vdGFtYm8uanMnO1xuaW1wb3J0IFRTb3VuZFBsYXllciBmcm9tICcuLi9UU291bmRQbGF5ZXIuanMnO1xuaW1wb3J0IFdyYXBwZWRBdWRpb0J1ZmZlciBmcm9tICcuLi9XcmFwcGVkQXVkaW9CdWZmZXIuanMnO1xuXG50eXBlIFNlbGZPcHRpb25zID0ge1xuXG4gIC8vIG9wdGlvbnMgcGFzc2VkIGFsb25nIHRvIGVhY2ggU291bmRDbGlwIHVzZWQgaW4gdGhlIGNob3JkXG4gIHNvdW5kQ2xpcE9wdGlvbnM/OiBTb3VuZENsaXBPcHRpb25zIHwgbnVsbDtcblxuICAvLyBXaGVuIHRydWUsIHRoZSBjaG9yZCB3aWxsIHBsYXkgd2l0aCBhIGRlbGF5IGJldHdlZW4gZWFjaCBub3RlLCBzdGFydGluZyB3aXRoIHRoZSBmaXJzdCBub3RlIGluIGNob3JkUGxheWJhY2tSYXRlc1xuICAvLyBhbmQgZW5kaW5nIHdpdGggdGhlIGxhc3QuXG4gIGFycGVnZ2lhdGU/OiBib29sZWFuO1xuXG4gIC8vIGluIHNlY29uZHMsIHRoZSB0b3RhbCB0aW1lIHRoYXQgaXQgd2lsbCB0YWtlIHRoZSBjaG9yZCB0byBhcnBlZ2dpYXRlXG4gIGFycGVnZ2lhdGVUaW1lPzogbnVtYmVyO1xuXG4gIC8vIHBsYXliYWNrIHJhdGVzIGZvciB0aGUgbm90ZXMgaW4gdGhlIGNob3JkXG4gIGNob3JkUGxheWJhY2tSYXRlcz86IG51bWJlcltdO1xufTtcblxuZXhwb3J0IHR5cGUgU291bmRDbGlwQ2hvcmRPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBTb3VuZEdlbmVyYXRvck9wdGlvbnM7XG5cbmNsYXNzIFNvdW5kQ2xpcENob3JkIGV4dGVuZHMgU291bmRHZW5lcmF0b3IgaW1wbGVtZW50cyBUU291bmRQbGF5ZXIge1xuXG4gIC8vIHdoZXRoZXIgdG8gcGxheSB0aGUgY2hvcmQgYXMgYW4gYXJwZWdnaW9cbiAgcHJpdmF0ZSByZWFkb25seSBhcnBlZ2dpYXRlOiBib29sZWFuO1xuXG4gIC8vIHRvdGFsIHRpbWUgdG8gcGxheSBhcnBlZ2dpbywgaWYgZW5hYmxlZFxuICBwcml2YXRlIHJlYWRvbmx5IGFycGVnZ2lhdGVUaW1lOiBudW1iZXI7XG5cbiAgLy8gc291bmQgY2xpcHMgdG8gcGxheSBpbiB0aGUgY2hvcmRcbiAgcHJpdmF0ZSByZWFkb25seSBwbGF5YmFja1NvdW5kQ2xpcHM6IFNvdW5kQ2xpcFtdO1xuXG4gIC8vIGZsYWcgaW5kaWNhdGluZyB3aGV0aGVyIHRoaXMgaXMgY3VycmVudGx5IHBsYXlpbmdcbiAgcHVibGljIHJlYWRvbmx5IGlzUGxheWluZ1Byb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxib29sZWFuPjtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoIHNvdW5kOiBXcmFwcGVkQXVkaW9CdWZmZXIsIHByb3ZpZGVkT3B0aW9ucz86IFNvdW5kQ2xpcENob3JkT3B0aW9ucyApIHtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8U291bmRDbGlwQ2hvcmRPcHRpb25zLCBTZWxmT3B0aW9ucywgU291bmRHZW5lcmF0b3JPcHRpb25zPigpKCB7XG4gICAgICBpbml0aWFsT3V0cHV0TGV2ZWw6IDAuNyxcbiAgICAgIHNvdW5kQ2xpcE9wdGlvbnM6IG51bGwsXG4gICAgICBhcnBlZ2dpYXRlOiBmYWxzZSxcbiAgICAgIGFycGVnZ2lhdGVUaW1lOiAwLjEwLCAvLyBpbiBzZWNvbmRzLCB0aGUgdG90YWwgdGltZSB0aGF0IGl0IHdpbGwgdGFrZSB0aGUgY2hvcmQgdG8gYXJwZWdnaWF0ZVxuICAgICAgY2hvcmRQbGF5YmFja1JhdGVzOiBbIE1hdGgucG93KCAyLCAxIC8gMTIgKSwgTWF0aC5wb3coIDIsIDQgLyAxMiApLCBNYXRoLnBvdyggMiwgNyAvIDEyICkgXSAvLyBkZWZhdWx0IHRvIG1ham9yIGNob3JkXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XG5cbiAgICBpZiAoIG9wdGlvbnMuc291bmRDbGlwT3B0aW9ucyApIHtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoXG4gICAgICAgIG9wdGlvbnMuc291bmRDbGlwT3B0aW9ucy5pbml0aWFsUGxheWJhY2tSYXRlID09PSB1bmRlZmluZWQsXG4gICAgICAgICdTb3VuZENsaXBDaG9yZCBzZXRzIHRoZSBpbml0aWFsUGxheWJhY2tSYXRlIGZvciBpdHMgU291bmRDbGlwcydcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcblxuICAgIHRoaXMuYXJwZWdnaWF0ZSA9IG9wdGlvbnMuYXJwZWdnaWF0ZTtcbiAgICB0aGlzLmFycGVnZ2lhdGVUaW1lID0gb3B0aW9ucy5hcnBlZ2dpYXRlVGltZTtcbiAgICB0aGlzLnBsYXliYWNrU291bmRDbGlwcyA9IG9wdGlvbnMuY2hvcmRQbGF5YmFja1JhdGVzLm1hcCggcGxheWJhY2tSYXRlID0+IHtcbiAgICAgIGNvbnN0IHNvdW5kQ2xpcCA9IG5ldyBTb3VuZENsaXAoIHNvdW5kLCBtZXJnZSgge1xuICAgICAgICBpbml0aWFsUGxheWJhY2tSYXRlOiBwbGF5YmFja1JhdGVcbiAgICAgIH0sIG9wdGlvbnMuc291bmRDbGlwT3B0aW9ucyApICk7XG4gICAgICBzb3VuZENsaXAuY29ubmVjdCggdGhpcy5zb3VuZFNvdXJjZURlc3RpbmF0aW9uICk7XG4gICAgICByZXR1cm4gc291bmRDbGlwO1xuICAgIH0gKTtcblxuICAgIHRoaXMuaXNQbGF5aW5nUHJvcGVydHkgPSBEZXJpdmVkUHJvcGVydHkub3IoIHRoaXMucGxheWJhY2tTb3VuZENsaXBzLm1hcCggc291bmRDbGlwID0+IHNvdW5kQ2xpcC5pc1BsYXlpbmdQcm9wZXJ0eSApICk7XG4gIH1cblxuICAvKipcbiAgICogUGxheSB0aGUgY2hvcmQuXG4gICAqL1xuICBwdWJsaWMgcGxheSgpOiB2b2lkIHtcbiAgICB0aGlzLnBsYXliYWNrU291bmRDbGlwcy5mb3JFYWNoKCAoIHNvdW5kQ2xpcCwgaW5kZXggKSA9PiB7XG4gICAgICBjb25zdCBkZWxheSA9IHRoaXMuYXJwZWdnaWF0ZSA/IGluZGV4ICogdGhpcy5hcnBlZ2dpYXRlVGltZSAvIHRoaXMucGxheWJhY2tTb3VuZENsaXBzLmxlbmd0aCA6IDA7XG4gICAgICBzb3VuZENsaXAucGxheSggZGVsYXkgKTtcbiAgICB9ICk7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCB0aGUgY2hvcmQgaWYgaXQncyBwbGF5aW5nLiAgVGhpcyBpcyBtb3N0bHkgaGVyZSB0byBjb21wbGV0ZSB0aGUgVFNvdW5kUGxheWVyIGludGVyZmFjZS5cbiAgICovXG4gIHB1YmxpYyBzdG9wKCk6IHZvaWQge1xuICAgIHRoaXMucGxheWJhY2tTb3VuZENsaXBzLmZvckVhY2goIHNvdW5kQ2xpcCA9PiB7XG4gICAgICBzb3VuZENsaXAuc3RvcCgpO1xuICAgIH0gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlIGFueSBtZW1vcnkgcmVmZXJlbmNlcyBpbiBvcmRlciB0byBhdm9pZCBtZW1vcnkgbGVha3MuXG4gICAqL1xuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLnBsYXliYWNrU291bmRDbGlwcy5mb3JFYWNoKCBzb3VuZENsaXAgPT4gc291bmRDbGlwLmRpc3Bvc2UoKSApO1xuICAgIHRoaXMucGxheWJhY2tTb3VuZENsaXBzLmxlbmd0aCA9IDA7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG59XG5cbnRhbWJvLnJlZ2lzdGVyKCAnU291bmRDbGlwQ2hvcmQnLCBTb3VuZENsaXBDaG9yZCApO1xuZXhwb3J0IGRlZmF1bHQgU291bmRDbGlwQ2hvcmQ7Il0sIm5hbWVzIjpbIkRlcml2ZWRQcm9wZXJ0eSIsIm1lcmdlIiwib3B0aW9uaXplIiwiU291bmRDbGlwIiwiU291bmRHZW5lcmF0b3IiLCJ0YW1ibyIsIlNvdW5kQ2xpcENob3JkIiwicGxheSIsInBsYXliYWNrU291bmRDbGlwcyIsImZvckVhY2giLCJzb3VuZENsaXAiLCJpbmRleCIsImRlbGF5IiwiYXJwZWdnaWF0ZSIsImFycGVnZ2lhdGVUaW1lIiwibGVuZ3RoIiwic3RvcCIsImRpc3Bvc2UiLCJzb3VuZCIsInByb3ZpZGVkT3B0aW9ucyIsIm9wdGlvbnMiLCJpbml0aWFsT3V0cHV0TGV2ZWwiLCJzb3VuZENsaXBPcHRpb25zIiwiY2hvcmRQbGF5YmFja1JhdGVzIiwiTWF0aCIsInBvdyIsImFzc2VydCIsImluaXRpYWxQbGF5YmFja1JhdGUiLCJ1bmRlZmluZWQiLCJtYXAiLCJwbGF5YmFja1JhdGUiLCJjb25uZWN0Iiwic291bmRTb3VyY2VEZXN0aW5hdGlvbiIsImlzUGxheWluZ1Byb3BlcnR5Iiwib3IiLCJyZWdpc3RlciJdLCJtYXBwaW5ncyI6IkFBQUEsc0RBQXNEO0FBRXREOzs7O0NBSUMsR0FFRCxPQUFPQSxxQkFBcUIsc0NBQXNDO0FBRWxFLE9BQU9DLFdBQVcsaUNBQWlDO0FBQ25ELE9BQU9DLGVBQWUscUNBQXFDO0FBQzNELE9BQU9DLGVBQXFDLGtEQUFrRDtBQUM5RixPQUFPQyxvQkFBK0MsdURBQXVEO0FBQzdHLE9BQU9DLFdBQVcsY0FBYztBQXNCaEMsSUFBQSxBQUFNQyxpQkFBTixNQUFNQSx1QkFBdUJGO0lBOEMzQjs7R0FFQyxHQUNELEFBQU9HLE9BQWE7UUFDbEIsSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQ0MsT0FBTyxDQUFFLENBQUVDLFdBQVdDO1lBQzVDLE1BQU1DLFFBQVEsSUFBSSxDQUFDQyxVQUFVLEdBQUdGLFFBQVEsSUFBSSxDQUFDRyxjQUFjLEdBQUcsSUFBSSxDQUFDTixrQkFBa0IsQ0FBQ08sTUFBTSxHQUFHO1lBQy9GTCxVQUFVSCxJQUFJLENBQUVLO1FBQ2xCO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELEFBQU9JLE9BQWE7UUFDbEIsSUFBSSxDQUFDUixrQkFBa0IsQ0FBQ0MsT0FBTyxDQUFFQyxDQUFBQTtZQUMvQkEsVUFBVU0sSUFBSTtRQUNoQjtJQUNGO0lBRUE7O0dBRUMsR0FDRCxBQUFnQkMsVUFBZ0I7UUFDOUIsSUFBSSxDQUFDVCxrQkFBa0IsQ0FBQ0MsT0FBTyxDQUFFQyxDQUFBQSxZQUFhQSxVQUFVTyxPQUFPO1FBQy9ELElBQUksQ0FBQ1Qsa0JBQWtCLENBQUNPLE1BQU0sR0FBRztRQUNqQyxLQUFLLENBQUNFO0lBQ1I7SUExREEsWUFBb0JDLEtBQXlCLEVBQUVDLGVBQXVDLENBQUc7UUFFdkYsTUFBTUMsVUFBVWxCLFlBQXdFO1lBQ3RGbUIsb0JBQW9CO1lBQ3BCQyxrQkFBa0I7WUFDbEJULFlBQVk7WUFDWkMsZ0JBQWdCO1lBQ2hCUyxvQkFBb0I7Z0JBQUVDLEtBQUtDLEdBQUcsQ0FBRSxHQUFHLElBQUk7Z0JBQU1ELEtBQUtDLEdBQUcsQ0FBRSxHQUFHLElBQUk7Z0JBQU1ELEtBQUtDLEdBQUcsQ0FBRSxHQUFHLElBQUk7YUFBTSxDQUFDLHlCQUF5QjtRQUN2SCxHQUFHTjtRQUVILElBQUtDLFFBQVFFLGdCQUFnQixFQUFHO1lBQzlCSSxVQUFVQSxPQUNSTixRQUFRRSxnQkFBZ0IsQ0FBQ0ssbUJBQW1CLEtBQUtDLFdBQ2pEO1FBRUo7UUFFQSxLQUFLLENBQUVSO1FBRVAsSUFBSSxDQUFDUCxVQUFVLEdBQUdPLFFBQVFQLFVBQVU7UUFDcEMsSUFBSSxDQUFDQyxjQUFjLEdBQUdNLFFBQVFOLGNBQWM7UUFDNUMsSUFBSSxDQUFDTixrQkFBa0IsR0FBR1ksUUFBUUcsa0JBQWtCLENBQUNNLEdBQUcsQ0FBRUMsQ0FBQUE7WUFDeEQsTUFBTXBCLFlBQVksSUFBSVAsVUFBV2UsT0FBT2pCLE1BQU87Z0JBQzdDMEIscUJBQXFCRztZQUN2QixHQUFHVixRQUFRRSxnQkFBZ0I7WUFDM0JaLFVBQVVxQixPQUFPLENBQUUsSUFBSSxDQUFDQyxzQkFBc0I7WUFDOUMsT0FBT3RCO1FBQ1Q7UUFFQSxJQUFJLENBQUN1QixpQkFBaUIsR0FBR2pDLGdCQUFnQmtDLEVBQUUsQ0FBRSxJQUFJLENBQUMxQixrQkFBa0IsQ0FBQ3FCLEdBQUcsQ0FBRW5CLENBQUFBLFlBQWFBLFVBQVV1QixpQkFBaUI7SUFDcEg7QUE2QkY7QUFFQTVCLE1BQU04QixRQUFRLENBQUUsa0JBQWtCN0I7QUFDbEMsZUFBZUEsZUFBZSJ9