// Copyright 2014-2024, University of Colorado Boulder
/**
 * Base class for button models, which describe the behavior of buttons when users interact with them.  Property values
 * are set by an associated listener, see PressListener for details.
 *
 * @author John Blanco (PhET Interactive Simulations)
 */ import BooleanProperty from '../../../axon/js/BooleanProperty.js';
import Emitter from '../../../axon/js/Emitter.js';
import EnabledComponent from '../../../axon/js/EnabledComponent.js';
import Multilink from '../../../axon/js/Multilink.js';
import optionize, { combineOptions } from '../../../phet-core/js/optionize.js';
import { PressListener } from '../../../scenery/js/imports.js';
import PhetioObject from '../../../tandem/js/PhetioObject.js';
import Tandem from '../../../tandem/js/Tandem.js';
import sun from '../sun.js';
let ButtonModel = class ButtonModel extends EnabledComponent {
    dispose() {
        this.disposeButtonModel();
        super.dispose();
    }
    /**
   * Creates a PressListener that will handle changes to ButtonModel when the associated button Node is pressed.
   * The client is responsible for adding this PressListener to the associated button Node.
   */ createPressListener(options) {
        options = combineOptions({
            canStartPress: ()=>this.enabledProperty.value
        }, options);
        const pressListener = new PressListener(options);
        this.listeners.push(pressListener);
        // Link lazily in case client externally sets downProperty - don't update until the next press.  No unlink needed
        // because the pressListener is local.
        pressListener.isPressedProperty.lazyLink((isPressed)=>{
            // determine interrupted first so listeners on downProperty have access
            this.interrupted = pressListener.interrupted;
            this.downProperty.set(isPressed);
        });
        pressListener.isOverProperty.lazyLink(this.overProperty.set.bind(this.overProperty));
        pressListener.isFocusedProperty.lazyLink(this.focusedProperty.set.bind(this.focusedProperty));
        pressListener.pdomClickingProperty.lazyLink(this.pdomClickingProperty.set.bind(this.pdomClickingProperty));
        // dispose the previous multilink in case we already created a PressListener with this model
        this.looksPressedMultilink && this.looksPressedMultilink.dispose();
        this.looksOverMultilink && this.looksOverMultilink.dispose();
        // the downProperty is included because it can be set externally, looksPressedProperty should update in this case
        const looksPressedProperties = this.listeners.map((listener)=>listener.looksPressedProperty);
        looksPressedProperties.push(this.downProperty);
        // assign a new Multilink (for disposal), and make sure that the button looks pressed when any of the
        // PressListeners created by this ButtonModel look pressed.
        this.looksPressedMultilink = Multilink.multilinkAny(looksPressedProperties, (...args)=>{
            this.looksPressedProperty.value = _.reduce(args, (sum, newValue)=>sum || newValue, false);
        });
        const looksOverProperties = this.listeners.map((listener)=>listener.looksOverProperty);
        // assign a new Multilink (for disposal), and make sure that the button looks over when any of the
        // PressListeners created by this ButtonModel look over. Note that this cannot be an arrow function
        // because its implementation relies on arguments.
        this.looksOverMultilink = Multilink.multilinkAny(looksOverProperties, (...args)=>{
            this.looksOverProperty.value = _.reduce(args, (sum, newValue)=>sum || newValue, false);
        });
        return pressListener;
    }
    constructor(providedOptions){
        const options = optionize()({
            startCallback: _.noop,
            endCallback: _.noop,
            // phet-io
            tandem: Tandem.REQUIRED,
            phetioState: PhetioObject.DEFAULT_OPTIONS.phetioState,
            phetioReadOnly: PhetioObject.DEFAULT_OPTIONS.phetioReadOnly,
            phetioFeatured: PhetioObject.DEFAULT_OPTIONS.phetioFeatured
        }, providedOptions);
        // Set up enabledPropertyOptions for the enabledProperty that the mixin might create
        options.enabledPropertyOptions = combineOptions({
            // phet-io
            phetioState: options.phetioState,
            phetioReadOnly: options.phetioReadOnly,
            phetioDocumentation: 'When disabled, the button is grayed out and cannot be pressed',
            phetioFeatured: true
        }, options.enabledPropertyOptions);
        super(options);
        // model Properties
        this.overProperty = new BooleanProperty(false);
        this.downProperty = new BooleanProperty(false, {
            reentrant: true
        });
        this.pdomClickingProperty = new BooleanProperty(false);
        this.focusedProperty = new BooleanProperty(false);
        this.looksPressedProperty = new BooleanProperty(false);
        this.looksOverProperty = new BooleanProperty(false);
        this.produceSoundEmitter = new Emitter();
        this.interrupted = false;
        this.listeners = [];
        // Links all of the looksPressedProperties from the listeners that were created
        // by this ButtonModel, and updates the looksPressedProperty accordingly. First Multilink is added when the
        // first listener is created. See this.createPressListener.
        this.looksPressedMultilink = null;
        // Links all of the looksOverProperties from the listeners that were created
        // by this ButtonModel, and updates the looksOverProperty accordingly. First Multilink is added when the
        // first listener is created. See this.createPressListener.
        this.looksOverMultilink = null;
        // Call startCallback on pointer down, endCallback on pointer up. Use lazyLink so they aren't called immediately.
        // No unlink needed since this button model owns the Property.
        this.downProperty.lazyLink((down)=>{
            if (down) {
                options.startCallback();
            } else {
                options.endCallback(this.looksOverProperty.get());
            }
        });
        // Interrupt input listeners when enabled is set to false. This is the equivalent of Node.interruptSubtreeInput,
        // but ButtonModel is not a Node, so we have to interrupt each listener. See https://github.com/phetsims/sun/issues/642.
        this.enabledProperty.link((enabled)=>{
            if (!enabled) {
                for(let i = 0; i < this.listeners.length; i++){
                    const listener = this.listeners[i];
                    listener.interrupt && listener.interrupt();
                }
            }
        });
        this.disposeButtonModel = ()=>{
            // This will unlink all listeners, causing potential issues if listeners try to unlink Properties afterwards
            this.overProperty.dispose();
            this.downProperty.dispose();
            this.pdomClickingProperty.dispose();
            this.produceSoundEmitter.dispose();
            this.looksPressedMultilink && this.looksPressedMultilink.dispose();
            this.looksOverMultilink && this.looksOverMultilink.dispose();
            this.listeners = [];
        };
    }
};
export { ButtonModel as default };
sun.register('ButtonModel', ButtonModel);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3N1bi9qcy9idXR0b25zL0J1dHRvbk1vZGVsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjQsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGJ1dHRvbiBtb2RlbHMsIHdoaWNoIGRlc2NyaWJlIHRoZSBiZWhhdmlvciBvZiBidXR0b25zIHdoZW4gdXNlcnMgaW50ZXJhY3Qgd2l0aCB0aGVtLiAgUHJvcGVydHkgdmFsdWVzXG4gKiBhcmUgc2V0IGJ5IGFuIGFzc29jaWF0ZWQgbGlzdGVuZXIsIHNlZSBQcmVzc0xpc3RlbmVyIGZvciBkZXRhaWxzLlxuICpcbiAqIEBhdXRob3IgSm9obiBCbGFuY28gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi9heG9uL2pzL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQgRW1pdHRlciBmcm9tICcuLi8uLi8uLi9heG9uL2pzL0VtaXR0ZXIuanMnO1xuaW1wb3J0IEVuYWJsZWRDb21wb25lbnQsIHsgRW5hYmxlZENvbXBvbmVudE9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9heG9uL2pzL0VuYWJsZWRDb21wb25lbnQuanMnO1xuaW1wb3J0IHsgRW5hYmxlZFByb3BlcnR5T3B0aW9ucyB9IGZyb20gJy4uLy4uLy4uL2F4b24vanMvRW5hYmxlZFByb3BlcnR5LmpzJztcbmltcG9ydCBNdWx0aWxpbmssIHsgVW5rbm93bk11bHRpbGluayB9IGZyb20gJy4uLy4uLy4uL2F4b24vanMvTXVsdGlsaW5rLmpzJztcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuLi8uLi8uLi9heG9uL2pzL1Byb3BlcnR5LmpzJztcbmltcG9ydCBURW1pdHRlciBmcm9tICcuLi8uLi8uLi9heG9uL2pzL1RFbWl0dGVyLmpzJztcbmltcG9ydCBvcHRpb25pemUsIHsgY29tYmluZU9wdGlvbnMgfSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcbmltcG9ydCB7IFByZXNzTGlzdGVuZXIsIFByZXNzTGlzdGVuZXJPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vc2NlbmVyeS9qcy9pbXBvcnRzLmpzJztcbmltcG9ydCBQaGV0aW9PYmplY3QgZnJvbSAnLi4vLi4vLi4vdGFuZGVtL2pzL1BoZXRpb09iamVjdC5qcyc7XG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xuaW1wb3J0IHN1biBmcm9tICcuLi9zdW4uanMnO1xuXG50eXBlIFNlbGZPcHRpb25zID0ge1xuXG4gIC8vIGNhbGxlZCBvbiBwb2ludGVyIGRvd25cbiAgc3RhcnRDYWxsYmFjaz86ICgpID0+IHZvaWQ7XG5cbiAgLy8gY2FsbGVkIG9uIHBvaW50ZXIgdXAsIGluZGljYXRlcyB3aGV0aGVyIHRoZSBwb2ludGVyIHdhcyByZWxlYXNlZCBvdmVyIHRoZSBidXR0b25cbiAgZW5kQ2FsbGJhY2s/OiAoIG92ZXI6IGJvb2xlYW4gKSA9PiB2b2lkO1xuXG4gIC8vIHRvIHN1cHBvcnQgcHJvcGVybHkgcGFzc2luZyB0aGlzIHRvIGNoaWxkcmVuLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3RhbmRlbS9pc3N1ZXMvNjBcbiAgcGhldGlvU3RhdGU/OiBib29sZWFuO1xuXG4gIC8vIHRvIHN1cHBvcnQgcHJvcGVybHkgcGFzc2luZyB0aGlzIHRvIGNoaWxkcmVuLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3RhbmRlbS9pc3N1ZXMvNjBcbiAgcGhldGlvUmVhZE9ubHk/OiBib29sZWFuO1xuXG4gIC8vIHRvIHN1cHBvcnQgcHJvcGVybHkgcGFzc2luZyB0aGlzIHRvIGNoaWxkcmVuLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3RhbmRlbS9pc3N1ZXMvNjBcbiAgcGhldGlvRmVhdHVyZWQ/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgQnV0dG9uTW9kZWxPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBFbmFibGVkQ29tcG9uZW50T3B0aW9ucztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnV0dG9uTW9kZWwgZXh0ZW5kcyBFbmFibGVkQ29tcG9uZW50IHtcblxuICAvLyBJcyB0aGUgcG9pbnRlciBvdmVyIHRoZSBidXR0b24/IFZhbHVlIGlzIHJlYWQtb25seS5cbiAgcHVibGljIHJlYWRvbmx5IG92ZXJQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj47XG5cbiAgLy8gSXMgdGhlIHBvaW50ZXIgZG93bj9cbiAgcHVibGljIHJlYWRvbmx5IGRvd25Qcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj47XG5cbiAgLy8gSXMgdGhlIGJ1dHRvbiBmb2N1c2VkIGZyb20gdGhlIFBET00/XG4gIHB1YmxpYyByZWFkb25seSBmb2N1c2VkUHJvcGVydHk6IFByb3BlcnR5PGJvb2xlYW4+O1xuXG4gIC8vIFRoaXMgUHJvcGVydHkgd2FzIGFkZGVkIGZvciBhMTF5LiBJdCB0cmFja3Mgd2hldGhlciBvciBub3QgdGhlIGJ1dHRvbiBzaG91bGQgXCJsb29rXCIgZG93bi4gVGhpc1xuICAvLyB3aWxsIGJlIHRydWUgaWYgZG93blByb3BlcnR5IGlzIHRydWUgb3IgaWYgYW4gYTExeSBjbGljayBpcyBpbiBwcm9ncmVzcy4gRm9yIGFuIGExMXkgY2xpY2ssIHRoZSBsaXN0ZW5lcnNcbiAgLy8gYXJlIGZpcmVkIHJpZ2h0IGF3YXkgYnV0IHRoZSBidXR0b24gd2lsbCBsb29rIGRvd24gZm9yIGFzIGxvbmcgYXMgUHJlc3NMaXN0ZW5lci5hMTF5TG9va3NQcmVzc2VkSW50ZXJ2YWwuXG4gIC8vIFNlZSBQcmVzc0xpc3RlbmVyLmNsaWNrIGZvciBtb3JlIGRldGFpbHMuXG4gIHB1YmxpYyByZWFkb25seSBsb29rc1ByZXNzZWRQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj47XG5cbiAgLy8gVGhpcyBQcm9wZXJ0eSB3YXMgYWRkZWQgZm9yIGExMXkuIEl0IHRyYWNrcyB3aGV0aGVyIG9yIG5vdCB0aGUgYnV0dG9uIHNob3VsZCBcImxvb2tcIiBvdmVyLiBUaGlzXG4gIC8vIHdpbGwgYmUgdHJ1ZSBpZiBhbmQgUHJlc3NMaXN0ZW5lcnMnIGxvb2tzT3ZlclByb3BlcnR5IGlzIHRydWUsIHNlZSBQcmVzc0xpc3RlbmVyIGZvciB0aGF0IGRlZmluaXRpb24uXG4gIHB1YmxpYyByZWFkb25seSBsb29rc092ZXJQcm9wZXJ0eTogUHJvcGVydHk8Ym9vbGVhbj47XG5cbiAgLy8gVHJ1ZSB3aGVuIHRoZSBidXR0b24gaXMgYmVpbmcgY2xpY2tlZCB2aWEgdGhlIFBET00uIFlvdSBjYW4gdXNlIHRoaXMgUHJvcGVydHkgaWZcbiAgLy8gY3VzdG9tIGJlaGF2aW9yIGlzIG5lZWRlZCB0aGF0IGlzIHNwZWNpZmljIHRvIGFsdGVybmF0aXZlIGlucHV0LlxuICBwdWJsaWMgcmVhZG9ubHkgcGRvbUNsaWNraW5nUHJvcGVydHk6IFByb3BlcnR5PGJvb2xlYW4+O1xuXG4gIC8vIChyZWFkLW9ubHkgYnkgdXNlcnMsIHJlYWQtd3JpdGUgaW4gc3ViY2xhc3NlcykgLSBlbWl0dGVyIHRoYXQgaXMgZmlyZWQgd2hlbiBzb3VuZCBzaG91bGQgYmUgcHJvZHVjZWRcbiAgcHVibGljIHJlYWRvbmx5IHByb2R1Y2VTb3VuZEVtaXR0ZXI6IFRFbWl0dGVyO1xuXG4gIC8vIGluZGljYXRlcyB0aGF0IGludGVyYWN0aW9uIHdhcyBpbnRlcnJ1cHRlZCBkdXJpbmcgYSBwcmVzcy4gVmFsaWQgdW50aWwgbmV4dCBwcmVzcy5cbiAgcHVibGljIGludGVycnVwdGVkOiBib29sZWFuO1xuXG4gIC8vIGtlZXAgdHJhY2sgb2YgYW5kIHN0b3JlIGFsbCBsaXN0ZW5lcnMgdGhpcyBtb2RlbCBjcmVhdGVzXG4gIHByaXZhdGUgbGlzdGVuZXJzOiBQcmVzc0xpc3RlbmVyW107XG5cbiAgLy8gTGlua3MgYWxsIG9mIHRoZSBsb29rc1ByZXNzZWRQcm9wZXJ0aWVzIGZyb20gdGhlIGxpc3RlbmVycyB0aGF0IHdlcmUgY3JlYXRlZFxuICAvLyBieSB0aGlzIEJ1dHRvbk1vZGVsLCBhbmQgdXBkYXRlcyB0aGUgbG9va3NQcmVzc2VkUHJvcGVydHkgYWNjb3JkaW5nbHkuIEZpcnN0IE11bHRpbGluayBpcyBhZGRlZCB3aGVuIHRoZVxuICAvLyBmaXJzdCBsaXN0ZW5lciBpcyBjcmVhdGVkLiBTZWUgdGhpcy5jcmVhdGVQcmVzc0xpc3RlbmVyLlxuICBwcml2YXRlIGxvb2tzUHJlc3NlZE11bHRpbGluazogVW5rbm93bk11bHRpbGluayB8IG51bGw7XG5cbiAgLy8gTGlua3MgYWxsIG9mIHRoZSBsb29rc092ZXJQcm9wZXJ0aWVzIGZyb20gdGhlIGxpc3RlbmVycyB0aGF0IHdlcmUgY3JlYXRlZFxuICAvLyBieSB0aGlzIEJ1dHRvbk1vZGVsLCBhbmQgdXBkYXRlcyB0aGUgbG9va3NPdmVyUHJvcGVydHkgYWNjb3JkaW5nbHkuIEZpcnN0IE11bHRpbGluayBpcyBhZGRlZCB3aGVuIHRoZVxuICAvLyBmaXJzdCBsaXN0ZW5lciBpcyBjcmVhdGVkLiBTZWUgdGhpcy5jcmVhdGVQcmVzc0xpc3RlbmVyLlxuICBwcml2YXRlIGxvb2tzT3Zlck11bHRpbGluazogVW5rbm93bk11bHRpbGluayB8IG51bGw7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBkaXNwb3NlQnV0dG9uTW9kZWw6ICgpID0+IHZvaWQ7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBwcm92aWRlZE9wdGlvbnM/OiBCdXR0b25Nb2RlbE9wdGlvbnMgKSB7XG5cbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPEJ1dHRvbk1vZGVsT3B0aW9ucywgU2VsZk9wdGlvbnMsIEVuYWJsZWRDb21wb25lbnRPcHRpb25zPigpKCB7XG4gICAgICBzdGFydENhbGxiYWNrOiBfLm5vb3AsXG4gICAgICBlbmRDYWxsYmFjazogXy5ub29wLFxuXG4gICAgICAvLyBwaGV0LWlvXG4gICAgICB0YW5kZW06IFRhbmRlbS5SRVFVSVJFRCxcbiAgICAgIHBoZXRpb1N0YXRlOiBQaGV0aW9PYmplY3QuREVGQVVMVF9PUFRJT05TLnBoZXRpb1N0YXRlLFxuICAgICAgcGhldGlvUmVhZE9ubHk6IFBoZXRpb09iamVjdC5ERUZBVUxUX09QVElPTlMucGhldGlvUmVhZE9ubHksXG4gICAgICBwaGV0aW9GZWF0dXJlZDogUGhldGlvT2JqZWN0LkRFRkFVTFRfT1BUSU9OUy5waGV0aW9GZWF0dXJlZFxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xuXG4gICAgLy8gU2V0IHVwIGVuYWJsZWRQcm9wZXJ0eU9wdGlvbnMgZm9yIHRoZSBlbmFibGVkUHJvcGVydHkgdGhhdCB0aGUgbWl4aW4gbWlnaHQgY3JlYXRlXG4gICAgb3B0aW9ucy5lbmFibGVkUHJvcGVydHlPcHRpb25zID0gY29tYmluZU9wdGlvbnM8RW5hYmxlZFByb3BlcnR5T3B0aW9ucz4oIHtcblxuICAgICAgLy8gcGhldC1pb1xuICAgICAgcGhldGlvU3RhdGU6IG9wdGlvbnMucGhldGlvU3RhdGUsXG4gICAgICBwaGV0aW9SZWFkT25seTogb3B0aW9ucy5waGV0aW9SZWFkT25seSxcbiAgICAgIHBoZXRpb0RvY3VtZW50YXRpb246ICdXaGVuIGRpc2FibGVkLCB0aGUgYnV0dG9uIGlzIGdyYXllZCBvdXQgYW5kIGNhbm5vdCBiZSBwcmVzc2VkJyxcbiAgICAgIHBoZXRpb0ZlYXR1cmVkOiB0cnVlXG4gICAgfSwgb3B0aW9ucy5lbmFibGVkUHJvcGVydHlPcHRpb25zISApO1xuXG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcblxuICAgIC8vIG1vZGVsIFByb3BlcnRpZXNcbiAgICB0aGlzLm92ZXJQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIGZhbHNlICk7XG4gICAgdGhpcy5kb3duUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSwgeyByZWVudHJhbnQ6IHRydWUgfSApO1xuICAgIHRoaXMucGRvbUNsaWNraW5nUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSApO1xuICAgIHRoaXMuZm9jdXNlZFByb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSggZmFsc2UgKTtcbiAgICB0aGlzLmxvb2tzUHJlc3NlZFByb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSggZmFsc2UgKTtcbiAgICB0aGlzLmxvb2tzT3ZlclByb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSggZmFsc2UgKTtcblxuICAgIHRoaXMucHJvZHVjZVNvdW5kRW1pdHRlciA9IG5ldyBFbWl0dGVyKCk7XG4gICAgdGhpcy5pbnRlcnJ1cHRlZCA9IGZhbHNlO1xuICAgIHRoaXMubGlzdGVuZXJzID0gW107XG5cbiAgICAvLyBMaW5rcyBhbGwgb2YgdGhlIGxvb2tzUHJlc3NlZFByb3BlcnRpZXMgZnJvbSB0aGUgbGlzdGVuZXJzIHRoYXQgd2VyZSBjcmVhdGVkXG4gICAgLy8gYnkgdGhpcyBCdXR0b25Nb2RlbCwgYW5kIHVwZGF0ZXMgdGhlIGxvb2tzUHJlc3NlZFByb3BlcnR5IGFjY29yZGluZ2x5LiBGaXJzdCBNdWx0aWxpbmsgaXMgYWRkZWQgd2hlbiB0aGVcbiAgICAvLyBmaXJzdCBsaXN0ZW5lciBpcyBjcmVhdGVkLiBTZWUgdGhpcy5jcmVhdGVQcmVzc0xpc3RlbmVyLlxuICAgIHRoaXMubG9va3NQcmVzc2VkTXVsdGlsaW5rID0gbnVsbDtcblxuICAgIC8vIExpbmtzIGFsbCBvZiB0aGUgbG9va3NPdmVyUHJvcGVydGllcyBmcm9tIHRoZSBsaXN0ZW5lcnMgdGhhdCB3ZXJlIGNyZWF0ZWRcbiAgICAvLyBieSB0aGlzIEJ1dHRvbk1vZGVsLCBhbmQgdXBkYXRlcyB0aGUgbG9va3NPdmVyUHJvcGVydHkgYWNjb3JkaW5nbHkuIEZpcnN0IE11bHRpbGluayBpcyBhZGRlZCB3aGVuIHRoZVxuICAgIC8vIGZpcnN0IGxpc3RlbmVyIGlzIGNyZWF0ZWQuIFNlZSB0aGlzLmNyZWF0ZVByZXNzTGlzdGVuZXIuXG4gICAgdGhpcy5sb29rc092ZXJNdWx0aWxpbmsgPSBudWxsO1xuXG4gICAgLy8gQ2FsbCBzdGFydENhbGxiYWNrIG9uIHBvaW50ZXIgZG93biwgZW5kQ2FsbGJhY2sgb24gcG9pbnRlciB1cC4gVXNlIGxhenlMaW5rIHNvIHRoZXkgYXJlbid0IGNhbGxlZCBpbW1lZGlhdGVseS5cbiAgICAvLyBObyB1bmxpbmsgbmVlZGVkIHNpbmNlIHRoaXMgYnV0dG9uIG1vZGVsIG93bnMgdGhlIFByb3BlcnR5LlxuICAgIHRoaXMuZG93blByb3BlcnR5LmxhenlMaW5rKCBkb3duID0+IHtcbiAgICAgIGlmICggZG93biApIHtcbiAgICAgICAgb3B0aW9ucy5zdGFydENhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgb3B0aW9ucy5lbmRDYWxsYmFjayggdGhpcy5sb29rc092ZXJQcm9wZXJ0eS5nZXQoKSApO1xuICAgICAgfVxuICAgIH0gKTtcblxuICAgIC8vIEludGVycnVwdCBpbnB1dCBsaXN0ZW5lcnMgd2hlbiBlbmFibGVkIGlzIHNldCB0byBmYWxzZS4gVGhpcyBpcyB0aGUgZXF1aXZhbGVudCBvZiBOb2RlLmludGVycnVwdFN1YnRyZWVJbnB1dCxcbiAgICAvLyBidXQgQnV0dG9uTW9kZWwgaXMgbm90IGEgTm9kZSwgc28gd2UgaGF2ZSB0byBpbnRlcnJ1cHQgZWFjaCBsaXN0ZW5lci4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9zdW4vaXNzdWVzLzY0Mi5cbiAgICB0aGlzLmVuYWJsZWRQcm9wZXJ0eS5saW5rKCBlbmFibGVkID0+IHtcbiAgICAgIGlmICggIWVuYWJsZWQgKSB7XG4gICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMubGlzdGVuZXJzLmxlbmd0aDsgaSsrICkge1xuICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gdGhpcy5saXN0ZW5lcnNbIGkgXTtcbiAgICAgICAgICBsaXN0ZW5lci5pbnRlcnJ1cHQgJiYgbGlzdGVuZXIuaW50ZXJydXB0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9ICk7XG5cbiAgICB0aGlzLmRpc3Bvc2VCdXR0b25Nb2RlbCA9ICgpID0+IHtcblxuICAgICAgLy8gVGhpcyB3aWxsIHVubGluayBhbGwgbGlzdGVuZXJzLCBjYXVzaW5nIHBvdGVudGlhbCBpc3N1ZXMgaWYgbGlzdGVuZXJzIHRyeSB0byB1bmxpbmsgUHJvcGVydGllcyBhZnRlcndhcmRzXG4gICAgICB0aGlzLm92ZXJQcm9wZXJ0eS5kaXNwb3NlKCk7XG4gICAgICB0aGlzLmRvd25Qcm9wZXJ0eS5kaXNwb3NlKCk7XG4gICAgICB0aGlzLnBkb21DbGlja2luZ1Byb3BlcnR5LmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMucHJvZHVjZVNvdW5kRW1pdHRlci5kaXNwb3NlKCk7XG5cbiAgICAgIHRoaXMubG9va3NQcmVzc2VkTXVsdGlsaW5rICYmIHRoaXMubG9va3NQcmVzc2VkTXVsdGlsaW5rLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMubG9va3NPdmVyTXVsdGlsaW5rICYmIHRoaXMubG9va3NPdmVyTXVsdGlsaW5rLmRpc3Bvc2UoKTtcblxuICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5kaXNwb3NlQnV0dG9uTW9kZWwoKTtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIFByZXNzTGlzdGVuZXIgdGhhdCB3aWxsIGhhbmRsZSBjaGFuZ2VzIHRvIEJ1dHRvbk1vZGVsIHdoZW4gdGhlIGFzc29jaWF0ZWQgYnV0dG9uIE5vZGUgaXMgcHJlc3NlZC5cbiAgICogVGhlIGNsaWVudCBpcyByZXNwb25zaWJsZSBmb3IgYWRkaW5nIHRoaXMgUHJlc3NMaXN0ZW5lciB0byB0aGUgYXNzb2NpYXRlZCBidXR0b24gTm9kZS5cbiAgICovXG4gIHB1YmxpYyBjcmVhdGVQcmVzc0xpc3RlbmVyKCBvcHRpb25zPzogUHJlc3NMaXN0ZW5lck9wdGlvbnMgKTogUHJlc3NMaXN0ZW5lciB7XG5cbiAgICBvcHRpb25zID0gY29tYmluZU9wdGlvbnM8UHJlc3NMaXN0ZW5lck9wdGlvbnM+KCB7XG4gICAgICBjYW5TdGFydFByZXNzOiAoKSA9PiB0aGlzLmVuYWJsZWRQcm9wZXJ0eS52YWx1ZVxuICAgIH0sIG9wdGlvbnMgKTtcblxuICAgIGNvbnN0IHByZXNzTGlzdGVuZXIgPSBuZXcgUHJlc3NMaXN0ZW5lciggb3B0aW9ucyApO1xuICAgIHRoaXMubGlzdGVuZXJzLnB1c2goIHByZXNzTGlzdGVuZXIgKTtcblxuICAgIC8vIExpbmsgbGF6aWx5IGluIGNhc2UgY2xpZW50IGV4dGVybmFsbHkgc2V0cyBkb3duUHJvcGVydHkgLSBkb24ndCB1cGRhdGUgdW50aWwgdGhlIG5leHQgcHJlc3MuICBObyB1bmxpbmsgbmVlZGVkXG4gICAgLy8gYmVjYXVzZSB0aGUgcHJlc3NMaXN0ZW5lciBpcyBsb2NhbC5cbiAgICBwcmVzc0xpc3RlbmVyLmlzUHJlc3NlZFByb3BlcnR5LmxhenlMaW5rKCBpc1ByZXNzZWQgPT4ge1xuXG4gICAgICAvLyBkZXRlcm1pbmUgaW50ZXJydXB0ZWQgZmlyc3Qgc28gbGlzdGVuZXJzIG9uIGRvd25Qcm9wZXJ0eSBoYXZlIGFjY2Vzc1xuICAgICAgdGhpcy5pbnRlcnJ1cHRlZCA9IHByZXNzTGlzdGVuZXIuaW50ZXJydXB0ZWQ7XG4gICAgICB0aGlzLmRvd25Qcm9wZXJ0eS5zZXQoIGlzUHJlc3NlZCApO1xuICAgIH0gKTtcbiAgICBwcmVzc0xpc3RlbmVyLmlzT3ZlclByb3BlcnR5LmxhenlMaW5rKCB0aGlzLm92ZXJQcm9wZXJ0eS5zZXQuYmluZCggdGhpcy5vdmVyUHJvcGVydHkgKSApO1xuICAgIHByZXNzTGlzdGVuZXIuaXNGb2N1c2VkUHJvcGVydHkubGF6eUxpbmsoIHRoaXMuZm9jdXNlZFByb3BlcnR5LnNldC5iaW5kKCB0aGlzLmZvY3VzZWRQcm9wZXJ0eSApICk7XG4gICAgcHJlc3NMaXN0ZW5lci5wZG9tQ2xpY2tpbmdQcm9wZXJ0eS5sYXp5TGluayggdGhpcy5wZG9tQ2xpY2tpbmdQcm9wZXJ0eS5zZXQuYmluZCggdGhpcy5wZG9tQ2xpY2tpbmdQcm9wZXJ0eSApICk7XG5cbiAgICAvLyBkaXNwb3NlIHRoZSBwcmV2aW91cyBtdWx0aWxpbmsgaW4gY2FzZSB3ZSBhbHJlYWR5IGNyZWF0ZWQgYSBQcmVzc0xpc3RlbmVyIHdpdGggdGhpcyBtb2RlbFxuICAgIHRoaXMubG9va3NQcmVzc2VkTXVsdGlsaW5rICYmIHRoaXMubG9va3NQcmVzc2VkTXVsdGlsaW5rLmRpc3Bvc2UoKTtcbiAgICB0aGlzLmxvb2tzT3Zlck11bHRpbGluayAmJiB0aGlzLmxvb2tzT3Zlck11bHRpbGluay5kaXNwb3NlKCk7XG5cbiAgICAvLyB0aGUgZG93blByb3BlcnR5IGlzIGluY2x1ZGVkIGJlY2F1c2UgaXQgY2FuIGJlIHNldCBleHRlcm5hbGx5LCBsb29rc1ByZXNzZWRQcm9wZXJ0eSBzaG91bGQgdXBkYXRlIGluIHRoaXMgY2FzZVxuICAgIGNvbnN0IGxvb2tzUHJlc3NlZFByb3BlcnRpZXMgPSB0aGlzLmxpc3RlbmVycy5tYXAoIGxpc3RlbmVyID0+IGxpc3RlbmVyLmxvb2tzUHJlc3NlZFByb3BlcnR5ICk7XG4gICAgbG9va3NQcmVzc2VkUHJvcGVydGllcy5wdXNoKCB0aGlzLmRvd25Qcm9wZXJ0eSApO1xuXG4gICAgLy8gYXNzaWduIGEgbmV3IE11bHRpbGluayAoZm9yIGRpc3Bvc2FsKSwgYW5kIG1ha2Ugc3VyZSB0aGF0IHRoZSBidXR0b24gbG9va3MgcHJlc3NlZCB3aGVuIGFueSBvZiB0aGVcbiAgICAvLyBQcmVzc0xpc3RlbmVycyBjcmVhdGVkIGJ5IHRoaXMgQnV0dG9uTW9kZWwgbG9vayBwcmVzc2VkLlxuICAgIHRoaXMubG9va3NQcmVzc2VkTXVsdGlsaW5rID0gTXVsdGlsaW5rLm11bHRpbGlua0FueSggbG9va3NQcmVzc2VkUHJvcGVydGllcywgKCAuLi5hcmdzOiBib29sZWFuW10gKSA9PiB7XG4gICAgICB0aGlzLmxvb2tzUHJlc3NlZFByb3BlcnR5LnZhbHVlID0gXy5yZWR1Y2UoIGFyZ3MsICggc3VtOiBib29sZWFuLCBuZXdWYWx1ZTogYm9vbGVhbiApID0+IHN1bSB8fCBuZXdWYWx1ZSwgZmFsc2UgKTtcbiAgICB9ICk7XG5cbiAgICBjb25zdCBsb29rc092ZXJQcm9wZXJ0aWVzID0gdGhpcy5saXN0ZW5lcnMubWFwKCBsaXN0ZW5lciA9PiBsaXN0ZW5lci5sb29rc092ZXJQcm9wZXJ0eSApO1xuXG4gICAgLy8gYXNzaWduIGEgbmV3IE11bHRpbGluayAoZm9yIGRpc3Bvc2FsKSwgYW5kIG1ha2Ugc3VyZSB0aGF0IHRoZSBidXR0b24gbG9va3Mgb3ZlciB3aGVuIGFueSBvZiB0aGVcbiAgICAvLyBQcmVzc0xpc3RlbmVycyBjcmVhdGVkIGJ5IHRoaXMgQnV0dG9uTW9kZWwgbG9vayBvdmVyLiBOb3RlIHRoYXQgdGhpcyBjYW5ub3QgYmUgYW4gYXJyb3cgZnVuY3Rpb25cbiAgICAvLyBiZWNhdXNlIGl0cyBpbXBsZW1lbnRhdGlvbiByZWxpZXMgb24gYXJndW1lbnRzLlxuICAgIHRoaXMubG9va3NPdmVyTXVsdGlsaW5rID0gTXVsdGlsaW5rLm11bHRpbGlua0FueSggbG9va3NPdmVyUHJvcGVydGllcywgKCAuLi5hcmdzOiBib29sZWFuW10gKSA9PiB7XG4gICAgICB0aGlzLmxvb2tzT3ZlclByb3BlcnR5LnZhbHVlID0gXy5yZWR1Y2UoIGFyZ3MsICggc3VtOiBib29sZWFuLCBuZXdWYWx1ZTogYm9vbGVhbiApID0+IHN1bSB8fCBuZXdWYWx1ZSwgZmFsc2UgKTtcbiAgICB9ICk7XG5cbiAgICByZXR1cm4gcHJlc3NMaXN0ZW5lcjtcbiAgfVxufVxuXG5zdW4ucmVnaXN0ZXIoICdCdXR0b25Nb2RlbCcsIEJ1dHRvbk1vZGVsICk7Il0sIm5hbWVzIjpbIkJvb2xlYW5Qcm9wZXJ0eSIsIkVtaXR0ZXIiLCJFbmFibGVkQ29tcG9uZW50IiwiTXVsdGlsaW5rIiwib3B0aW9uaXplIiwiY29tYmluZU9wdGlvbnMiLCJQcmVzc0xpc3RlbmVyIiwiUGhldGlvT2JqZWN0IiwiVGFuZGVtIiwic3VuIiwiQnV0dG9uTW9kZWwiLCJkaXNwb3NlIiwiZGlzcG9zZUJ1dHRvbk1vZGVsIiwiY3JlYXRlUHJlc3NMaXN0ZW5lciIsIm9wdGlvbnMiLCJjYW5TdGFydFByZXNzIiwiZW5hYmxlZFByb3BlcnR5IiwidmFsdWUiLCJwcmVzc0xpc3RlbmVyIiwibGlzdGVuZXJzIiwicHVzaCIsImlzUHJlc3NlZFByb3BlcnR5IiwibGF6eUxpbmsiLCJpc1ByZXNzZWQiLCJpbnRlcnJ1cHRlZCIsImRvd25Qcm9wZXJ0eSIsInNldCIsImlzT3ZlclByb3BlcnR5Iiwib3ZlclByb3BlcnR5IiwiYmluZCIsImlzRm9jdXNlZFByb3BlcnR5IiwiZm9jdXNlZFByb3BlcnR5IiwicGRvbUNsaWNraW5nUHJvcGVydHkiLCJsb29rc1ByZXNzZWRNdWx0aWxpbmsiLCJsb29rc092ZXJNdWx0aWxpbmsiLCJsb29rc1ByZXNzZWRQcm9wZXJ0aWVzIiwibWFwIiwibGlzdGVuZXIiLCJsb29rc1ByZXNzZWRQcm9wZXJ0eSIsIm11bHRpbGlua0FueSIsImFyZ3MiLCJfIiwicmVkdWNlIiwic3VtIiwibmV3VmFsdWUiLCJsb29rc092ZXJQcm9wZXJ0aWVzIiwibG9va3NPdmVyUHJvcGVydHkiLCJwcm92aWRlZE9wdGlvbnMiLCJzdGFydENhbGxiYWNrIiwibm9vcCIsImVuZENhbGxiYWNrIiwidGFuZGVtIiwiUkVRVUlSRUQiLCJwaGV0aW9TdGF0ZSIsIkRFRkFVTFRfT1BUSU9OUyIsInBoZXRpb1JlYWRPbmx5IiwicGhldGlvRmVhdHVyZWQiLCJlbmFibGVkUHJvcGVydHlPcHRpb25zIiwicGhldGlvRG9jdW1lbnRhdGlvbiIsInJlZW50cmFudCIsInByb2R1Y2VTb3VuZEVtaXR0ZXIiLCJkb3duIiwiZ2V0IiwibGluayIsImVuYWJsZWQiLCJpIiwibGVuZ3RoIiwiaW50ZXJydXB0IiwicmVnaXN0ZXIiXSwibWFwcGluZ3MiOiJBQUFB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