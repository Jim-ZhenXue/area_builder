// Copyright 2020-2024, University of Colorado Boulder
/**
 * Tests for PropertyStateHandler.js
 *
 * @author Michael Kauzmann (PhET Interactive Simulations)
 * @author Chris Klusendorf (PhET Interactive Simulations)
 */ import Range from '../../dot/js/Range.js';
import Tandem from '../../tandem/js/Tandem.js';
import BooleanProperty from './BooleanProperty.js';
import NumberProperty from './NumberProperty.js';
import Property from './Property.js';
import PropertyStateHandler, { propertyStateHandlerSingleton } from './PropertyStateHandler.js';
import PropertyStatePhase from './PropertyStatePhase.js';
QUnit.module('PropertyStateHandler');
// These tests run only in brand=phet-io
if (Tandem.PHET_IO_ENABLED) {
    QUnit.test('Register and unregister order dependency within state engine', (assert)=>{
        window.assert && window.assert(_.hasIn(window, 'phet.phetio.PhetioStateEngine'), 'state engine expected for this test');
        const propertyStateHandler = new PropertyStateHandler();
        assert.ok(!propertyStateHandler['initialized'], 'started not initialized');
        const phetioStateEngine = new phet.phetio.PhetioStateEngine(phet.phetio.phetioEngine, {
            propertyStateHandler: propertyStateHandler
        });
        assert.ok(propertyStateHandler['initialized'], 'should be initialized by phetioStateEngine');
        assert.ok(phetioStateEngine, 'to avoid eslint no new as side-effects');
        const aProperty = new BooleanProperty(false, {
            tandem: Tandem.ROOT_TEST.createTandem('aProperty')
        });
        const bProperty = new BooleanProperty(true, {
            tandem: Tandem.ROOT_TEST.createTandem('bProperty')
        });
        const cProperty = new BooleanProperty(false, {
            tandem: Tandem.ROOT_TEST.createTandem('cProperty')
        });
        const originalOrderDependencyLength = propertyStateHandler.getNumberOfOrderDependencies();
        const getOrderDependencyLength = ()=>propertyStateHandler.getNumberOfOrderDependencies() - originalOrderDependencyLength;
        propertyStateHandler.registerPhetioOrderDependency(aProperty, PropertyStatePhase.UNDEFER, bProperty, PropertyStatePhase.NOTIFY);
        assert.ok(getOrderDependencyLength() === 1, 'one expected');
        propertyStateHandler.registerPhetioOrderDependency(aProperty, PropertyStatePhase.UNDEFER, cProperty, PropertyStatePhase.NOTIFY);
        assert.ok(getOrderDependencyLength() === 2, 'two expected');
        propertyStateHandler.registerPhetioOrderDependency(bProperty, PropertyStatePhase.UNDEFER, cProperty, PropertyStatePhase.NOTIFY);
        assert.ok(getOrderDependencyLength() === 3, 'three expected');
        propertyStateHandler.unregisterOrderDependenciesForProperty(aProperty);
        assert.ok(getOrderDependencyLength() === 1, 'a was in two');
        propertyStateHandler.unregisterOrderDependenciesForProperty(bProperty);
        assert.ok(getOrderDependencyLength() === 0, 'none now');
        propertyStateHandler.registerPhetioOrderDependency(aProperty, PropertyStatePhase.UNDEFER, cProperty, PropertyStatePhase.NOTIFY);
        propertyStateHandler.registerPhetioOrderDependency(bProperty, PropertyStatePhase.UNDEFER, cProperty, PropertyStatePhase.NOTIFY);
        assert.ok(getOrderDependencyLength() === 2, 'none now');
        propertyStateHandler.unregisterOrderDependenciesForProperty(cProperty);
        assert.ok(getOrderDependencyLength() === 0, 'none now');
        aProperty.dispose();
        bProperty.dispose();
        cProperty.dispose();
        if (window.assert) {
            const uninstrumentedProperty = new Property(2);
            const instrumentedProperty = new BooleanProperty(false, {
                tandem: Tandem.ROOT_TEST.createTandem('instrumentedProperty')
            });
            assert.throws(()=>{
                propertyStateHandler.registerPhetioOrderDependency(uninstrumentedProperty, PropertyStatePhase.UNDEFER, instrumentedProperty, PropertyStatePhase.UNDEFER);
            }, 'cannot register with an uninstrumented Property');
            assert.throws(()=>{
                propertyStateHandler.registerPhetioOrderDependency(instrumentedProperty, PropertyStatePhase.UNDEFER, instrumentedProperty, PropertyStatePhase.UNDEFER);
            }, 'same Property same phase. . . . no no.');
        }
    });
    QUnit.test('Order dependency between NumberProperty and its Range', (assert)=>{
        assert.ok(true, 'always pass');
        const rangeProperty = new Property(new Range(0, 1), {
            tandem: Tandem.ROOT_TEST.createTandem('rangeProperty'),
            phetioDynamicElement: true,
            phetioValueType: Range.RangeIO
        });
        const numberProperty = new NumberProperty(0, {
            tandem: Tandem.ROOT_TEST.createTandem('numberProperty'),
            phetioDynamicElement: true,
            range: rangeProperty
        });
        const randomDependencyProperty = new BooleanProperty(false, {
            tandem: Tandem.ROOT_TEST.createTandem('randomDependencyProperty'),
            phetioDynamicElement: true
        });
        // This extra order dependency means that numberProperty won't be deferred as eagerly as rangeProperty.
        // NumberProperty should still handle this case for state without erroring validation.
        propertyStateHandlerSingleton.registerPhetioOrderDependency(randomDependencyProperty, PropertyStatePhase.UNDEFER, numberProperty, PropertyStatePhase.UNDEFER);
        const serializedValue = NumberProperty.NumberPropertyIO.toStateObject(numberProperty);
        serializedValue.range.min = 4;
        serializedValue.range.max = 8;
        serializedValue['value'] = 7;
        phet.phetio.phetioEngine.phetioStateEngine.setState({
            'axon.test.numberProperty': serializedValue,
            'axon.test.randomDependencyProperty': {
                value: true,
                validValues: null,
                units: null
            },
            'axon.test.rangeProperty': {
                value: {
                    min: 4,
                    max: 8
                },
                validValues: null,
                units: null
            }
        }, Tandem.ROOT_TEST);
        rangeProperty.dispose();
        numberProperty.dispose();
        randomDependencyProperty.dispose();
    });
    QUnit.test('unregistering clears out the array', (assert)=>{
        assert.ok(true, 'always pass');
        const propertyStateHandler = new PropertyStateHandler();
        assert.ok(!propertyStateHandler['initialized'], 'started not initialized');
        const phetioStateEngine = new phet.phetio.PhetioStateEngine(phet.phetio.phetioEngine, {
            propertyStateHandler: propertyStateHandler
        });
        assert.ok(phetioStateEngine, 'to avoid eslint no new as side-effects');
        const aProperty = new BooleanProperty(false, {
            tandem: Tandem.ROOT_TEST.createTandem('aProperty')
        });
        const bProperty = new BooleanProperty(true, {
            tandem: Tandem.ROOT_TEST.createTandem('bProperty')
        });
        const cProperty = new BooleanProperty(false, {
            tandem: Tandem.ROOT_TEST.createTandem('cProperty')
        });
        propertyStateHandler.registerPhetioOrderDependency(aProperty, PropertyStatePhase.UNDEFER, bProperty, PropertyStatePhase.NOTIFY);
        propertyStateHandler.unregisterOrderDependenciesForProperty(bProperty);
        assert.ok(propertyStateHandler['undeferBeforeNotifyMapPair'].beforeMap.size === 0, 'empty entries should be cleared');
        propertyStateHandler.registerPhetioOrderDependency(aProperty, PropertyStatePhase.UNDEFER, bProperty, PropertyStatePhase.NOTIFY);
        propertyStateHandler.registerPhetioOrderDependency(aProperty, PropertyStatePhase.UNDEFER, cProperty, PropertyStatePhase.NOTIFY);
        propertyStateHandler.unregisterOrderDependenciesForProperty(aProperty);
        assert.ok(propertyStateHandler['undeferBeforeNotifyMapPair'].beforeMap.size === 0, 'empty entries should be cleared');
        propertyStateHandler.registerPhetioOrderDependency(aProperty, PropertyStatePhase.UNDEFER, bProperty, PropertyStatePhase.NOTIFY);
        propertyStateHandler.registerPhetioOrderDependency(aProperty, PropertyStatePhase.UNDEFER, cProperty, PropertyStatePhase.NOTIFY);
        propertyStateHandler.unregisterOrderDependenciesForProperty(bProperty);
        propertyStateHandler.unregisterOrderDependenciesForProperty(cProperty);
        assert.ok(propertyStateHandler['undeferBeforeNotifyMapPair'].beforeMap.size === 0, 'empty entries should be cleared');
        aProperty.dispose();
        bProperty.dispose();
        cProperty.dispose();
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2F4b24vanMvUHJvcGVydHlTdGF0ZUhhbmRsZXJUZXN0cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDI0LCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBUZXN0cyBmb3IgUHJvcGVydHlTdGF0ZUhhbmRsZXIuanNcbiAqXG4gKiBAYXV0aG9yIE1pY2hhZWwgS2F1em1hbm4gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKiBAYXV0aG9yIENocmlzIEtsdXNlbmRvcmYgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IFJhbmdlIGZyb20gJy4uLy4uL2RvdC9qcy9SYW5nZS5qcyc7XG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xuaW1wb3J0IEJvb2xlYW5Qcm9wZXJ0eSBmcm9tICcuL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQgTnVtYmVyUHJvcGVydHkgZnJvbSAnLi9OdW1iZXJQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQgUHJvcGVydHlTdGF0ZUhhbmRsZXIsIHsgcHJvcGVydHlTdGF0ZUhhbmRsZXJTaW5nbGV0b24gfSBmcm9tICcuL1Byb3BlcnR5U3RhdGVIYW5kbGVyLmpzJztcbmltcG9ydCBQcm9wZXJ0eVN0YXRlUGhhc2UgZnJvbSAnLi9Qcm9wZXJ0eVN0YXRlUGhhc2UuanMnO1xuXG5RVW5pdC5tb2R1bGUoICdQcm9wZXJ0eVN0YXRlSGFuZGxlcicgKTtcblxuLy8gVGhlc2UgdGVzdHMgcnVuIG9ubHkgaW4gYnJhbmQ9cGhldC1pb1xuaWYgKCBUYW5kZW0uUEhFVF9JT19FTkFCTEVEICkge1xuXG4gIFFVbml0LnRlc3QoICdSZWdpc3RlciBhbmQgdW5yZWdpc3RlciBvcmRlciBkZXBlbmRlbmN5IHdpdGhpbiBzdGF0ZSBlbmdpbmUnLCBhc3NlcnQgPT4ge1xuICAgIHdpbmRvdy5hc3NlcnQgJiYgd2luZG93LmFzc2VydCggXy5oYXNJbiggd2luZG93LCAncGhldC5waGV0aW8uUGhldGlvU3RhdGVFbmdpbmUnICksICdzdGF0ZSBlbmdpbmUgZXhwZWN0ZWQgZm9yIHRoaXMgdGVzdCcgKTtcblxuICAgIGNvbnN0IHByb3BlcnR5U3RhdGVIYW5kbGVyID0gbmV3IFByb3BlcnR5U3RhdGVIYW5kbGVyKCk7XG4gICAgYXNzZXJ0Lm9rKCAhcHJvcGVydHlTdGF0ZUhhbmRsZXJbICdpbml0aWFsaXplZCcgXSwgJ3N0YXJ0ZWQgbm90IGluaXRpYWxpemVkJyApO1xuICAgIGNvbnN0IHBoZXRpb1N0YXRlRW5naW5lID0gbmV3IHBoZXQucGhldGlvLlBoZXRpb1N0YXRlRW5naW5lKCBwaGV0LnBoZXRpby5waGV0aW9FbmdpbmUsIHtcbiAgICAgIHByb3BlcnR5U3RhdGVIYW5kbGVyOiBwcm9wZXJ0eVN0YXRlSGFuZGxlclxuICAgIH0gKTtcblxuICAgIGFzc2VydC5vayggcHJvcGVydHlTdGF0ZUhhbmRsZXJbICdpbml0aWFsaXplZCcgXSwgJ3Nob3VsZCBiZSBpbml0aWFsaXplZCBieSBwaGV0aW9TdGF0ZUVuZ2luZScgKTtcblxuICAgIGFzc2VydC5vayggcGhldGlvU3RhdGVFbmdpbmUsICd0byBhdm9pZCBlc2xpbnQgbm8gbmV3IGFzIHNpZGUtZWZmZWN0cycgKTtcblxuICAgIGNvbnN0IGFQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIGZhbHNlLCB7XG4gICAgICB0YW5kZW06IFRhbmRlbS5ST09UX1RFU1QuY3JlYXRlVGFuZGVtKCAnYVByb3BlcnR5JyApXG4gICAgfSApO1xuICAgIGNvbnN0IGJQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIHRydWUsIHtcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJPT1RfVEVTVC5jcmVhdGVUYW5kZW0oICdiUHJvcGVydHknIClcbiAgICB9ICk7XG4gICAgY29uc3QgY1Byb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSggZmFsc2UsIHtcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJPT1RfVEVTVC5jcmVhdGVUYW5kZW0oICdjUHJvcGVydHknIClcbiAgICB9ICk7XG5cbiAgICBjb25zdCBvcmlnaW5hbE9yZGVyRGVwZW5kZW5jeUxlbmd0aCA9IHByb3BlcnR5U3RhdGVIYW5kbGVyLmdldE51bWJlck9mT3JkZXJEZXBlbmRlbmNpZXMoKTtcbiAgICBjb25zdCBnZXRPcmRlckRlcGVuZGVuY3lMZW5ndGggPSAoKSA9PiBwcm9wZXJ0eVN0YXRlSGFuZGxlci5nZXROdW1iZXJPZk9yZGVyRGVwZW5kZW5jaWVzKCkgLSBvcmlnaW5hbE9yZGVyRGVwZW5kZW5jeUxlbmd0aDtcblxuICAgIHByb3BlcnR5U3RhdGVIYW5kbGVyLnJlZ2lzdGVyUGhldGlvT3JkZXJEZXBlbmRlbmN5KCBhUHJvcGVydHksIFByb3BlcnR5U3RhdGVQaGFzZS5VTkRFRkVSLCBiUHJvcGVydHksIFByb3BlcnR5U3RhdGVQaGFzZS5OT1RJRlkgKTtcbiAgICBhc3NlcnQub2soIGdldE9yZGVyRGVwZW5kZW5jeUxlbmd0aCgpID09PSAxLCAnb25lIGV4cGVjdGVkJyApO1xuXG4gICAgcHJvcGVydHlTdGF0ZUhhbmRsZXIucmVnaXN0ZXJQaGV0aW9PcmRlckRlcGVuZGVuY3koIGFQcm9wZXJ0eSwgUHJvcGVydHlTdGF0ZVBoYXNlLlVOREVGRVIsIGNQcm9wZXJ0eSwgUHJvcGVydHlTdGF0ZVBoYXNlLk5PVElGWSApO1xuICAgIGFzc2VydC5vayggZ2V0T3JkZXJEZXBlbmRlbmN5TGVuZ3RoKCkgPT09IDIsICd0d28gZXhwZWN0ZWQnICk7XG5cbiAgICBwcm9wZXJ0eVN0YXRlSGFuZGxlci5yZWdpc3RlclBoZXRpb09yZGVyRGVwZW5kZW5jeSggYlByb3BlcnR5LCBQcm9wZXJ0eVN0YXRlUGhhc2UuVU5ERUZFUiwgY1Byb3BlcnR5LCBQcm9wZXJ0eVN0YXRlUGhhc2UuTk9USUZZICk7XG4gICAgYXNzZXJ0Lm9rKCBnZXRPcmRlckRlcGVuZGVuY3lMZW5ndGgoKSA9PT0gMywgJ3RocmVlIGV4cGVjdGVkJyApO1xuXG4gICAgcHJvcGVydHlTdGF0ZUhhbmRsZXIudW5yZWdpc3Rlck9yZGVyRGVwZW5kZW5jaWVzRm9yUHJvcGVydHkoIGFQcm9wZXJ0eSApO1xuICAgIGFzc2VydC5vayggZ2V0T3JkZXJEZXBlbmRlbmN5TGVuZ3RoKCkgPT09IDEsICdhIHdhcyBpbiB0d28nICk7XG4gICAgcHJvcGVydHlTdGF0ZUhhbmRsZXIudW5yZWdpc3Rlck9yZGVyRGVwZW5kZW5jaWVzRm9yUHJvcGVydHkoIGJQcm9wZXJ0eSApO1xuICAgIGFzc2VydC5vayggZ2V0T3JkZXJEZXBlbmRlbmN5TGVuZ3RoKCkgPT09IDAsICdub25lIG5vdycgKTtcblxuICAgIHByb3BlcnR5U3RhdGVIYW5kbGVyLnJlZ2lzdGVyUGhldGlvT3JkZXJEZXBlbmRlbmN5KCBhUHJvcGVydHksIFByb3BlcnR5U3RhdGVQaGFzZS5VTkRFRkVSLCBjUHJvcGVydHksIFByb3BlcnR5U3RhdGVQaGFzZS5OT1RJRlkgKTtcbiAgICBwcm9wZXJ0eVN0YXRlSGFuZGxlci5yZWdpc3RlclBoZXRpb09yZGVyRGVwZW5kZW5jeSggYlByb3BlcnR5LCBQcm9wZXJ0eVN0YXRlUGhhc2UuVU5ERUZFUiwgY1Byb3BlcnR5LCBQcm9wZXJ0eVN0YXRlUGhhc2UuTk9USUZZICk7XG4gICAgYXNzZXJ0Lm9rKCBnZXRPcmRlckRlcGVuZGVuY3lMZW5ndGgoKSA9PT0gMiwgJ25vbmUgbm93JyApO1xuXG4gICAgcHJvcGVydHlTdGF0ZUhhbmRsZXIudW5yZWdpc3Rlck9yZGVyRGVwZW5kZW5jaWVzRm9yUHJvcGVydHkoIGNQcm9wZXJ0eSApO1xuICAgIGFzc2VydC5vayggZ2V0T3JkZXJEZXBlbmRlbmN5TGVuZ3RoKCkgPT09IDAsICdub25lIG5vdycgKTtcblxuICAgIGFQcm9wZXJ0eS5kaXNwb3NlKCk7XG4gICAgYlByb3BlcnR5LmRpc3Bvc2UoKTtcbiAgICBjUHJvcGVydHkuZGlzcG9zZSgpO1xuXG4gICAgaWYgKCB3aW5kb3cuYXNzZXJ0ICkge1xuICAgICAgY29uc3QgdW5pbnN0cnVtZW50ZWRQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggMiApO1xuICAgICAgY29uc3QgaW5zdHJ1bWVudGVkUHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSwge1xuICAgICAgICB0YW5kZW06IFRhbmRlbS5ST09UX1RFU1QuY3JlYXRlVGFuZGVtKCAnaW5zdHJ1bWVudGVkUHJvcGVydHknIClcbiAgICAgIH0gKTtcbiAgICAgIGFzc2VydC50aHJvd3MoICgpID0+IHtcblxuICAgICAgICBwcm9wZXJ0eVN0YXRlSGFuZGxlci5yZWdpc3RlclBoZXRpb09yZGVyRGVwZW5kZW5jeSggdW5pbnN0cnVtZW50ZWRQcm9wZXJ0eSwgUHJvcGVydHlTdGF0ZVBoYXNlLlVOREVGRVIsIGluc3RydW1lbnRlZFByb3BlcnR5LCBQcm9wZXJ0eVN0YXRlUGhhc2UuVU5ERUZFUiApO1xuICAgICAgfSwgJ2Nhbm5vdCByZWdpc3RlciB3aXRoIGFuIHVuaW5zdHJ1bWVudGVkIFByb3BlcnR5JyApO1xuXG4gICAgICBhc3NlcnQudGhyb3dzKCAoKSA9PiB7XG5cbiAgICAgICAgcHJvcGVydHlTdGF0ZUhhbmRsZXIucmVnaXN0ZXJQaGV0aW9PcmRlckRlcGVuZGVuY3koIGluc3RydW1lbnRlZFByb3BlcnR5LCBQcm9wZXJ0eVN0YXRlUGhhc2UuVU5ERUZFUiwgaW5zdHJ1bWVudGVkUHJvcGVydHksIFByb3BlcnR5U3RhdGVQaGFzZS5VTkRFRkVSICk7XG4gICAgICB9LCAnc2FtZSBQcm9wZXJ0eSBzYW1lIHBoYXNlLiAuIC4gLiBubyBuby4nICk7XG4gICAgfVxuICB9ICk7XG5cbiAgUVVuaXQudGVzdCggJ09yZGVyIGRlcGVuZGVuY3kgYmV0d2VlbiBOdW1iZXJQcm9wZXJ0eSBhbmQgaXRzIFJhbmdlJywgYXNzZXJ0ID0+IHtcbiAgICBhc3NlcnQub2soIHRydWUsICdhbHdheXMgcGFzcycgKTtcbiAgICBjb25zdCByYW5nZVByb3BlcnR5ID0gbmV3IFByb3BlcnR5PFJhbmdlPiggbmV3IFJhbmdlKCAwLCAxICksIHtcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJPT1RfVEVTVC5jcmVhdGVUYW5kZW0oICdyYW5nZVByb3BlcnR5JyApLFxuICAgICAgcGhldGlvRHluYW1pY0VsZW1lbnQ6IHRydWUsXG4gICAgICBwaGV0aW9WYWx1ZVR5cGU6IFJhbmdlLlJhbmdlSU9cbiAgICB9ICk7XG4gICAgY29uc3QgbnVtYmVyUHJvcGVydHkgPSBuZXcgTnVtYmVyUHJvcGVydHkoIDAsIHtcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJPT1RfVEVTVC5jcmVhdGVUYW5kZW0oICdudW1iZXJQcm9wZXJ0eScgKSxcbiAgICAgIHBoZXRpb0R5bmFtaWNFbGVtZW50OiB0cnVlLFxuICAgICAgcmFuZ2U6IHJhbmdlUHJvcGVydHlcbiAgICB9ICk7XG5cbiAgICBjb25zdCByYW5kb21EZXBlbmRlbmN5UHJvcGVydHkgPSBuZXcgQm9vbGVhblByb3BlcnR5KCBmYWxzZSwge1xuICAgICAgdGFuZGVtOiBUYW5kZW0uUk9PVF9URVNULmNyZWF0ZVRhbmRlbSggJ3JhbmRvbURlcGVuZGVuY3lQcm9wZXJ0eScgKSxcbiAgICAgIHBoZXRpb0R5bmFtaWNFbGVtZW50OiB0cnVlXG4gICAgfSApO1xuXG4gICAgLy8gVGhpcyBleHRyYSBvcmRlciBkZXBlbmRlbmN5IG1lYW5zIHRoYXQgbnVtYmVyUHJvcGVydHkgd29uJ3QgYmUgZGVmZXJyZWQgYXMgZWFnZXJseSBhcyByYW5nZVByb3BlcnR5LlxuICAgIC8vIE51bWJlclByb3BlcnR5IHNob3VsZCBzdGlsbCBoYW5kbGUgdGhpcyBjYXNlIGZvciBzdGF0ZSB3aXRob3V0IGVycm9yaW5nIHZhbGlkYXRpb24uXG4gICAgcHJvcGVydHlTdGF0ZUhhbmRsZXJTaW5nbGV0b24ucmVnaXN0ZXJQaGV0aW9PcmRlckRlcGVuZGVuY3koXG4gICAgICByYW5kb21EZXBlbmRlbmN5UHJvcGVydHksIFByb3BlcnR5U3RhdGVQaGFzZS5VTkRFRkVSLFxuICAgICAgbnVtYmVyUHJvcGVydHksIFByb3BlcnR5U3RhdGVQaGFzZS5VTkRFRkVSXG4gICAgKTtcblxuICAgIGNvbnN0IHNlcmlhbGl6ZWRWYWx1ZSA9IE51bWJlclByb3BlcnR5Lk51bWJlclByb3BlcnR5SU8udG9TdGF0ZU9iamVjdCggbnVtYmVyUHJvcGVydHkgKTtcbiAgICBzZXJpYWxpemVkVmFsdWUucmFuZ2UubWluID0gNDtcbiAgICBzZXJpYWxpemVkVmFsdWUucmFuZ2UubWF4ID0gODtcbiAgICBzZXJpYWxpemVkVmFsdWVbICd2YWx1ZScgXSA9IDc7XG5cbiAgICBwaGV0LnBoZXRpby5waGV0aW9FbmdpbmUucGhldGlvU3RhdGVFbmdpbmUuc2V0U3RhdGUoIHtcbiAgICAgICdheG9uLnRlc3QubnVtYmVyUHJvcGVydHknOiBzZXJpYWxpemVkVmFsdWUsXG4gICAgICAnYXhvbi50ZXN0LnJhbmRvbURlcGVuZGVuY3lQcm9wZXJ0eSc6IHsgdmFsdWU6IHRydWUsIHZhbGlkVmFsdWVzOiBudWxsLCB1bml0czogbnVsbCB9LFxuICAgICAgJ2F4b24udGVzdC5yYW5nZVByb3BlcnR5Jzoge1xuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgIG1pbjogNCwgbWF4OiA4XG4gICAgICAgIH0sXG4gICAgICAgIHZhbGlkVmFsdWVzOiBudWxsLFxuICAgICAgICB1bml0czogbnVsbFxuICAgICAgfVxuICAgIH0sIFRhbmRlbS5ST09UX1RFU1QgKTtcblxuICAgIHJhbmdlUHJvcGVydHkuZGlzcG9zZSgpO1xuICAgIG51bWJlclByb3BlcnR5LmRpc3Bvc2UoKTtcbiAgICByYW5kb21EZXBlbmRlbmN5UHJvcGVydHkuZGlzcG9zZSgpO1xuICB9ICk7XG5cbiAgUVVuaXQudGVzdCggJ3VucmVnaXN0ZXJpbmcgY2xlYXJzIG91dCB0aGUgYXJyYXknLCBhc3NlcnQgPT4ge1xuICAgIGFzc2VydC5vayggdHJ1ZSwgJ2Fsd2F5cyBwYXNzJyApO1xuXG4gICAgY29uc3QgcHJvcGVydHlTdGF0ZUhhbmRsZXIgPSBuZXcgUHJvcGVydHlTdGF0ZUhhbmRsZXIoKTtcbiAgICBhc3NlcnQub2soICFwcm9wZXJ0eVN0YXRlSGFuZGxlclsgJ2luaXRpYWxpemVkJyBdLCAnc3RhcnRlZCBub3QgaW5pdGlhbGl6ZWQnICk7XG4gICAgY29uc3QgcGhldGlvU3RhdGVFbmdpbmUgPSBuZXcgcGhldC5waGV0aW8uUGhldGlvU3RhdGVFbmdpbmUoIHBoZXQucGhldGlvLnBoZXRpb0VuZ2luZSwge1xuICAgICAgcHJvcGVydHlTdGF0ZUhhbmRsZXI6IHByb3BlcnR5U3RhdGVIYW5kbGVyXG4gICAgfSApO1xuICAgIGFzc2VydC5vayggcGhldGlvU3RhdGVFbmdpbmUsICd0byBhdm9pZCBlc2xpbnQgbm8gbmV3IGFzIHNpZGUtZWZmZWN0cycgKTtcblxuICAgIGNvbnN0IGFQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIGZhbHNlLCB7XG4gICAgICB0YW5kZW06IFRhbmRlbS5ST09UX1RFU1QuY3JlYXRlVGFuZGVtKCAnYVByb3BlcnR5JyApXG4gICAgfSApO1xuICAgIGNvbnN0IGJQcm9wZXJ0eSA9IG5ldyBCb29sZWFuUHJvcGVydHkoIHRydWUsIHtcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJPT1RfVEVTVC5jcmVhdGVUYW5kZW0oICdiUHJvcGVydHknIClcbiAgICB9ICk7XG4gICAgY29uc3QgY1Byb3BlcnR5ID0gbmV3IEJvb2xlYW5Qcm9wZXJ0eSggZmFsc2UsIHtcbiAgICAgIHRhbmRlbTogVGFuZGVtLlJPT1RfVEVTVC5jcmVhdGVUYW5kZW0oICdjUHJvcGVydHknIClcbiAgICB9ICk7XG5cbiAgICBwcm9wZXJ0eVN0YXRlSGFuZGxlci5yZWdpc3RlclBoZXRpb09yZGVyRGVwZW5kZW5jeSggYVByb3BlcnR5LCBQcm9wZXJ0eVN0YXRlUGhhc2UuVU5ERUZFUiwgYlByb3BlcnR5LCBQcm9wZXJ0eVN0YXRlUGhhc2UuTk9USUZZICk7XG4gICAgcHJvcGVydHlTdGF0ZUhhbmRsZXIudW5yZWdpc3Rlck9yZGVyRGVwZW5kZW5jaWVzRm9yUHJvcGVydHkoIGJQcm9wZXJ0eSApO1xuICAgIGFzc2VydC5vayggcHJvcGVydHlTdGF0ZUhhbmRsZXJbICd1bmRlZmVyQmVmb3JlTm90aWZ5TWFwUGFpcicgXS5iZWZvcmVNYXAuc2l6ZSA9PT0gMCwgJ2VtcHR5IGVudHJpZXMgc2hvdWxkIGJlIGNsZWFyZWQnICk7XG5cbiAgICBwcm9wZXJ0eVN0YXRlSGFuZGxlci5yZWdpc3RlclBoZXRpb09yZGVyRGVwZW5kZW5jeSggYVByb3BlcnR5LCBQcm9wZXJ0eVN0YXRlUGhhc2UuVU5ERUZFUiwgYlByb3BlcnR5LCBQcm9wZXJ0eVN0YXRlUGhhc2UuTk9USUZZICk7XG4gICAgcHJvcGVydHlTdGF0ZUhhbmRsZXIucmVnaXN0ZXJQaGV0aW9PcmRlckRlcGVuZGVuY3koIGFQcm9wZXJ0eSwgUHJvcGVydHlTdGF0ZVBoYXNlLlVOREVGRVIsIGNQcm9wZXJ0eSwgUHJvcGVydHlTdGF0ZVBoYXNlLk5PVElGWSApO1xuICAgIHByb3BlcnR5U3RhdGVIYW5kbGVyLnVucmVnaXN0ZXJPcmRlckRlcGVuZGVuY2llc0ZvclByb3BlcnR5KCBhUHJvcGVydHkgKTtcbiAgICBhc3NlcnQub2soIHByb3BlcnR5U3RhdGVIYW5kbGVyWyAndW5kZWZlckJlZm9yZU5vdGlmeU1hcFBhaXInIF0uYmVmb3JlTWFwLnNpemUgPT09IDAsICdlbXB0eSBlbnRyaWVzIHNob3VsZCBiZSBjbGVhcmVkJyApO1xuXG4gICAgcHJvcGVydHlTdGF0ZUhhbmRsZXIucmVnaXN0ZXJQaGV0aW9PcmRlckRlcGVuZGVuY3koIGFQcm9wZXJ0eSwgUHJvcGVydHlTdGF0ZVBoYXNlLlVOREVGRVIsIGJQcm9wZXJ0eSwgUHJvcGVydHlTdGF0ZVBoYXNlLk5PVElGWSApO1xuICAgIHByb3BlcnR5U3RhdGVIYW5kbGVyLnJlZ2lzdGVyUGhldGlvT3JkZXJEZXBlbmRlbmN5KCBhUHJvcGVydHksIFByb3BlcnR5U3RhdGVQaGFzZS5VTkRFRkVSLCBjUHJvcGVydHksIFByb3BlcnR5U3RhdGVQaGFzZS5OT1RJRlkgKTtcbiAgICBwcm9wZXJ0eVN0YXRlSGFuZGxlci51bnJlZ2lzdGVyT3JkZXJEZXBlbmRlbmNpZXNGb3JQcm9wZXJ0eSggYlByb3BlcnR5ICk7XG4gICAgcHJvcGVydHlTdGF0ZUhhbmRsZXIudW5yZWdpc3Rlck9yZGVyRGVwZW5kZW5jaWVzRm9yUHJvcGVydHkoIGNQcm9wZXJ0eSApO1xuICAgIGFzc2VydC5vayggcHJvcGVydHlTdGF0ZUhhbmRsZXJbICd1bmRlZmVyQmVmb3JlTm90aWZ5TWFwUGFpcicgXS5iZWZvcmVNYXAuc2l6ZSA9PT0gMCwgJ2VtcHR5IGVudHJpZXMgc2hvdWxkIGJlIGNsZWFyZWQnICk7XG5cbiAgICBhUHJvcGVydHkuZGlzcG9zZSgpO1xuICAgIGJQcm9wZXJ0eS5kaXNwb3NlKCk7XG4gICAgY1Byb3BlcnR5LmRpc3Bvc2UoKTtcbiAgfSApO1xufSJdLCJuYW1lcyI6WyJSYW5nZSIsIlRhbmRlbSIsIkJvb2xlYW5Qcm9wZXJ0eSIsIk51bWJlclByb3BlcnR5IiwiUHJvcGVydHkiLCJQcm9wZXJ0eVN0YXRlSGFuZGxlciIsInByb3BlcnR5U3RhdGVIYW5kbGVyU2luZ2xldG9uIiwiUHJvcGVydHlTdGF0ZVBoYXNlIiwiUVVuaXQiLCJtb2R1bGUiLCJQSEVUX0lPX0VOQUJMRUQiLCJ0ZXN0IiwiYXNzZXJ0Iiwid2luZG93IiwiXyIsImhhc0luIiwicHJvcGVydHlTdGF0ZUhhbmRsZXIiLCJvayIsInBoZXRpb1N0YXRlRW5naW5lIiwicGhldCIsInBoZXRpbyIsIlBoZXRpb1N0YXRlRW5naW5lIiwicGhldGlvRW5naW5lIiwiYVByb3BlcnR5IiwidGFuZGVtIiwiUk9PVF9URVNUIiwiY3JlYXRlVGFuZGVtIiwiYlByb3BlcnR5IiwiY1Byb3BlcnR5Iiwib3JpZ2luYWxPcmRlckRlcGVuZGVuY3lMZW5ndGgiLCJnZXROdW1iZXJPZk9yZGVyRGVwZW5kZW5jaWVzIiwiZ2V0T3JkZXJEZXBlbmRlbmN5TGVuZ3RoIiwicmVnaXN0ZXJQaGV0aW9PcmRlckRlcGVuZGVuY3kiLCJVTkRFRkVSIiwiTk9USUZZIiwidW5yZWdpc3Rlck9yZGVyRGVwZW5kZW5jaWVzRm9yUHJvcGVydHkiLCJkaXNwb3NlIiwidW5pbnN0cnVtZW50ZWRQcm9wZXJ0eSIsImluc3RydW1lbnRlZFByb3BlcnR5IiwidGhyb3dzIiwicmFuZ2VQcm9wZXJ0eSIsInBoZXRpb0R5bmFtaWNFbGVtZW50IiwicGhldGlvVmFsdWVUeXBlIiwiUmFuZ2VJTyIsIm51bWJlclByb3BlcnR5IiwicmFuZ2UiLCJyYW5kb21EZXBlbmRlbmN5UHJvcGVydHkiLCJzZXJpYWxpemVkVmFsdWUiLCJOdW1iZXJQcm9wZXJ0eUlPIiwidG9TdGF0ZU9iamVjdCIsIm1pbiIsIm1heCIsInNldFN0YXRlIiwidmFsdWUiLCJ2YWxpZFZhbHVlcyIsInVuaXRzIiwiYmVmb3JlTWFwIiwic2l6ZSJdLCJtYXBwaW5ncyI6IkFBQUEsc0RBQXNEO0FBRXREOzs7OztDQUtDLEdBRUQsT0FBT0EsV0FBVyx3QkFBd0I7QUFDMUMsT0FBT0MsWUFBWSw0QkFBNEI7QUFDL0MsT0FBT0MscUJBQXFCLHVCQUF1QjtBQUNuRCxPQUFPQyxvQkFBb0Isc0JBQXNCO0FBQ2pELE9BQU9DLGNBQWMsZ0JBQWdCO0FBQ3JDLE9BQU9DLHdCQUF3QkMsNkJBQTZCLFFBQVEsNEJBQTRCO0FBQ2hHLE9BQU9DLHdCQUF3QiwwQkFBMEI7QUFFekRDLE1BQU1DLE1BQU0sQ0FBRTtBQUVkLHdDQUF3QztBQUN4QyxJQUFLUixPQUFPUyxlQUFlLEVBQUc7SUFFNUJGLE1BQU1HLElBQUksQ0FBRSxnRUFBZ0VDLENBQUFBO1FBQzFFQyxPQUFPRCxNQUFNLElBQUlDLE9BQU9ELE1BQU0sQ0FBRUUsRUFBRUMsS0FBSyxDQUFFRixRQUFRLGtDQUFtQztRQUVwRixNQUFNRyx1QkFBdUIsSUFBSVg7UUFDakNPLE9BQU9LLEVBQUUsQ0FBRSxDQUFDRCxvQkFBb0IsQ0FBRSxjQUFlLEVBQUU7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