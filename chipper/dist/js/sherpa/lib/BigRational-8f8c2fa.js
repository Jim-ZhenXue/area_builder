var bigRat = function(bigInt1) {
    "use strict";
    function BigRational(num, denom) {
        // Alias properties kept for backwards compatability
        if (denom.isZero()) throw "Denominator cannot be 0.";
        this.numerator = this.num = num;
        this.denominator = this.denom = denom;
    }
    var gcd = bigInt1.gcd, lcm = bigInt1.lcm;
    function reduce(n, d) {
        var divisor = gcd(n, d), num = n.over(divisor), denom = d.over(divisor);
        if (denom.isNegative()) {
            return new BigRational(num.negate(), denom.negate());
        }
        return new BigRational(num, denom);
    }
    BigRational.prototype.add = function(n, d) {
        var v = interpret(n, d), multiple = lcm(this.denom, v.denom), a = multiple.divide(this.denom), b = multiple.divide(v.denom);
        a = this.num.times(a);
        b = v.num.times(b);
        return reduce(a.add(b), multiple);
    };
    BigRational.prototype.plus = BigRational.prototype.add;
    BigRational.prototype.subtract = function(n, d) {
        var v = interpret(n, d);
        return this.add(v.negate());
    };
    BigRational.prototype.minus = BigRational.prototype.subtract;
    BigRational.prototype.multiply = function(n, d) {
        var v = interpret(n, d);
        return reduce(this.num.times(v.num), this.denom.times(v.denom));
    };
    BigRational.prototype.times = BigRational.prototype.multiply;
    BigRational.prototype.divide = function(n, d) {
        var v = interpret(n, d);
        return reduce(this.num.times(v.denom), this.denom.times(v.num));
    };
    BigRational.prototype.over = BigRational.prototype.divide;
    BigRational.prototype.reciprocate = function() {
        return new BigRational(this.denom, this.num);
    };
    BigRational.prototype.mod = function(n, d) {
        var v = interpret(n, d);
        return this.minus(v.times(this.over(v).floor()));
    };
    BigRational.prototype.pow = function(n) {
        var v = bigInt1(n);
        var num = this.num.pow(v), denom = this.denom.pow(v);
        return reduce(num, denom);
    };
    BigRational.prototype.floor = function(toBigInt) {
        var divmod = this.num.divmod(this.denom), floor;
        if (divmod.remainder.isZero() || !divmod.quotient.sign) {
            floor = divmod.quotient;
        } else floor = divmod.quotient.prev();
        if (toBigInt) return floor;
        return new BigRational(floor, bigInt1[1]);
    };
    BigRational.prototype.ceil = function(toBigInt) {
        var divmod = this.num.divmod(this.denom), ceil;
        if (divmod.remainder.isZero() || divmod.quotient.sign) {
            ceil = divmod.quotient;
        } else ceil = divmod.quotient.next();
        if (toBigInt) return ceil;
        return new BigRational(ceil, bigInt1[1]);
    };
    BigRational.prototype.round = function(toBigInt) {
        return this.add(1, 2).floor(toBigInt);
    };
    BigRational.prototype.compareAbs = function(n, d) {
        var v = interpret(n, d);
        if (this.denom.equals(v.denom)) {
            return this.num.compareAbs(v.num);
        }
        return this.num.times(v.denom).compareAbs(v.num.times(this.denom));
    };
    BigRational.prototype.compare = function(n, d) {
        var v = interpret(n, d);
        if (this.denom.equals(v.denom)) {
            return this.num.compare(v.num);
        }
        var comparison = this.denom.sign === v.denom.sign ? 1 : -1;
        return comparison * this.num.times(v.denom).compare(v.num.times(this.denom));
    };
    BigRational.prototype.compareTo = BigRational.prototype.compare;
    BigRational.prototype.equals = function(n, d) {
        return this.compare(n, d) === 0;
    };
    BigRational.prototype.eq = BigRational.prototype.equals;
    BigRational.prototype.notEquals = function(n, d) {
        return this.compare(n, d) !== 0;
    };
    BigRational.prototype.neq = BigRational.prototype.notEquals;
    BigRational.prototype.lesser = function(n, d) {
        return this.compare(n, d) < 0;
    };
    BigRational.prototype.lt = BigRational.prototype.lesser;
    BigRational.prototype.lesserOrEquals = function(n, d) {
        return this.compare(n, d) <= 0;
    };
    BigRational.prototype.leq = BigRational.prototype.lesserOrEquals;
    BigRational.prototype.greater = function(n, d) {
        return this.compare(n, d) > 0;
    };
    BigRational.prototype.gt = BigRational.prototype.greater;
    BigRational.prototype.greaterOrEquals = function(n, d) {
        return this.compare(n, d) >= 0;
    };
    BigRational.prototype.geq = BigRational.prototype.greaterOrEquals;
    BigRational.prototype.abs = function() {
        if (this.isPositive()) return this;
        return this.negate();
    };
    BigRational.prototype.negate = function() {
        if (this.denom.sign) {
            return new BigRational(this.num, this.denom.negate());
        }
        return new BigRational(this.num.negate(), this.denom);
    };
    BigRational.prototype.isNegative = function() {
        return this.num.sign !== this.denom.sign && !this.num.isZero();
    };
    BigRational.prototype.isPositive = function() {
        return this.num.sign === this.denom.sign && !this.num.isZero();
    };
    BigRational.prototype.isZero = function() {
        return this.num.isZero();
    };
    BigRational.prototype.toDecimal = function(digits) {
        digits = digits || 10;
        var n = this.num.divmod(this.denom);
        var intPart = n.quotient.abs().toString();
        var remainder = parse(n.remainder.abs(), this.denom);
        var shiftedRemainder = remainder.times(bigInt1("1e" + digits));
        var decPart = shiftedRemainder.num.over(shiftedRemainder.denom).toString();
        if (decPart.length < digits) {
            decPart = new Array(digits - decPart.length + 1).join("0") + decPart;
        }
        if (shiftedRemainder.num.mod(shiftedRemainder.denom).isZero()) {
            while(decPart.slice(-1) === "0"){
                decPart = decPart.slice(0, -1);
            }
        }
        if (this.isNegative()) {
            intPart = "-" + intPart;
        }
        if (decPart === "") {
            return intPart;
        }
        return intPart + "." + decPart;
    };
    BigRational.prototype.toString = function() {
        return String(this.num) + "/" + String(this.denom);
    };
    BigRational.prototype.valueOf = function() {
        return this.num / this.denom;
    };
    function interpret(n, d) {
        return parse(n, d);
    }
    function parseDecimal(n) {
        var parts = n.split(/e/i);
        if (parts.length > 2) {
            throw new Error("Invalid input: too many 'e' tokens");
        }
        if (parts.length > 1) {
            var isPositive = true;
            if (parts[1][0] === "-") {
                parts[1] = parts[1].slice(1);
                isPositive = false;
            }
            if (parts[1][0] === "+") {
                parts[1] = parts[1].slice(1);
            }
            var significand = parseDecimal(parts[0]);
            var exponent = new BigRational(bigInt1(10).pow(parts[1]), bigInt1[1]);
            if (isPositive) {
                return significand.times(exponent);
            } else {
                return significand.over(exponent);
            }
        }
        parts = n.trim().split(".");
        if (parts.length > 2) {
            throw new Error("Invalid input: too many '.' tokens");
        }
        if (parts.length > 1) {
            var isNegative = parts[0][0] === '-';
            if (isNegative) parts[0] = parts[0].slice(1);
            var intPart = new BigRational(bigInt1(parts[0]), bigInt1[1]);
            var length = parts[1].length;
            while(parts[1][0] === "0"){
                parts[1] = parts[1].slice(1);
            }
            var exp = "1" + Array(length + 1).join("0");
            var decPart = reduce(bigInt1(parts[1]), bigInt1(exp));
            intPart = intPart.add(decPart);
            if (isNegative) intPart = intPart.negate();
            return intPart;
        }
        return new BigRational(bigInt1(n), bigInt1[1]);
    }
    function parse(a, b) {
        if (!a) {
            return new BigRational(bigInt1(0), bigInt1[1]);
        }
        if (b) {
            return reduce(bigInt1(a), bigInt1(b));
        }
        if (bigInt1.isInstance(a)) {
            return new BigRational(a, bigInt1[1]);
        }
        if (a instanceof BigRational) return a;
        var num;
        var denom;
        var text = String(a);
        var texts = text.split("/");
        if (texts.length > 2) {
            throw new Error("Invalid input: too many '/' tokens");
        }
        if (texts.length > 1) {
            var parts = texts[0].split("_");
            if (parts.length > 2) {
                throw new Error("Invalid input: too many '_' tokens");
            }
            if (parts.length > 1) {
                var isPositive = parts[0][0] !== "-";
                num = bigInt1(parts[0]).times(texts[1]);
                if (isPositive) {
                    num = num.add(parts[1]);
                } else {
                    num = num.subtract(parts[1]);
                }
                denom = bigInt1(texts[1]);
                return reduce(num, denom);
            }
            return reduce(bigInt1(texts[0]), bigInt1(texts[1]));
        }
        return parseDecimal(text);
    }
    parse.zero = parse(0);
    parse.one = parse(1);
    parse.minusOne = parse(-1);
    return parse;
}(typeof bigInt !== "undefined" ? bigInt : require("big-integer"));
if (typeof module !== "undefined") {
    if (module.hasOwnProperty("exports")) {
        module.exports = bigRat;
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NoZXJwYS9saWIvQmlnUmF0aW9uYWwtOGY4YzJmYS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyI7dmFyIGJpZ1JhdCA9IChmdW5jdGlvbiAoYmlnSW50KSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBCaWdSYXRpb25hbChudW0sIGRlbm9tKSB7XG4gICAgICAgIC8vIEFsaWFzIHByb3BlcnRpZXMga2VwdCBmb3IgYmFja3dhcmRzIGNvbXBhdGFiaWxpdHlcbiAgICAgICAgaWYgKGRlbm9tLmlzWmVybygpKSB0aHJvdyBcIkRlbm9taW5hdG9yIGNhbm5vdCBiZSAwLlwiO1xuICAgICAgICB0aGlzLm51bWVyYXRvciA9IHRoaXMubnVtID0gbnVtO1xuICAgICAgICB0aGlzLmRlbm9taW5hdG9yID0gdGhpcy5kZW5vbSA9IGRlbm9tO1xuICAgIH1cblxuICAgIHZhciBnY2QgPSBiaWdJbnQuZ2NkLFxuICAgICAgICBsY20gPSBiaWdJbnQubGNtO1xuXG4gICAgZnVuY3Rpb24gcmVkdWNlKG4sIGQpIHtcbiAgICAgICAgdmFyIGRpdmlzb3IgPSBnY2QobiwgZCksXG4gICAgICAgICAgICBudW0gPSBuLm92ZXIoZGl2aXNvciksXG4gICAgICAgICAgICBkZW5vbSA9IGQub3ZlcihkaXZpc29yKTtcbiAgICAgICAgaWYgKGRlbm9tLmlzTmVnYXRpdmUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCaWdSYXRpb25hbChudW0ubmVnYXRlKCksIGRlbm9tLm5lZ2F0ZSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEJpZ1JhdGlvbmFsKG51bSwgZGVub20pO1xuICAgIH1cblxuICAgIEJpZ1JhdGlvbmFsLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAobiwgZCkge1xuICAgICAgICB2YXIgdiA9IGludGVycHJldChuLCBkKSxcbiAgICAgICAgICAgIG11bHRpcGxlID0gbGNtKHRoaXMuZGVub20sIHYuZGVub20pLFxuICAgICAgICAgICAgYSA9IG11bHRpcGxlLmRpdmlkZSh0aGlzLmRlbm9tKSxcbiAgICAgICAgICAgIGIgPSBtdWx0aXBsZS5kaXZpZGUodi5kZW5vbSk7XG5cbiAgICAgICAgYSA9IHRoaXMubnVtLnRpbWVzKGEpO1xuICAgICAgICBiID0gdi5udW0udGltZXMoYik7XG4gICAgICAgIHJldHVybiByZWR1Y2UoYS5hZGQoYiksIG11bHRpcGxlKTtcbiAgICB9O1xuICAgIEJpZ1JhdGlvbmFsLnByb3RvdHlwZS5wbHVzID0gQmlnUmF0aW9uYWwucHJvdG90eXBlLmFkZDtcblxuICAgIEJpZ1JhdGlvbmFsLnByb3RvdHlwZS5zdWJ0cmFjdCA9IGZ1bmN0aW9uIChuLCBkKSB7XG4gICAgICAgIHZhciB2ID0gaW50ZXJwcmV0KG4sIGQpO1xuICAgICAgICByZXR1cm4gdGhpcy5hZGQodi5uZWdhdGUoKSk7XG4gICAgfTtcbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUubWludXMgPSBCaWdSYXRpb25hbC5wcm90b3R5cGUuc3VidHJhY3Q7XG5cbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAobiwgZCkge1xuICAgICAgICB2YXIgdiA9IGludGVycHJldChuLCBkKTtcbiAgICAgICAgcmV0dXJuIHJlZHVjZSh0aGlzLm51bS50aW1lcyh2Lm51bSksIHRoaXMuZGVub20udGltZXModi5kZW5vbSkpO1xuICAgIH07XG4gICAgQmlnUmF0aW9uYWwucHJvdG90eXBlLnRpbWVzID0gQmlnUmF0aW9uYWwucHJvdG90eXBlLm11bHRpcGx5O1xuXG4gICAgQmlnUmF0aW9uYWwucHJvdG90eXBlLmRpdmlkZSA9IGZ1bmN0aW9uIChuLCBkKSB7XG4gICAgICAgIHZhciB2ID0gaW50ZXJwcmV0KG4sIGQpO1xuICAgICAgICByZXR1cm4gcmVkdWNlKHRoaXMubnVtLnRpbWVzKHYuZGVub20pLCB0aGlzLmRlbm9tLnRpbWVzKHYubnVtKSk7XG4gICAgfTtcbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUub3ZlciA9IEJpZ1JhdGlvbmFsLnByb3RvdHlwZS5kaXZpZGU7XG5cbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUucmVjaXByb2NhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmlnUmF0aW9uYWwodGhpcy5kZW5vbSwgdGhpcy5udW0pO1xuICAgIH07XG4gICAgQmlnUmF0aW9uYWwucHJvdG90eXBlLm1vZCA9IGZ1bmN0aW9uIChuLCBkKSB7XG4gICAgICAgIHZhciB2ID0gaW50ZXJwcmV0KG4sIGQpO1xuICAgICAgICByZXR1cm4gdGhpcy5taW51cyh2LnRpbWVzKHRoaXMub3Zlcih2KS5mbG9vcigpKSk7XG4gICAgfTtcbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUucG93ID0gZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgdmFyIHYgPSBiaWdJbnQobik7XG4gICAgICAgIHZhciBudW0gPSB0aGlzLm51bS5wb3codiksXG4gICAgICAgICAgICBkZW5vbSA9IHRoaXMuZGVub20ucG93KHYpO1xuICAgICAgICByZXR1cm4gcmVkdWNlKG51bSwgZGVub20pO1xuICAgIH07XG5cbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUuZmxvb3IgPSBmdW5jdGlvbiAodG9CaWdJbnQpIHtcbiAgICAgICAgdmFyIGRpdm1vZCA9IHRoaXMubnVtLmRpdm1vZCh0aGlzLmRlbm9tKSxcbiAgICAgICAgICAgIGZsb29yO1xuICAgICAgICBpZiAoZGl2bW9kLnJlbWFpbmRlci5pc1plcm8oKSB8fCAhZGl2bW9kLnF1b3RpZW50LnNpZ24pIHtcbiAgICAgICAgICAgIGZsb29yID0gZGl2bW9kLnF1b3RpZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgZmxvb3IgPSBkaXZtb2QucXVvdGllbnQucHJldigpO1xuICAgICAgICBpZiAodG9CaWdJbnQpIHJldHVybiBmbG9vcjtcbiAgICAgICAgcmV0dXJuIG5ldyBCaWdSYXRpb25hbChmbG9vciwgYmlnSW50WzFdKTtcbiAgICB9O1xuICAgIEJpZ1JhdGlvbmFsLnByb3RvdHlwZS5jZWlsID0gZnVuY3Rpb24gKHRvQmlnSW50KSB7XG4gICAgICAgIHZhciBkaXZtb2QgPSB0aGlzLm51bS5kaXZtb2QodGhpcy5kZW5vbSksXG4gICAgICAgICAgICBjZWlsO1xuICAgICAgICBpZiAoZGl2bW9kLnJlbWFpbmRlci5pc1plcm8oKSB8fCBkaXZtb2QucXVvdGllbnQuc2lnbikge1xuICAgICAgICAgICAgY2VpbCA9IGRpdm1vZC5xdW90aWVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGNlaWwgPSBkaXZtb2QucXVvdGllbnQubmV4dCgpO1xuICAgICAgICBpZiAodG9CaWdJbnQpIHJldHVybiBjZWlsO1xuICAgICAgICByZXR1cm4gbmV3IEJpZ1JhdGlvbmFsKGNlaWwsIGJpZ0ludFsxXSk7XG4gICAgfTtcbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUucm91bmQgPSBmdW5jdGlvbiAodG9CaWdJbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkKDEsIDIpLmZsb29yKHRvQmlnSW50KTtcbiAgICB9O1xuXG4gICAgQmlnUmF0aW9uYWwucHJvdG90eXBlLmNvbXBhcmVBYnMgPSBmdW5jdGlvbiAobiwgZCkge1xuICAgICAgICB2YXIgdiA9IGludGVycHJldChuLCBkKTtcbiAgICAgICAgaWYgKHRoaXMuZGVub20uZXF1YWxzKHYuZGVub20pKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0uY29tcGFyZUFicyh2Lm51bSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubnVtLnRpbWVzKHYuZGVub20pLmNvbXBhcmVBYnModi5udW0udGltZXModGhpcy5kZW5vbSkpO1xuICAgIH07XG4gICAgQmlnUmF0aW9uYWwucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiAobiwgZCkge1xuICAgICAgICB2YXIgdiA9IGludGVycHJldChuLCBkKTtcbiAgICAgICAgaWYgKHRoaXMuZGVub20uZXF1YWxzKHYuZGVub20pKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0uY29tcGFyZSh2Lm51bSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbXBhcmlzb24gPSB0aGlzLmRlbm9tLnNpZ24gPT09IHYuZGVub20uc2lnbiA/IDEgOiAtMTtcbiAgICAgICAgcmV0dXJuIGNvbXBhcmlzb24gKiB0aGlzLm51bS50aW1lcyh2LmRlbm9tKS5jb21wYXJlKHYubnVtLnRpbWVzKHRoaXMuZGVub20pKTtcbiAgICB9O1xuICAgIEJpZ1JhdGlvbmFsLnByb3RvdHlwZS5jb21wYXJlVG8gPSBCaWdSYXRpb25hbC5wcm90b3R5cGUuY29tcGFyZTtcblxuICAgIEJpZ1JhdGlvbmFsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobiwgZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlKG4sIGQpID09PSAwO1xuICAgIH07XG4gICAgQmlnUmF0aW9uYWwucHJvdG90eXBlLmVxID0gQmlnUmF0aW9uYWwucHJvdG90eXBlLmVxdWFscztcblxuICAgIEJpZ1JhdGlvbmFsLnByb3RvdHlwZS5ub3RFcXVhbHMgPSBmdW5jdGlvbiAobiwgZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlKG4sIGQpICE9PSAwO1xuICAgIH07XG4gICAgQmlnUmF0aW9uYWwucHJvdG90eXBlLm5lcSA9IEJpZ1JhdGlvbmFsLnByb3RvdHlwZS5ub3RFcXVhbHM7XG5cbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUubGVzc2VyID0gZnVuY3Rpb24gKG4sIGQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShuLCBkKSA8IDA7XG4gICAgfTtcbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUubHQgPSBCaWdSYXRpb25hbC5wcm90b3R5cGUubGVzc2VyO1xuXG4gICAgQmlnUmF0aW9uYWwucHJvdG90eXBlLmxlc3Nlck9yRXF1YWxzID0gZnVuY3Rpb24gKG4sIGQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShuLCBkKSA8PSAwO1xuICAgIH07XG4gICAgQmlnUmF0aW9uYWwucHJvdG90eXBlLmxlcSA9IEJpZ1JhdGlvbmFsLnByb3RvdHlwZS5sZXNzZXJPckVxdWFscztcblxuICAgIEJpZ1JhdGlvbmFsLnByb3RvdHlwZS5ncmVhdGVyID0gZnVuY3Rpb24gKG4sIGQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShuLCBkKSA+IDA7XG4gICAgfTtcbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUuZ3QgPSBCaWdSYXRpb25hbC5wcm90b3R5cGUuZ3JlYXRlcjtcblxuICAgIEJpZ1JhdGlvbmFsLnByb3RvdHlwZS5ncmVhdGVyT3JFcXVhbHMgPSBmdW5jdGlvbiAobiwgZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlKG4sIGQpID49IDA7XG4gICAgfTtcbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUuZ2VxID0gQmlnUmF0aW9uYWwucHJvdG90eXBlLmdyZWF0ZXJPckVxdWFscztcblxuICAgIEJpZ1JhdGlvbmFsLnByb3RvdHlwZS5hYnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUG9zaXRpdmUoKSkgcmV0dXJuIHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLm5lZ2F0ZSgpO1xuICAgIH07XG4gICAgQmlnUmF0aW9uYWwucHJvdG90eXBlLm5lZ2F0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVub20uc2lnbikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCaWdSYXRpb25hbCh0aGlzLm51bSwgdGhpcy5kZW5vbS5uZWdhdGUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBCaWdSYXRpb25hbCh0aGlzLm51bS5uZWdhdGUoKSwgdGhpcy5kZW5vbSk7XG4gICAgfTtcbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUuaXNOZWdhdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtLnNpZ24gIT09IHRoaXMuZGVub20uc2lnbiAmJiAhdGhpcy5udW0uaXNaZXJvKCk7XG4gICAgfTtcbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUuaXNQb3NpdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtLnNpZ24gPT09IHRoaXMuZGVub20uc2lnbiAmJiAhdGhpcy5udW0uaXNaZXJvKCk7XG4gICAgfTtcbiAgICBCaWdSYXRpb25hbC5wcm90b3R5cGUuaXNaZXJvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5udW0uaXNaZXJvKCk7XG4gICAgfTtcblxuICAgIEJpZ1JhdGlvbmFsLnByb3RvdHlwZS50b0RlY2ltYWwgPSBmdW5jdGlvbiAoZGlnaXRzKSB7XG4gICAgICAgIGRpZ2l0cyA9IGRpZ2l0cyB8fCAxMDtcbiAgICAgICAgdmFyIG4gPSB0aGlzLm51bS5kaXZtb2QodGhpcy5kZW5vbSk7XG4gICAgICAgIHZhciBpbnRQYXJ0ID0gbi5xdW90aWVudC5hYnMoKS50b1N0cmluZygpO1xuICAgICAgICB2YXIgcmVtYWluZGVyID0gcGFyc2Uobi5yZW1haW5kZXIuYWJzKCksIHRoaXMuZGVub20pO1xuICAgICAgICB2YXIgc2hpZnRlZFJlbWFpbmRlciA9IHJlbWFpbmRlci50aW1lcyhiaWdJbnQoXCIxZVwiICsgZGlnaXRzKSk7XG4gICAgICAgIHZhciBkZWNQYXJ0ID0gc2hpZnRlZFJlbWFpbmRlci5udW0ub3ZlcihzaGlmdGVkUmVtYWluZGVyLmRlbm9tKS50b1N0cmluZygpO1xuICAgICAgICBpZiAoZGVjUGFydC5sZW5ndGggPCBkaWdpdHMpIHtcbiAgICAgICAgICAgIGRlY1BhcnQgPSBuZXcgQXJyYXkoZGlnaXRzIC0gZGVjUGFydC5sZW5ndGggKyAxKS5qb2luKFwiMFwiKSArIGRlY1BhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoaWZ0ZWRSZW1haW5kZXIubnVtLm1vZChzaGlmdGVkUmVtYWluZGVyLmRlbm9tKS5pc1plcm8oKSkge1xuICAgICAgICAgICAgd2hpbGUgKGRlY1BhcnQuc2xpY2UoLTEpID09PSBcIjBcIikge1xuICAgICAgICAgICAgICAgIGRlY1BhcnQgPSBkZWNQYXJ0LnNsaWNlKDAsIC0xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc05lZ2F0aXZlKCkpIHtcbiAgICAgICAgICBpbnRQYXJ0ID0gXCItXCIraW50UGFydDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVjUGFydCA9PT0gXCJcIikge1xuICAgICAgICAgICAgcmV0dXJuIGludFBhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGludFBhcnQgKyBcIi5cIiArIGRlY1BhcnQ7XG4gICAgfTtcblxuICAgIEJpZ1JhdGlvbmFsLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyh0aGlzLm51bSkgKyBcIi9cIiArIFN0cmluZyh0aGlzLmRlbm9tKTtcbiAgICB9O1xuXG4gICAgQmlnUmF0aW9uYWwucHJvdG90eXBlLnZhbHVlT2YgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bSAvIHRoaXMuZGVub207XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGludGVycHJldChuLCBkKSB7XG4gICAgICAgIHJldHVybiBwYXJzZShuLCBkKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGFyc2VEZWNpbWFsKG4pIHtcbiAgICAgICAgdmFyIHBhcnRzID0gbi5zcGxpdCgvZS9pKTtcbiAgICAgICAgaWYocGFydHMubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbnB1dDogdG9vIG1hbnkgJ2UnIHRva2Vuc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZihwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB2YXIgaXNQb3NpdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICBpZihwYXJ0c1sxXVswXSA9PT0gXCItXCIpIHtcbiAgICAgICAgICAgICAgICBwYXJ0c1sxXSA9IHBhcnRzWzFdLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIGlzUG9zaXRpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHBhcnRzWzFdWzBdID09PSBcIitcIikge1xuICAgICAgICAgICAgICAgIHBhcnRzWzFdID0gcGFydHNbMV0uc2xpY2UoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2lnbmlmaWNhbmQgPSBwYXJzZURlY2ltYWwocGFydHNbMF0pO1xuICAgICAgICAgICAgdmFyIGV4cG9uZW50ID0gbmV3IEJpZ1JhdGlvbmFsKGJpZ0ludCgxMCkucG93KHBhcnRzWzFdKSwgYmlnSW50WzFdKTtcbiAgICAgICAgICAgIGlmKGlzUG9zaXRpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2lnbmlmaWNhbmQudGltZXMoZXhwb25lbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2lnbmlmaWNhbmQub3ZlcihleHBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcGFydHMgPSBuLnRyaW0oKS5zcGxpdChcIi5cIik7XG4gICAgICAgIGlmKHBhcnRzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQ6IHRvbyBtYW55ICcuJyB0b2tlbnNcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYocGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdmFyIGlzTmVnYXRpdmUgPSBwYXJ0c1swXVswXSA9PT0gJy0nO1xuICAgICAgICAgICAgaWYgKGlzTmVnYXRpdmUpIHBhcnRzWzBdID0gcGFydHNbMF0uc2xpY2UoMSk7XG4gICAgICAgICAgICB2YXIgaW50UGFydCA9IG5ldyBCaWdSYXRpb25hbChiaWdJbnQocGFydHNbMF0pLCBiaWdJbnRbMV0pO1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHBhcnRzWzFdLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlKHBhcnRzWzFdWzBdID09PSBcIjBcIikge1xuICAgICAgICAgICAgICAgIHBhcnRzWzFdID0gcGFydHNbMV0uc2xpY2UoMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZXhwID0gXCIxXCIgKyBBcnJheShsZW5ndGggKyAxKS5qb2luKFwiMFwiKTtcbiAgICAgICAgICAgIHZhciBkZWNQYXJ0ID0gcmVkdWNlKGJpZ0ludChwYXJ0c1sxXSksIGJpZ0ludChleHApKTtcbiAgICAgICAgICAgIGludFBhcnQgPSBpbnRQYXJ0LmFkZChkZWNQYXJ0KTtcbiAgICAgICAgICAgIGlmIChpc05lZ2F0aXZlKSBpbnRQYXJ0ID0gaW50UGFydC5uZWdhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiBpbnRQYXJ0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQmlnUmF0aW9uYWwoYmlnSW50KG4pLCBiaWdJbnRbMV0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwYXJzZShhLCBiKSB7XG4gICAgICAgIGlmKCFhKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEJpZ1JhdGlvbmFsKGJpZ0ludCgwKSwgYmlnSW50WzFdKTtcbiAgICAgICAgfVxuICAgICAgICBpZihiKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlKGJpZ0ludChhKSwgYmlnSW50KGIpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmlnSW50LmlzSW5zdGFuY2UoYSkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQmlnUmF0aW9uYWwoYSwgYmlnSW50WzFdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYSBpbnN0YW5jZW9mIEJpZ1JhdGlvbmFsKSByZXR1cm4gYTtcblxuICAgICAgICB2YXIgbnVtO1xuICAgICAgICB2YXIgZGVub207XG5cbiAgICAgICAgdmFyIHRleHQgPSBTdHJpbmcoYSk7XG4gICAgICAgIHZhciB0ZXh0cyA9IHRleHQuc3BsaXQoXCIvXCIpO1xuICAgICAgICBpZih0ZXh0cy5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGlucHV0OiB0b28gbWFueSAnLycgdG9rZW5zXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRleHRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHZhciBwYXJ0cyA9IHRleHRzWzBdLnNwbGl0KFwiX1wiKTtcbiAgICAgICAgICAgIGlmKHBhcnRzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGlucHV0OiB0b28gbWFueSAnXycgdG9rZW5zXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYocGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHZhciBpc1Bvc2l0aXZlID0gcGFydHNbMF1bMF0gIT09IFwiLVwiO1xuICAgICAgICAgICAgICAgIG51bSA9IGJpZ0ludChwYXJ0c1swXSkudGltZXModGV4dHNbMV0pO1xuICAgICAgICAgICAgICAgIGlmKGlzUG9zaXRpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgbnVtID0gbnVtLmFkZChwYXJ0c1sxXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbnVtID0gbnVtLnN1YnRyYWN0KHBhcnRzWzFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVub20gPSBiaWdJbnQodGV4dHNbMV0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWR1Y2UobnVtLCBkZW5vbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlKGJpZ0ludCh0ZXh0c1swXSksIGJpZ0ludCh0ZXh0c1sxXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJzZURlY2ltYWwodGV4dCk7XG4gICAgfVxuXG4gICAgcGFyc2UuemVybyA9IHBhcnNlKDApO1xuICAgIHBhcnNlLm9uZSA9IHBhcnNlKDEpO1xuICAgIHBhcnNlLm1pbnVzT25lID0gcGFyc2UoLTEpO1xuXG4gICAgcmV0dXJuIHBhcnNlO1xufSkodHlwZW9mIGJpZ0ludCAhPT0gXCJ1bmRlZmluZWRcIiA/IGJpZ0ludCA6IHJlcXVpcmUoXCJiaWctaW50ZWdlclwiKSk7XG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGlmIChtb2R1bGUuaGFzT3duUHJvcGVydHkoXCJleHBvcnRzXCIpKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gYmlnUmF0O1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJiaWdSYXQiLCJiaWdJbnQiLCJCaWdSYXRpb25hbCIsIm51bSIsImRlbm9tIiwiaXNaZXJvIiwibnVtZXJhdG9yIiwiZGVub21pbmF0b3IiLCJnY2QiLCJsY20iLCJyZWR1Y2UiLCJuIiwiZCIsImRpdmlzb3IiLCJvdmVyIiwiaXNOZWdhdGl2ZSIsIm5lZ2F0ZSIsInByb3RvdHlwZSIsImFkZCIsInYiLCJpbnRlcnByZXQiLCJtdWx0aXBsZSIsImEiLCJkaXZpZGUiLCJiIiwidGltZXMiLCJwbHVzIiwic3VidHJhY3QiLCJtaW51cyIsIm11bHRpcGx5IiwicmVjaXByb2NhdGUiLCJtb2QiLCJmbG9vciIsInBvdyIsInRvQmlnSW50IiwiZGl2bW9kIiwicmVtYWluZGVyIiwicXVvdGllbnQiLCJzaWduIiwicHJldiIsImNlaWwiLCJuZXh0Iiwicm91bmQiLCJjb21wYXJlQWJzIiwiZXF1YWxzIiwiY29tcGFyZSIsImNvbXBhcmlzb24iLCJjb21wYXJlVG8iLCJlcSIsIm5vdEVxdWFscyIsIm5lcSIsImxlc3NlciIsImx0IiwibGVzc2VyT3JFcXVhbHMiLCJsZXEiLCJncmVhdGVyIiwiZ3QiLCJncmVhdGVyT3JFcXVhbHMiLCJnZXEiLCJhYnMiLCJpc1Bvc2l0aXZlIiwidG9EZWNpbWFsIiwiZGlnaXRzIiwiaW50UGFydCIsInRvU3RyaW5nIiwicGFyc2UiLCJzaGlmdGVkUmVtYWluZGVyIiwiZGVjUGFydCIsImxlbmd0aCIsIkFycmF5Iiwiam9pbiIsInNsaWNlIiwiU3RyaW5nIiwidmFsdWVPZiIsInBhcnNlRGVjaW1hbCIsInBhcnRzIiwic3BsaXQiLCJFcnJvciIsInNpZ25pZmljYW5kIiwiZXhwb25lbnQiLCJ0cmltIiwiZXhwIiwiaXNJbnN0YW5jZSIsInRleHQiLCJ0ZXh0cyIsInplcm8iLCJvbmUiLCJtaW51c09uZSIsInJlcXVpcmUiLCJtb2R1bGUiLCJoYXNPd25Qcm9wZXJ0eSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFDLElBQUlBLFNBQVMsQUFBQyxTQUFVQyxPQUFNO0lBQzNCO0lBRUEsU0FBU0MsWUFBWUMsR0FBRyxFQUFFQyxLQUFLO1FBQzNCLG9EQUFvRDtRQUNwRCxJQUFJQSxNQUFNQyxNQUFNLElBQUksTUFBTTtRQUMxQixJQUFJLENBQUNDLFNBQVMsR0FBRyxJQUFJLENBQUNILEdBQUcsR0FBR0E7UUFDNUIsSUFBSSxDQUFDSSxXQUFXLEdBQUcsSUFBSSxDQUFDSCxLQUFLLEdBQUdBO0lBQ3BDO0lBRUEsSUFBSUksTUFBTVAsUUFBT08sR0FBRyxFQUNoQkMsTUFBTVIsUUFBT1EsR0FBRztJQUVwQixTQUFTQyxPQUFPQyxDQUFDLEVBQUVDLENBQUM7UUFDaEIsSUFBSUMsVUFBVUwsSUFBSUcsR0FBR0MsSUFDakJULE1BQU1RLEVBQUVHLElBQUksQ0FBQ0QsVUFDYlQsUUFBUVEsRUFBRUUsSUFBSSxDQUFDRDtRQUNuQixJQUFJVCxNQUFNVyxVQUFVLElBQUk7WUFDcEIsT0FBTyxJQUFJYixZQUFZQyxJQUFJYSxNQUFNLElBQUlaLE1BQU1ZLE1BQU07UUFDckQ7UUFDQSxPQUFPLElBQUlkLFlBQVlDLEtBQUtDO0lBQ2hDO0lBRUFGLFlBQVllLFNBQVMsQ0FBQ0MsR0FBRyxHQUFHLFNBQVVQLENBQUMsRUFBRUMsQ0FBQztRQUN0QyxJQUFJTyxJQUFJQyxVQUFVVCxHQUFHQyxJQUNqQlMsV0FBV1osSUFBSSxJQUFJLENBQUNMLEtBQUssRUFBRWUsRUFBRWYsS0FBSyxHQUNsQ2tCLElBQUlELFNBQVNFLE1BQU0sQ0FBQyxJQUFJLENBQUNuQixLQUFLLEdBQzlCb0IsSUFBSUgsU0FBU0UsTUFBTSxDQUFDSixFQUFFZixLQUFLO1FBRS9Ca0IsSUFBSSxJQUFJLENBQUNuQixHQUFHLENBQUNzQixLQUFLLENBQUNIO1FBQ25CRSxJQUFJTCxFQUFFaEIsR0FBRyxDQUFDc0IsS0FBSyxDQUFDRDtRQUNoQixPQUFPZCxPQUFPWSxFQUFFSixHQUFHLENBQUNNLElBQUlIO0lBQzVCO0lBQ0FuQixZQUFZZSxTQUFTLENBQUNTLElBQUksR0FBR3hCLFlBQVllLFNBQVMsQ0FBQ0MsR0FBRztJQUV0RGhCLFlBQVllLFNBQVMsQ0FBQ1UsUUFBUSxHQUFHLFNBQVVoQixDQUFDLEVBQUVDLENBQUM7UUFDM0MsSUFBSU8sSUFBSUMsVUFBVVQsR0FBR0M7UUFDckIsT0FBTyxJQUFJLENBQUNNLEdBQUcsQ0FBQ0MsRUFBRUgsTUFBTTtJQUM1QjtJQUNBZCxZQUFZZSxTQUFTLENBQUNXLEtBQUssR0FBRzFCLFlBQVllLFNBQVMsQ0FBQ1UsUUFBUTtJQUU1RHpCLFlBQVllLFNBQVMsQ0FBQ1ksUUFBUSxHQUFHLFNBQVVsQixDQUFDLEVBQUVDLENBQUM7UUFDM0MsSUFBSU8sSUFBSUMsVUFBVVQsR0FBR0M7UUFDckIsT0FBT0YsT0FBTyxJQUFJLENBQUNQLEdBQUcsQ0FBQ3NCLEtBQUssQ0FBQ04sRUFBRWhCLEdBQUcsR0FBRyxJQUFJLENBQUNDLEtBQUssQ0FBQ3FCLEtBQUssQ0FBQ04sRUFBRWYsS0FBSztJQUNqRTtJQUNBRixZQUFZZSxTQUFTLENBQUNRLEtBQUssR0FBR3ZCLFlBQVllLFNBQVMsQ0FBQ1ksUUFBUTtJQUU1RDNCLFlBQVllLFNBQVMsQ0FBQ00sTUFBTSxHQUFHLFNBQVVaLENBQUMsRUFBRUMsQ0FBQztRQUN6QyxJQUFJTyxJQUFJQyxVQUFVVCxHQUFHQztRQUNyQixPQUFPRixPQUFPLElBQUksQ0FBQ1AsR0FBRyxDQUFDc0IsS0FBSyxDQUFDTixFQUFFZixLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLENBQUNxQixLQUFLLENBQUNOLEVBQUVoQixHQUFHO0lBQ2pFO0lBQ0FELFlBQVllLFNBQVMsQ0FBQ0gsSUFBSSxHQUFHWixZQUFZZSxTQUFTLENBQUNNLE1BQU07SUFFekRyQixZQUFZZSxTQUFTLENBQUNhLFdBQVcsR0FBRztRQUNoQyxPQUFPLElBQUk1QixZQUFZLElBQUksQ0FBQ0UsS0FBSyxFQUFFLElBQUksQ0FBQ0QsR0FBRztJQUMvQztJQUNBRCxZQUFZZSxTQUFTLENBQUNjLEdBQUcsR0FBRyxTQUFVcEIsQ0FBQyxFQUFFQyxDQUFDO1FBQ3RDLElBQUlPLElBQUlDLFVBQVVULEdBQUdDO1FBQ3JCLE9BQU8sSUFBSSxDQUFDZ0IsS0FBSyxDQUFDVCxFQUFFTSxLQUFLLENBQUMsSUFBSSxDQUFDWCxJQUFJLENBQUNLLEdBQUdhLEtBQUs7SUFDaEQ7SUFDQTlCLFlBQVllLFNBQVMsQ0FBQ2dCLEdBQUcsR0FBRyxTQUFVdEIsQ0FBQztRQUNuQyxJQUFJUSxJQUFJbEIsUUFBT1U7UUFDZixJQUFJUixNQUFNLElBQUksQ0FBQ0EsR0FBRyxDQUFDOEIsR0FBRyxDQUFDZCxJQUNuQmYsUUFBUSxJQUFJLENBQUNBLEtBQUssQ0FBQzZCLEdBQUcsQ0FBQ2Q7UUFDM0IsT0FBT1QsT0FBT1AsS0FBS0M7SUFDdkI7SUFFQUYsWUFBWWUsU0FBUyxDQUFDZSxLQUFLLEdBQUcsU0FBVUUsUUFBUTtRQUM1QyxJQUFJQyxTQUFTLElBQUksQ0FBQ2hDLEdBQUcsQ0FBQ2dDLE1BQU0sQ0FBQyxJQUFJLENBQUMvQixLQUFLLEdBQ25DNEI7UUFDSixJQUFJRyxPQUFPQyxTQUFTLENBQUMvQixNQUFNLE1BQU0sQ0FBQzhCLE9BQU9FLFFBQVEsQ0FBQ0MsSUFBSSxFQUFFO1lBQ3BETixRQUFRRyxPQUFPRSxRQUFRO1FBQzNCLE9BQ0tMLFFBQVFHLE9BQU9FLFFBQVEsQ0FBQ0UsSUFBSTtRQUNqQyxJQUFJTCxVQUFVLE9BQU9GO1FBQ3JCLE9BQU8sSUFBSTlCLFlBQVk4QixPQUFPL0IsT0FBTSxDQUFDLEVBQUU7SUFDM0M7SUFDQUMsWUFBWWUsU0FBUyxDQUFDdUIsSUFBSSxHQUFHLFNBQVVOLFFBQVE7UUFDM0MsSUFBSUMsU0FBUyxJQUFJLENBQUNoQyxHQUFHLENBQUNnQyxNQUFNLENBQUMsSUFBSSxDQUFDL0IsS0FBSyxHQUNuQ29DO1FBQ0osSUFBSUwsT0FBT0MsU0FBUyxDQUFDL0IsTUFBTSxNQUFNOEIsT0FBT0UsUUFBUSxDQUFDQyxJQUFJLEVBQUU7WUFDbkRFLE9BQU9MLE9BQU9FLFFBQVE7UUFDMUIsT0FDS0csT0FBT0wsT0FBT0UsUUFBUSxDQUFDSSxJQUFJO1FBQ2hDLElBQUlQLFVBQVUsT0FBT007UUFDckIsT0FBTyxJQUFJdEMsWUFBWXNDLE1BQU12QyxPQUFNLENBQUMsRUFBRTtJQUMxQztJQUNBQyxZQUFZZSxTQUFTLENBQUN5QixLQUFLLEdBQUcsU0FBVVIsUUFBUTtRQUM1QyxPQUFPLElBQUksQ0FBQ2hCLEdBQUcsQ0FBQyxHQUFHLEdBQUdjLEtBQUssQ0FBQ0U7SUFDaEM7SUFFQWhDLFlBQVllLFNBQVMsQ0FBQzBCLFVBQVUsR0FBRyxTQUFVaEMsQ0FBQyxFQUFFQyxDQUFDO1FBQzdDLElBQUlPLElBQUlDLFVBQVVULEdBQUdDO1FBQ3JCLElBQUksSUFBSSxDQUFDUixLQUFLLENBQUN3QyxNQUFNLENBQUN6QixFQUFFZixLQUFLLEdBQUc7WUFDNUIsT0FBTyxJQUFJLENBQUNELEdBQUcsQ0FBQ3dDLFVBQVUsQ0FBQ3hCLEVBQUVoQixHQUFHO1FBQ3BDO1FBQ0EsT0FBTyxJQUFJLENBQUNBLEdBQUcsQ0FBQ3NCLEtBQUssQ0FBQ04sRUFBRWYsS0FBSyxFQUFFdUMsVUFBVSxDQUFDeEIsRUFBRWhCLEdBQUcsQ0FBQ3NCLEtBQUssQ0FBQyxJQUFJLENBQUNyQixLQUFLO0lBQ3BFO0lBQ0FGLFlBQVllLFNBQVMsQ0FBQzRCLE9BQU8sR0FBRyxTQUFVbEMsQ0FBQyxFQUFFQyxDQUFDO1FBQzFDLElBQUlPLElBQUlDLFVBQVVULEdBQUdDO1FBQ3JCLElBQUksSUFBSSxDQUFDUixLQUFLLENBQUN3QyxNQUFNLENBQUN6QixFQUFFZixLQUFLLEdBQUc7WUFDNUIsT0FBTyxJQUFJLENBQUNELEdBQUcsQ0FBQzBDLE9BQU8sQ0FBQzFCLEVBQUVoQixHQUFHO1FBQ2pDO1FBQ0EsSUFBSTJDLGFBQWEsSUFBSSxDQUFDMUMsS0FBSyxDQUFDa0MsSUFBSSxLQUFLbkIsRUFBRWYsS0FBSyxDQUFDa0MsSUFBSSxHQUFHLElBQUksQ0FBQztRQUN6RCxPQUFPUSxhQUFhLElBQUksQ0FBQzNDLEdBQUcsQ0FBQ3NCLEtBQUssQ0FBQ04sRUFBRWYsS0FBSyxFQUFFeUMsT0FBTyxDQUFDMUIsRUFBRWhCLEdBQUcsQ0FBQ3NCLEtBQUssQ0FBQyxJQUFJLENBQUNyQixLQUFLO0lBQzlFO0lBQ0FGLFlBQVllLFNBQVMsQ0FBQzhCLFNBQVMsR0FBRzdDLFlBQVllLFNBQVMsQ0FBQzRCLE9BQU87SUFFL0QzQyxZQUFZZSxTQUFTLENBQUMyQixNQUFNLEdBQUcsU0FBVWpDLENBQUMsRUFBRUMsQ0FBQztRQUN6QyxPQUFPLElBQUksQ0FBQ2lDLE9BQU8sQ0FBQ2xDLEdBQUdDLE9BQU87SUFDbEM7SUFDQVYsWUFBWWUsU0FBUyxDQUFDK0IsRUFBRSxHQUFHOUMsWUFBWWUsU0FBUyxDQUFDMkIsTUFBTTtJQUV2RDFDLFlBQVllLFNBQVMsQ0FBQ2dDLFNBQVMsR0FBRyxTQUFVdEMsQ0FBQyxFQUFFQyxDQUFDO1FBQzVDLE9BQU8sSUFBSSxDQUFDaUMsT0FBTyxDQUFDbEMsR0FBR0MsT0FBTztJQUNsQztJQUNBVixZQUFZZSxTQUFTLENBQUNpQyxHQUFHLEdBQUdoRCxZQUFZZSxTQUFTLENBQUNnQyxTQUFTO0lBRTNEL0MsWUFBWWUsU0FBUyxDQUFDa0MsTUFBTSxHQUFHLFNBQVV4QyxDQUFDLEVBQUVDLENBQUM7UUFDekMsT0FBTyxJQUFJLENBQUNpQyxPQUFPLENBQUNsQyxHQUFHQyxLQUFLO0lBQ2hDO0lBQ0FWLFlBQVllLFNBQVMsQ0FBQ21DLEVBQUUsR0FBR2xELFlBQVllLFNBQVMsQ0FBQ2tDLE1BQU07SUFFdkRqRCxZQUFZZSxTQUFTLENBQUNvQyxjQUFjLEdBQUcsU0FBVTFDLENBQUMsRUFBRUMsQ0FBQztRQUNqRCxPQUFPLElBQUksQ0FBQ2lDLE9BQU8sQ0FBQ2xDLEdBQUdDLE1BQU07SUFDakM7SUFDQVYsWUFBWWUsU0FBUyxDQUFDcUMsR0FBRyxHQUFHcEQsWUFBWWUsU0FBUyxDQUFDb0MsY0FBYztJQUVoRW5ELFlBQVllLFNBQVMsQ0FBQ3NDLE9BQU8sR0FBRyxTQUFVNUMsQ0FBQyxFQUFFQyxDQUFDO1FBQzFDLE9BQU8sSUFBSSxDQUFDaUMsT0FBTyxDQUFDbEMsR0FBR0MsS0FBSztJQUNoQztJQUNBVixZQUFZZSxTQUFTLENBQUN1QyxFQUFFLEdBQUd0RCxZQUFZZSxTQUFTLENBQUNzQyxPQUFPO0lBRXhEckQsWUFBWWUsU0FBUyxDQUFDd0MsZUFBZSxHQUFHLFNBQVU5QyxDQUFDLEVBQUVDLENBQUM7UUFDbEQsT0FBTyxJQUFJLENBQUNpQyxPQUFPLENBQUNsQyxHQUFHQyxNQUFNO0lBQ2pDO0lBQ0FWLFlBQVllLFNBQVMsQ0FBQ3lDLEdBQUcsR0FBR3hELFlBQVllLFNBQVMsQ0FBQ3dDLGVBQWU7SUFFakV2RCxZQUFZZSxTQUFTLENBQUMwQyxHQUFHLEdBQUc7UUFDeEIsSUFBSSxJQUFJLENBQUNDLFVBQVUsSUFBSSxPQUFPLElBQUk7UUFDbEMsT0FBTyxJQUFJLENBQUM1QyxNQUFNO0lBQ3RCO0lBQ0FkLFlBQVllLFNBQVMsQ0FBQ0QsTUFBTSxHQUFHO1FBQzNCLElBQUksSUFBSSxDQUFDWixLQUFLLENBQUNrQyxJQUFJLEVBQUU7WUFDakIsT0FBTyxJQUFJcEMsWUFBWSxJQUFJLENBQUNDLEdBQUcsRUFBRSxJQUFJLENBQUNDLEtBQUssQ0FBQ1ksTUFBTTtRQUN0RDtRQUNBLE9BQU8sSUFBSWQsWUFBWSxJQUFJLENBQUNDLEdBQUcsQ0FBQ2EsTUFBTSxJQUFJLElBQUksQ0FBQ1osS0FBSztJQUN4RDtJQUNBRixZQUFZZSxTQUFTLENBQUNGLFVBQVUsR0FBRztRQUMvQixPQUFPLElBQUksQ0FBQ1osR0FBRyxDQUFDbUMsSUFBSSxLQUFLLElBQUksQ0FBQ2xDLEtBQUssQ0FBQ2tDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQ25DLEdBQUcsQ0FBQ0UsTUFBTTtJQUNoRTtJQUNBSCxZQUFZZSxTQUFTLENBQUMyQyxVQUFVLEdBQUc7UUFDL0IsT0FBTyxJQUFJLENBQUN6RCxHQUFHLENBQUNtQyxJQUFJLEtBQUssSUFBSSxDQUFDbEMsS0FBSyxDQUFDa0MsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDbkMsR0FBRyxDQUFDRSxNQUFNO0lBQ2hFO0lBQ0FILFlBQVllLFNBQVMsQ0FBQ1osTUFBTSxHQUFHO1FBQzNCLE9BQU8sSUFBSSxDQUFDRixHQUFHLENBQUNFLE1BQU07SUFDMUI7SUFFQUgsWUFBWWUsU0FBUyxDQUFDNEMsU0FBUyxHQUFHLFNBQVVDLE1BQU07UUFDOUNBLFNBQVNBLFVBQVU7UUFDbkIsSUFBSW5ELElBQUksSUFBSSxDQUFDUixHQUFHLENBQUNnQyxNQUFNLENBQUMsSUFBSSxDQUFDL0IsS0FBSztRQUNsQyxJQUFJMkQsVUFBVXBELEVBQUUwQixRQUFRLENBQUNzQixHQUFHLEdBQUdLLFFBQVE7UUFDdkMsSUFBSTVCLFlBQVk2QixNQUFNdEQsRUFBRXlCLFNBQVMsQ0FBQ3VCLEdBQUcsSUFBSSxJQUFJLENBQUN2RCxLQUFLO1FBQ25ELElBQUk4RCxtQkFBbUI5QixVQUFVWCxLQUFLLENBQUN4QixRQUFPLE9BQU82RDtRQUNyRCxJQUFJSyxVQUFVRCxpQkFBaUIvRCxHQUFHLENBQUNXLElBQUksQ0FBQ29ELGlCQUFpQjlELEtBQUssRUFBRTRELFFBQVE7UUFDeEUsSUFBSUcsUUFBUUMsTUFBTSxHQUFHTixRQUFRO1lBQ3pCSyxVQUFVLElBQUlFLE1BQU1QLFNBQVNLLFFBQVFDLE1BQU0sR0FBRyxHQUFHRSxJQUFJLENBQUMsT0FBT0g7UUFDakU7UUFDQSxJQUFJRCxpQkFBaUIvRCxHQUFHLENBQUM0QixHQUFHLENBQUNtQyxpQkFBaUI5RCxLQUFLLEVBQUVDLE1BQU0sSUFBSTtZQUMzRCxNQUFPOEQsUUFBUUksS0FBSyxDQUFDLENBQUMsT0FBTyxJQUFLO2dCQUM5QkosVUFBVUEsUUFBUUksS0FBSyxDQUFDLEdBQUcsQ0FBQztZQUNoQztRQUNKO1FBQ0EsSUFBSSxJQUFJLENBQUN4RCxVQUFVLElBQUk7WUFDckJnRCxVQUFVLE1BQUlBO1FBQ2hCO1FBQ0EsSUFBSUksWUFBWSxJQUFJO1lBQ2hCLE9BQU9KO1FBQ1g7UUFDQSxPQUFPQSxVQUFVLE1BQU1JO0lBQzNCO0lBRUFqRSxZQUFZZSxTQUFTLENBQUMrQyxRQUFRLEdBQUc7UUFDN0IsT0FBT1EsT0FBTyxJQUFJLENBQUNyRSxHQUFHLElBQUksTUFBTXFFLE9BQU8sSUFBSSxDQUFDcEUsS0FBSztJQUNyRDtJQUVBRixZQUFZZSxTQUFTLENBQUN3RCxPQUFPLEdBQUc7UUFDNUIsT0FBTyxJQUFJLENBQUN0RSxHQUFHLEdBQUcsSUFBSSxDQUFDQyxLQUFLO0lBQ2hDO0lBRUEsU0FBU2dCLFVBQVVULENBQUMsRUFBRUMsQ0FBQztRQUNuQixPQUFPcUQsTUFBTXRELEdBQUdDO0lBQ3BCO0lBQ0EsU0FBUzhELGFBQWEvRCxDQUFDO1FBQ25CLElBQUlnRSxRQUFRaEUsRUFBRWlFLEtBQUssQ0FBQztRQUNwQixJQUFHRCxNQUFNUCxNQUFNLEdBQUcsR0FBRztZQUNqQixNQUFNLElBQUlTLE1BQU07UUFDcEI7UUFDQSxJQUFHRixNQUFNUCxNQUFNLEdBQUcsR0FBRztZQUNqQixJQUFJUixhQUFhO1lBQ2pCLElBQUdlLEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEtBQUs7Z0JBQ3BCQSxLQUFLLENBQUMsRUFBRSxHQUFHQSxLQUFLLENBQUMsRUFBRSxDQUFDSixLQUFLLENBQUM7Z0JBQzFCWCxhQUFhO1lBQ2pCO1lBQ0EsSUFBR2UsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssS0FBSztnQkFDcEJBLEtBQUssQ0FBQyxFQUFFLEdBQUdBLEtBQUssQ0FBQyxFQUFFLENBQUNKLEtBQUssQ0FBQztZQUM5QjtZQUNBLElBQUlPLGNBQWNKLGFBQWFDLEtBQUssQ0FBQyxFQUFFO1lBQ3ZDLElBQUlJLFdBQVcsSUFBSTdFLFlBQVlELFFBQU8sSUFBSWdDLEdBQUcsQ0FBQzBDLEtBQUssQ0FBQyxFQUFFLEdBQUcxRSxPQUFNLENBQUMsRUFBRTtZQUNsRSxJQUFHMkQsWUFBWTtnQkFDWCxPQUFPa0IsWUFBWXJELEtBQUssQ0FBQ3NEO1lBQzdCLE9BQU87Z0JBQ0gsT0FBT0QsWUFBWWhFLElBQUksQ0FBQ2lFO1lBQzVCO1FBQ0o7UUFDQUosUUFBUWhFLEVBQUVxRSxJQUFJLEdBQUdKLEtBQUssQ0FBQztRQUN2QixJQUFHRCxNQUFNUCxNQUFNLEdBQUcsR0FBRztZQUNqQixNQUFNLElBQUlTLE1BQU07UUFDcEI7UUFDQSxJQUFHRixNQUFNUCxNQUFNLEdBQUcsR0FBRztZQUNqQixJQUFJckQsYUFBYTRELEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLO1lBQ2pDLElBQUk1RCxZQUFZNEQsS0FBSyxDQUFDLEVBQUUsR0FBR0EsS0FBSyxDQUFDLEVBQUUsQ0FBQ0osS0FBSyxDQUFDO1lBQzFDLElBQUlSLFVBQVUsSUFBSTdELFlBQVlELFFBQU8wRSxLQUFLLENBQUMsRUFBRSxHQUFHMUUsT0FBTSxDQUFDLEVBQUU7WUFDekQsSUFBSW1FLFNBQVNPLEtBQUssQ0FBQyxFQUFFLENBQUNQLE1BQU07WUFDNUIsTUFBTU8sS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssSUFBSztnQkFDdkJBLEtBQUssQ0FBQyxFQUFFLEdBQUdBLEtBQUssQ0FBQyxFQUFFLENBQUNKLEtBQUssQ0FBQztZQUM5QjtZQUNBLElBQUlVLE1BQU0sTUFBTVosTUFBTUQsU0FBUyxHQUFHRSxJQUFJLENBQUM7WUFDdkMsSUFBSUgsVUFBVXpELE9BQU9ULFFBQU8wRSxLQUFLLENBQUMsRUFBRSxHQUFHMUUsUUFBT2dGO1lBQzlDbEIsVUFBVUEsUUFBUTdDLEdBQUcsQ0FBQ2lEO1lBQ3RCLElBQUlwRCxZQUFZZ0QsVUFBVUEsUUFBUS9DLE1BQU07WUFDeEMsT0FBTytDO1FBQ1g7UUFDQSxPQUFPLElBQUk3RCxZQUFZRCxRQUFPVSxJQUFJVixPQUFNLENBQUMsRUFBRTtJQUMvQztJQUNBLFNBQVNnRSxNQUFNM0MsQ0FBQyxFQUFFRSxDQUFDO1FBQ2YsSUFBRyxDQUFDRixHQUFHO1lBQ0gsT0FBTyxJQUFJcEIsWUFBWUQsUUFBTyxJQUFJQSxPQUFNLENBQUMsRUFBRTtRQUMvQztRQUNBLElBQUd1QixHQUFHO1lBQ0YsT0FBT2QsT0FBT1QsUUFBT3FCLElBQUlyQixRQUFPdUI7UUFDcEM7UUFDQSxJQUFJdkIsUUFBT2lGLFVBQVUsQ0FBQzVELElBQUk7WUFDdEIsT0FBTyxJQUFJcEIsWUFBWW9CLEdBQUdyQixPQUFNLENBQUMsRUFBRTtRQUN2QztRQUNBLElBQUlxQixhQUFhcEIsYUFBYSxPQUFPb0I7UUFFckMsSUFBSW5CO1FBQ0osSUFBSUM7UUFFSixJQUFJK0UsT0FBT1gsT0FBT2xEO1FBQ2xCLElBQUk4RCxRQUFRRCxLQUFLUCxLQUFLLENBQUM7UUFDdkIsSUFBR1EsTUFBTWhCLE1BQU0sR0FBRyxHQUFHO1lBQ2pCLE1BQU0sSUFBSVMsTUFBTTtRQUNwQjtRQUNBLElBQUdPLE1BQU1oQixNQUFNLEdBQUcsR0FBRztZQUNqQixJQUFJTyxRQUFRUyxLQUFLLENBQUMsRUFBRSxDQUFDUixLQUFLLENBQUM7WUFDM0IsSUFBR0QsTUFBTVAsTUFBTSxHQUFHLEdBQUc7Z0JBQ2pCLE1BQU0sSUFBSVMsTUFBTTtZQUNwQjtZQUNBLElBQUdGLE1BQU1QLE1BQU0sR0FBRyxHQUFHO2dCQUNqQixJQUFJUixhQUFhZSxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSztnQkFDakN4RSxNQUFNRixRQUFPMEUsS0FBSyxDQUFDLEVBQUUsRUFBRWxELEtBQUssQ0FBQzJELEtBQUssQ0FBQyxFQUFFO2dCQUNyQyxJQUFHeEIsWUFBWTtvQkFDWHpELE1BQU1BLElBQUllLEdBQUcsQ0FBQ3lELEtBQUssQ0FBQyxFQUFFO2dCQUMxQixPQUFPO29CQUNIeEUsTUFBTUEsSUFBSXdCLFFBQVEsQ0FBQ2dELEtBQUssQ0FBQyxFQUFFO2dCQUMvQjtnQkFDQXZFLFFBQVFILFFBQU9tRixLQUFLLENBQUMsRUFBRTtnQkFDdkIsT0FBTzFFLE9BQU9QLEtBQUtDO1lBQ3ZCO1lBQ0EsT0FBT00sT0FBT1QsUUFBT21GLEtBQUssQ0FBQyxFQUFFLEdBQUduRixRQUFPbUYsS0FBSyxDQUFDLEVBQUU7UUFDbkQ7UUFDQSxPQUFPVixhQUFhUztJQUN4QjtJQUVBbEIsTUFBTW9CLElBQUksR0FBR3BCLE1BQU07SUFDbkJBLE1BQU1xQixHQUFHLEdBQUdyQixNQUFNO0lBQ2xCQSxNQUFNc0IsUUFBUSxHQUFHdEIsTUFBTSxDQUFDO0lBRXhCLE9BQU9BO0FBQ1gsRUFBRyxPQUFPaEUsV0FBVyxjQUFjQSxTQUFTdUYsUUFBUTtBQUNwRCxJQUFJLE9BQU9DLFdBQVcsYUFBYTtJQUMvQixJQUFJQSxPQUFPQyxjQUFjLENBQUMsWUFBWTtRQUNsQ0QsT0FBT0UsT0FBTyxHQUFHM0Y7SUFDckI7QUFDSiJ9